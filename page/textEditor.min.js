document.addEventListener("DOMContentLoaded",()=>{function e(){const e=this.value;x.value=e,$.value=e,k.style.fontSize=`${e}px`}function t(){var e=k.value;const t=e.trim()?e.trim().split(/\s+/).length:0,a=e?e.split("\n").length:0;S.textContent=`Char: ${e.length}`,w.textContent=`Wrd: ${t}`,B.textContent=`Ln: ${a}`,e=new Blob([e]).size,C.textContent=e<1024?`B: ${e}`:e<1048576?`KB: ${(e/1024).toFixed(2)}`:e<1073741824?`MB: ${(e/1048576).toFixed(2)}`:`GB: ${(e/1073741824).toFixed(2)}`}function a(e){D[A-1].content=k.value,A=e,k.value=D.find(t=>t.id===e).content,document.querySelectorAll(".numbered-tab").forEach(t=>{t.classList.toggle("active",parseInt(t.dataset.tab)===e)}),t()}function n(){k.style.direction="ltr",k.style.textAlign="left"}function r(){window.scrollTo({top:0,behavior:"smooth"})}function l(){document.querySelectorAll(".dropdown-content").forEach(e=>{e.classList.remove("show")})}function o(e){const t=k.value;if(window.noFiliExceptions)c(e,t);else{var a=document.createElement("script");a.src="noFiliExceptions.js",a.onload=()=>{c(e,t)},a.onerror=()=>{console.error("Failed to load exceptions"),q.innerHTML="Error loading exceptions. Continuing without them.",c(e,t)},document.head.appendChild(a)}}function c(e,t){var a=[];switch(e){case"findAllTypoIssues":a=function(e){const t=/[\u07a6-\u07b0]/,a=/[\u064b-\u0650\u0652-\u0656]/,n=/[\u0780-\u07a5]/,r=/[\u064e\u064f\u0650]/,l=window.noFiliExceptions||[],o={"(":")","[":"]","{":"}",'"':'"',"'":"'","‚Äú":"‚Äù","‚Äò":"‚Äô","¬´":"¬ª","‚Äπ":"‚Ä∫","=":"="},c=e.split(/\s+/),s=[];e=[];for(let m=0;m<c.length;m++){const p=c[m];let g=[];var i=l.some(e=>p.includes(e));for(let l=0;l<p.length;l++){const c=p[l],s=p[l+1]||"",v=p[l-1]||"";if(c in o)e.push({char:c,wordIndex:m,charIndex:l});else if(Object.values(o).includes(c))if(0===e.length)g.push({type:"unbalanced",index:l,detail:`Unexpected closing ${c}`});else{var u=e[e.length-1];o[u.char]===c?e.pop():g.push({type:"unbalanced",index:l,detail:`Mismatched ${c}, expected ${o[u.char]}`})}if(t.test(c)&&t.test(s)||a.test(c)&&a.test(s)||"Ÿë"===c&&"Ÿë"===s)g.length>0&&"standalone"===g[g.length-1].type&&g[g.length-1].index===l-1&&g.pop(),g.push({type:"multiple",index:l}),l++;else{if(n.test(c)){u=n.test(s);var d=p[l+2]||"";u=u&&"."===d,d="."===s,t.test(s)||d||u||("ﬁÇ"!==c&&"ﬁÉ"!==c||i?"ﬁÇ"!==c&&"ﬁÉ"!==c&&g.push({type:"noDvFili",index:l}):g.push({type:"noDvFili",index:l})),u&&l++}!t.test(c)&&!a.test(c)&&"Ÿë"!==c||n.test(v)||/[\u0600-\u06FF]/.test(v)||"Ÿë"===c&&r.test(s)||g.push({type:"standalone",index:l})}}for(;e.length>0&&e[0].wordIndex===m;)i=e.shift(),g.push({type:"unbalanced",index:i.charIndex,detail:`Unclosed ${i.char}`});g.length>0&&s.push({word:p,index:m,issues:g})}return e.length>0&&e.forEach(e=>{s.push({word:c[e.wordIndex],index:e.wordIndex,issues:[{type:"unbalanced",index:e.charIndex,detail:`Unclosed ${e.char}`}]})}),s}(t);break;case"findDiacriticIssues":a=/[\u07a6-\u07b0]/;for(var n=/[\u064b-\u0650\u0652-\u0656]/,r=t.split(/\s+/),l=[],o=0;o<r.length;o++){for(var c=r[o],u=[],d=0;d<c.length;d++){var m=c[d],p=c[d+1]||"";(a.test(m)&&a.test(p)||n.test(m)&&n.test(p)||"Ÿë"===m&&"Ÿë"===p)&&(u.push({type:"multiple",index:d}),d++)}u.length>0&&l.push({word:c,index:o,issues:u})}for(a=l,n=function(e){const t=/[\u07a6-\u07b0]/,a=/[\u0780-\u07a5]/,n=window.noFiliExceptions||[];e=e.split(/\s+/);const r=[];for(let c=0;c<e.length;c++){const s=e[c];let i=[];const u=n.some(e=>s.includes(e));for(let e=0;e<s.length;e++){const n=s[e],r=s[e+1]||"";if(a.test(n)){var l=a.test(r),o=s[e+2]||"";l=l&&"."===o,o="."===r,t.test(r)||o||l||("ﬁÇ"!==n&&"ﬁÉ"!==n||u?"ﬁÇ"!==n&&"ﬁÉ"!==n&&i.push({type:"noDvFili",index:e}):i.push({type:"noDvFili",index:e})),l&&e++}}i.length>0&&r.push({word:s,index:c,issues:i})}return r}(t),r=/[\u07a6-\u07b0]/,l=/[\u064b-\u0650\u0652-\u0656]/,o=/[\u0780-\u07a5]/,c=/[\u064e\u064f\u0650]/,t=t.split(/\s+/),u=[],d=0;d<t.length;d++){m=t[d],p=[];for(let e=0;e<m.length;e++){const t=m[e],a=m[e+1]||"",n=m[e-1]||"";!r.test(t)&&!l.test(t)&&"Ÿë"!==t||o.test(n)||/[\u0600-\u06FF]/.test(n)||"Ÿë"===t&&c.test(a)||p.push({type:"standalone",index:e})}p.length>0&&u.push({word:m,index:d,issues:p})}t=u,a=[...a,...n,...t];break;case"findUnbalancedSymbols":a=function(e){const t={"(":")","[":"]","{":"}",'"':'"',"'":"'","‚Äú":"‚Äù","‚Äò":"‚Äô","¬´":"¬ª","‚Äπ":"‚Ä∫","=":"="},a=e.split(/\s+/),n=[];e=[];for(let l=0;l<a.length;l++){const o=a[l];let c=[];for(var r=0;r<o.length;r++){const a=o[r];if(a in t)e.push({char:a,wordIndex:l,charIndex:r});else if(Object.values(t).includes(a))if(0===e.length)c.push({type:"unbalanced",index:r,detail:`Unexpected closing ${a}`});else{const n=e[e.length-1];t[n.char]===a?e.pop():c.push({type:"unbalanced",index:r,detail:`Mismatched ${a}, expected ${t[n.char]}`})}}for(;e.length>0&&e[0].wordIndex===l;)r=e.shift(),c.push({type:"unbalanced",index:r.charIndex,detail:`Unclosed ${r.char}`});c.length>0&&n.push({word:o,index:l,issues:c})}return e.length>0&&e.forEach(e=>{n.push({word:a[e.wordIndex],index:e.wordIndex,issues:[{type:"unbalanced",index:e.charIndex,detail:`Unclosed ${e.char}`}]})}),n}(t)}!function(e,t="findAllTypoIssues"){if(0===e.length)q.innerHTML="No Issues Found";else{var a=e.reduce((e,t)=>e+t.issues.length,0),n=k.value.split(/\s+/),r=`Found ${a} Issue${a>1?"s":""}<br><br>`;if("findAllTypoIssues"!==t)if("findDiacriticIssues"===t){const a=s(e);[{type:"multiple",title:"Multiple Diacritics üîÑ"},{type:"noDvFili",title:"Missing Dhivehi Fili ü••"},{type:"standalone",title:"Standalone Diacritics ‚ö°"}].forEach((e,l)=>{const o=a[e.type]||[];o.length>0&&(l>0&&(r+='<hr class="dropdown-separator" style="margin: 10px 0;">'),r+=i(o,t,n,e.title))})}else r+=i(e,t,n);else{const t=s(e);[{type:"multiple",title:"Multiple Diacritics üîÑ",action:"findMultipleDiacritics"},{type:"noDvFili",title:"Missing Dhivehi Fili ü••",action:"findMissingDhivehiFili"},{type:"standalone",title:"Standalone Diacritics ‚ö°",action:"findStandaloneDiacritics"},{type:"unbalanced",title:"Unbalanced Symbols ‚öñÔ∏è",action:"findUnbalancedSymbols"}].forEach((e,a)=>{const l=t[e.type]||[];l.length>0&&(a>0&&(r+='<hr class="dropdown-separator" style="margin: 10px 0;">'),r+=i(l,e.action,n,e.title))})}q.innerHTML=r}q.style.display="block"}(a,e)}function s(e){const t={multiple:[],noDvFili:[],standalone:[],unbalanced:[]};return e.forEach(e=>{e.issues.forEach(a=>{t[a.type]&&t[a.type].push({...e,issues:[a]})})}),t}function i(e,t,a,n=null){t=n||{findMultipleDiacritics:"Multiple Diacritics üîÑ",findMissingDhivehiFili:"Missing Dhivehi Fili ü••",findStandaloneDiacritics:"Standalone Diacritics ‚ö°",findUnbalancedSymbols:"Unbalanced Symbols ‚öñÔ∏è"}[t]||"Issues",n=e.reduce((e,t)=>e+t.issues.length,0);let r=`<strong>${t} (${n})</strong><br>`;return e.forEach((e,t)=>{const n=a[e.index-1]||"",l=a[e.index+1]||"";let o=e.issues.map(t=>{switch(t.type){case"multiple":var a=`${e.word[t.index-1]||""}${e.word[t.index]} ${e.word[t.index+1]}`;a=`Multiple Fili :&nbsp; ${a}`;break;case"noDvFili":a=`Thaana w/o Fili :&nbsp; ${a=`${e.word[t.index-1]||""} ${e.word[t.index]}`}`;break;case"standalone":a=`Standalone Fili :&nbsp; ${a=`${e.word[t.index-1]||""} ${e.word[t.index]}`}`;break;case"unbalanced":a=e.word[t.index];a=`${e.word.slice(Math.max(0,t.index-2),t.index)}${a}${e.word.slice(t.index+1,t.index+3)}`,a=`${t.detail} :&nbsp; ...${a}...`}return a}).join(", ");r+=`${t+1}. ${n} <span class="blueColor">${e.word}</span> ${l} : <span class="redColor">${o}</span><br>`}),r+="<br>"}function u(){const e=new Date,t="true"===localStorage.getItem("militaryTime"),a=e.getHours()%12||12,n=String(e.getHours()).padStart(2,"0");var r=t?n:a;const l=e.getHours()>=12?"PM":"AM";String(e.getMinutes()).padStart(2,"0");var o=e.toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"});o=o.replace(/^(\w+)\s+(\d+)/,(e,t,a)=>`${t}, ${a}${["th","st","nd","rd"][a%10>3?0:a%10]}`),document.getElementById("gregorianLongEn").textContent=`${o}, at ${t?n:a}:${String(e.getMinutes()).padStart(2,"0")}${t?"":" "+l}`,o="ﬁáﬁßﬁãﬁ©ﬁáﬁ∞ﬁåﬁ¶ ﬁÄﬁØﬁâﬁ¶ ﬁáﬁ¶ﬁÇﬁ∞ﬁéﬁßﬁÉﬁ¶ ﬁÑﬁ™ﬁãﬁ¶ ﬁÑﬁ™ﬁÉﬁßﬁêﬁ∞ﬁäﬁ¶ﬁåﬁ® ﬁÄﬁ™ﬁÜﬁ™ﬁÉﬁ™ ﬁÄﬁÆﬁÇﬁ®ﬁÄﬁ®ﬁÉﬁ™".split(" ");const c=t?"":e.getHours()>=12?"ﬁâﬁ¨ﬁÇﬁãﬁ™ﬁÉﬁ™ﬁäﬁ¶ﬁêﬁ∞":"ﬁâﬁ¨ﬁÇﬁãﬁ™ﬁÉﬁ™ﬁÜﬁ™ﬁÉﬁ®";r=`${o[e.getDay()]}ÿå ${e.getDate()} ${"ﬁñﬁ¶ﬁÇﬁ¶ﬁàﬁ¶ﬁÉﬁ© ﬁäﬁ¨ﬁÑﬁ™ﬁÉﬁ™ﬁàﬁ¶ﬁÉﬁ© ﬁâﬁßﬁÉﬁ®ﬁóﬁ™ ﬁáﬁ¨ﬁïﬁ∞ﬁÉﬁ©ﬁçﬁ∞ ﬁâﬁ≠ ﬁñﬁ´ﬁÇﬁ∞ ﬁñﬁ™ﬁçﬁ¶ﬁáﬁ® ﬁáﬁÆﬁéﬁ¶ﬁêﬁ∞ﬁìﬁ™ ﬁêﬁ¨ﬁïﬁ∞ﬁìﬁ¨ﬁÇﬁ∞ﬁÑﬁ¶ﬁÉﬁ™ ﬁáﬁÆﬁÜﬁ∞ﬁìﬁ´ﬁÑﬁ¶ﬁÉﬁ™ ﬁÇﬁÆﬁàﬁ¨ﬁÇﬁ∞ﬁÑﬁ¶ﬁÉﬁ™ ﬁëﬁ®ﬁêﬁ¨ﬁÇﬁ∞ﬁÑﬁ¶ﬁÉﬁ™".split(" ")[e.getMonth()]} ${e.getFullYear()}ÿå ${r}:${String(e.getMinutes()).padStart(2,"0")}${t?"":" "+c}`,document.getElementById("gregorianLongDv").textContent=r,r=(r=e.toLocaleDateString("ar",{weekday:"long",day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0,hour12:!t})).replace(/(\d{4})\s*ÿå?\s*ŸÅŸä/,"$1ÿå ŸÅŸä").replace(/\s+ÿå/g,"ÿå").replace(/\d{1,2}:\d{2}\s*[ÿµŸÖ]/,`${t?n:a}:${String(e.getMinutes()).padStart(2,"0")}${t?"":e.getHours()>=12?" ŸÖ":" ÿµ"}`),document.getElementById("gregorianLongAr").textContent=r;try{const r={"ŸÖÿ≠ÿ±ŸÖ":["Muharram","ﬁâﬁ™ﬁôﬁ¶ﬁáﬁ∞ﬁÉﬁ¶ﬁâﬁ∞"],"ÿµŸÅÿ±":["Safar","ﬁûﬁ¶ﬁäﬁ¶ﬁÉﬁ™"],"ÿ±ÿ®Ÿäÿπ ÿßŸÑÿ£ŸàŸÑ":["Rabi' al-Awwal","ﬁÉﬁ¶ﬁÑﬁ©ﬁ¢ﬁ™ﬁçﬁ∞ﬁáﬁ¶ﬁáﬁ∞ﬁàﬁ¶ﬁçﬁ∞"],"ÿ±ÿ®Ÿäÿπ ÿßŸÑÿ¢ÿÆÿ±":["Rabi' ath-Thani","ﬁÉﬁ¶ﬁÑﬁ©ﬁ¢ﬁ™ﬁçﬁ∞ﬁáﬁßﬁöﬁ®ﬁÉﬁ™"],"ÿ¨ŸÖÿßÿØŸâ ÿßŸÑÿ£ŸàŸÑŸâ":["Jumada al-Awwal","ﬁñﬁ™ﬁâﬁßﬁãﬁ¶ﬁçﬁ∞ﬁáﬁ´ﬁçﬁß"],"ÿ¨ŸÖÿßÿØŸâ ÿßŸÑÿ¢ÿÆÿ±ÿ©":["Jumada ath-Thani","ﬁñﬁ™ﬁâﬁßﬁãﬁ¶ﬁçﬁ∞ﬁáﬁßﬁöﬁ®ﬁÉﬁß"],"ÿ±ÿ¨ÿ®":["Rajab","ﬁÉﬁ¶ﬁñﬁ¶ﬁÑﬁ™"],"ÿ¥ÿπÿ®ÿßŸÜ":["Sha'ban","ﬁùﬁ¶ﬁ¢ﬁ™ﬁÑﬁßﬁÇﬁ∞"],"ÿ±ŸÖÿ∂ÿßŸÜ":["Ramadan","ﬁÉﬁ¶ﬁâﬁ¶ﬁüﬁßﬁÇﬁ∞"],"ÿ¥ŸàÿßŸÑ":["Shawwal","ﬁùﬁ¶ﬁáﬁ∞ﬁàﬁßﬁçﬁ∞"],"ÿ∞Ÿà ÿßŸÑŸÇÿπÿØÿ©":["Dhul-Qa'dah","ﬁõﬁ™ﬁçﬁ∞ﬁéﬁ¶ﬁ¢ﬁ®ﬁãﬁß"],"ÿ∞Ÿà ÿßŸÑÿ≠ÿ¨ÿ©":["Dhul-Hijjah","ﬁõﬁ™ﬁçﬁ∞ﬁôﬁ®ﬁáﬁ∞ﬁñﬁß"]},s=new Intl.DateTimeFormat("ar-TN-u-ca-islamic",{weekday:"long",day:"numeric",month:"long",year:"numeric",calendar:"islamic"}).format(e),i=`ÿå ŸÅŸä ${t?n:a}:${String(e.getMinutes()).padStart(2,"0")}${t?"":e.getHours()>=12?" ŸÖ":" ÿµ"}`;document.getElementById("hijriLongAr").textContent=s.replace(/ŸáŸÄ/,"").replace(/\s+ÿå/g,"ÿå").replace(/\s+$/,"")+i;const u=new Intl.DateTimeFormat("ar-u-ca-islamic-umalqura",{weekday:"long",day:"numeric",month:"long",year:"numeric",calendar:"islamic"}).formatToParts(e),d={"ÿßŸÑÿ£ÿ≠ÿØ":"Sunday","ÿßŸÑÿßÿ´ŸÜŸäŸÜ":"Monday","ÿßŸÑÿ´ŸÑÿßÿ´ÿßÿ°":"Tuesday","ÿßŸÑÿ£ÿ±ÿ®ÿπÿßÿ°":"Wednesday","ÿßŸÑÿÆŸÖŸäÿ≥":"Thursday","ÿßŸÑÿ¨ŸÖÿπÿ©":"Friday","ÿßŸÑÿ≥ÿ®ÿ™":"Saturday"};let m,p,g,v,h,y,b;u.forEach(e=>{if("weekday"===e.type&&(m=d[e.value]||e.value),"day"===e.type&&(p=e.value),"month"===e.type){var t=e.value;g=r[t]?.[0]||t}"year"===e.type&&(v=e.value)}),document.getElementById("hijriLongEn").textContent=`${m}, ${parseInt(p)} ${g} ${v} AH, at ${t?n:a}:${String(e.getMinutes()).padStart(2,"0")}${t?"":" "+l}`,u.forEach(e=>{if("day"===e.type&&(h=e.value),"month"===e.type){var t=e.value;y=r[t]?.[1]||t}"year"===e.type&&(b=e.value)}),document.getElementById("hijriLongDv").textContent=`${o[e.getDay()]}ÿå ${parseInt(h)} ${y} ${b}ÿå ${t?n:a}:${String(e.getMinutes()).padStart(2,"0")}${t?"":" "+c}`;const f=new Intl.DateTimeFormat("en-u-ca-islamic",{day:"numeric",month:"numeric",year:"numeric",calendar:"islamic"}).format(e).replace(/[^0-9/]/g,"");document.getElementById("hijriShort").textContent=`${f} ${t?n:a}:${String(e.getMinutes()).padStart(2,"0")}${t?"":" "+l}`}catch(e){console.error("Error formatting Hijri dates:",e),["hijriLongAr","hijriLongEn","hijriLongDv","hijriShort"].forEach(e=>{document.getElementById(e).textContent="Hijri date unavailable"})}document.getElementById("gregorianShort").textContent=`${String(e.getDate()).padStart(2,"0")}/${String(e.getMonth()+1).padStart(2,"0")}/${e.getFullYear()} ${t?n:a}:${String(e.getMinutes()).padStart(2,"0")}${t?"":" "+l}`}function d(e,t){const a=document.createElement("span");a.textContent=t,a.className="copy-feedback",e.appendChild(a),e.classList.add("copy-success"),setTimeout(()=>{a.remove(),e.classList.remove("copy-success")},1e3)}function m(){var e=document.getElementById("maghribTime"),t=document.getElementById("fajrTime");if(e.value&&t.value){e=p(e.value),(t=p(t.value))<e&&(t+=1440);var a=t-e;t=e+a/2;var n=e+a/3;e+=2*a/3,document.getElementById("midnightTime").textContent=g(t),document.getElementById("secondThirdTime").textContent=g(n),document.getElementById("lastThirdTime").textContent=g(e)}}function p(e){const[t,a]=e.split(":").map(Number);return 60*t+a}function g(e){e=Math.round(e),e%=1440;const t=Math.floor(e/60);if(e%=60,V)return`${String(t).padStart(2,"0")}:${String(e).padStart(2,"0")}`;const a=t>=12?"PM":"AM";return`${t%12||12}:${String(e).padStart(2,"0")} ${a}`}async function v(e,t){if(!e)throw Error("No data to encrypt");try{const a=window.crypto.getRandomValues(new Uint8Array(16)),n=window.crypto.getRandomValues(new Uint8Array(12)),r=await ae(t),l=await ne(r,a,["encrypt"]),o=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:n},l,ee.encode(e)),c=new Uint8Array(o);let s=new Uint8Array(a.byteLength+n.byteLength+c.byteLength);return s.set(a,0),s.set(n,a.byteLength),s.set(c,a.byteLength+n.byteLength),Y(s)}catch(e){throw console.error(`Encryption error: ${e}`),e}}async function h(e,t){if(!e)throw Error("No data to decrypt");try{const a=X(e),n=a.slice(0,16),r=a.slice(16,28),l=a.slice(28),o=await ae(t),c=await ne(o,n,["decrypt"]),s=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:r},c,l);return te.decode(s)}catch(e){throw console.error(`Decryption error: ${e}`),e}}function y(e){return new Promise((t,a)=>{const n=new FileReader;n.onload=()=>t(n.result),n.onerror=()=>a(n.error),n.readAsArrayBuffer(e)})}function b(e,t){e=URL.createObjectURL(e);const a=document.createElement("a");a.href=e,a.download=t,a.type="application/octet-stream",a.setAttribute("download",t),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(e)}function f(e,t="Choose File"){e.nextElementSibling.textContent=e.files[0]?.name||t}const E=document.querySelectorAll(".top-tab"),I=document.querySelectorAll(".tab-content"),k=document.getElementById("textArea"),x=document.getElementById("fontSizeSlider"),$=document.getElementById("fontSize"),S=document.getElementById("charCount"),w=document.getElementById("wordCount"),B=document.getElementById("lineCount"),C=document.getElementById("fileSize"),L=document.getElementById("addTab"),T=document.querySelector(".numbered-tabs");let A=1,D=[{id:1,content:""}];E.forEach(e=>{e.addEventListener("click",()=>{E.forEach(e=>e.classList.remove("active")),e.classList.add("active"),I.forEach(t=>{t.classList.remove("active"),t.id===`${e.dataset.tab}Tab`&&t.classList.add("active")})})}),x.addEventListener("input",e),$.addEventListener("change",e),$.addEventListener("click",function(){}),k.addEventListener("input",function(e){let t;return function(...a){clearTimeout(t),t=setTimeout(()=>{clearTimeout(t),e(...a)},300)}}(t)),L.addEventListener("click",()=>{const e=D.length+1;D.push({id:e,content:""});const t=document.createElement("button");t.classList.add("numbered-tab"),t.dataset.tab=e,t.textContent=e,T.insertBefore(t,L),a(e)}),T.addEventListener("click",e=>{e.target.classList.contains("numbered-tab")&&a(parseInt(e.target.dataset.tab))}),document.querySelectorAll(".dropdown-button").forEach(e=>{const a=e.querySelector(".function-button"),c=e.querySelector(".dropdown-content");a.addEventListener("click",e=>{e.stopPropagation(),l(),c.classList.toggle("show")}),c.addEventListener("click",e=>{e.stopPropagation(),"BUTTON"===e.target.tagName&&e.target.dataset.action&&(function(e){switch(e){case"arabicToRegular":k.value=k.value.replace(/[Ÿ†Ÿ°Ÿ¢Ÿ£Ÿ§Ÿ•Ÿ¶ŸßŸ®Ÿ©]/g,e=>"Ÿ†Ÿ°Ÿ¢Ÿ£Ÿ§Ÿ•Ÿ¶ŸßŸ®Ÿ©".indexOf(e));break;case"regularToArabic":k.value=k.value.replace(/[0-9]/g,e=>"Ÿ†Ÿ°Ÿ¢Ÿ£Ÿ§Ÿ•Ÿ¶ŸßŸ®Ÿ©"[e]);case"removeFootnoteNumbers":k.value=k.value.replace(/‚ÅΩ[¬π¬≤¬≥‚Å¥‚Åµ‚Å∂‚Å∑‚Å∏‚Åπ‚Å∞]+‚Åæ/g,"");break;case"convertNumerals":const p={regular:"0123456789",arabic:"Ÿ†Ÿ°Ÿ¢Ÿ£Ÿ§Ÿ•Ÿ¶ŸßŸ®Ÿ©",superscript:"‚Å∞¬π¬≤¬≥‚Å¥‚Åµ‚Å∂‚Å∑‚Å∏‚Åπ",mathSansSerif:"ùü¢ùü£ùü§ùü•ùü¶ùüßùü®ùü©ùü™ùü´",mathSansSerifBold:"ùü¨ùü≠ùüÆùüØùü∞ùü±ùü≤ùü≥ùü¥ùüµ",fullWidth:"ÔºêÔºëÔºíÔºìÔºîÔºïÔºñÔºóÔºòÔºô",circled:"‚ì™‚ë†‚ë°‚ë¢‚ë£‚ë§‚ë•‚ë¶‚ëß‚ë®",negativeCircled:"‚ìø‚ù∂‚ù∑‚ù∏‚ùπ‚ù∫‚ùª‚ùº‚ùΩ‚ùæ"},g=p[document.getElementById("numeralFrom").value],v=p[document.getElementById("numeralTo").value];k.value=k.value.replace(/[0-9]/g,e=>{const t=g.indexOf(e);return-1!==t?v[t]:e});break;case"removePrecedingZeros":k.value=k.value.replace(/\b0+(\d)/g,"$1");break;case"removeAllNumbers":k.value=k.value.replace(/[Ÿ†-Ÿ©0-9]/g,"");break;case"keepOnlyNumbers":k.value=k.value.replace(/[^Ÿ†-Ÿ©0-9]/g,"");break;case"rtlStraightToCurly":case"ltrStraightToCurly":const h="rtlStraightToCurly"===e;k.value=k.value.replace(/(\W|^)"(\S)/g,`$1${h?"‚Äù":"‚Äú"}$2`).replace(new RegExp(`(${h?"‚Äù":"‚Äú"}[^"]*)"([^"]*$|[^${h?"‚Äù":"‚Äú"}"]*${h?"‚Äù":"‚Äú"})`,"g"),`$1${h?"‚Äú":"‚Äù"}$2`).replace(/([^0-9])"/g,"$1"+(h?"‚Äú":"‚Äù")).replace(/(\W|^)'(\S)/g,`$1${h?"‚Äô":"‚Äò"}$2`).replace(/([a-z])'([a-z])/gi,"$1‚Äò$2").replace(/((\u2019[^']*)|[a-z])'([^0-9]|$)/gi,`$1${h?"‚Äò":"‚Äô"}$3`).replace(/(\u2019)([0-9]{2}[^\u2018]*)(\u2019([^0-9]|$)|$|\u2018[a-z])/gi,"‚Äò$2$3").replace(/(\B|^)\u2019(?=([^\u2018]*\u2018\b)*([^\u2018\u2019]*\W[\u2018\u2019]\b|[^\u2018\u2019]*$))/gi,"$1‚Äò").replace(/'''/g,"‚Ä¥").replace(/''/g,"‚Ä≥").replace(/'/g,"‚Ä≤");break;case"curlyToStraight":k.value=k.value.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"');break;case"reverseCurlyQuotes":k.value=k.value.replace(/‚Äú|‚Äù/g,e=>"‚Äú"===e?"‚Äù":"‚Äú").replace(/‚Äò|‚Äô/g,e=>"‚Äò"===e?"‚Äô":"‚Äò").replace(/‚ùù|‚ùû/g,e=>"‚ùù"===e?"‚ùû":"‚ùù").replace(/\ud83d\ude76|\ud83d\ude77/g,e=>"üô∑");break;case"convertQuotes":const y={straightSingle:["'","'"],straightDouble:['"','"'],ltrCurlyDouble:["‚Äú","‚Äù"],rtlCurlyDouble:["‚Äù","‚Äú"],ltrCurlySingle:["‚Äò","‚Äô"],rtlCurlySingle:["‚Äô","‚Äò"],angleQuotes:["¬´","¬ª"],doubleBrackets:["((","))"],heavyCommaQuotes:["‚ùù","‚ùû"],sansSerifHeavyCommaQuotes:["üô∂","üô∑"]},b=y[document.getElementById("quoteFrom").value],f=y[document.getElementById("quoteTo").value],E=b[0].replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),I=b[1].replace(/[.*+?^${}()|[\]\\]/g,"\\$&");k.value=k.value.replace(new RegExp(`${E}([^${I}]*)${I}`,"g"),`${f[0]}$1${f[1]}`);break;case"removeJsComments":k.value=k.value.replace(/\/\*[\s\S]*?\*\/|\/\/.*/g,""),n();break;case"removeHtmlComments":k.value=k.value.replace(/\x3c!--[\s\S]*?--\x3e/g,""),n();break;case"removeCssComments":k.value=k.value.replace(/\/\*[\s\S]*?\*\//g,""),n();break;case"removePowershellComments":k.value=k.value.replace(/#.*$/gm,"").replace(/<#[\s\S]*?#>/g,""),n();break;case"removePythonComments":k.value=k.value.replace(/#.*$/gm,"").replace(/'''[\s\S]*?'''|"""[\s\S]*?"""/g,""),n();break;case"removePhpComments":k.value=k.value.replace(/\/\*[\s\S]*?\*\/|\/\/.*|#.*$/gm,""),n();break;case"removeCComments":k.value=k.value.replace(/\/\*[\s\S]*?\*\/|\/\/.*/g,""),n();break;case"removeCSharpComments":k.value=k.value.replace(/\/\*[\s\S]*?\*\/|\/\/\/.*|\/\/.*/g,""),n();break;case"removeJavaComments":k.value=k.value.replace(/\/\*[\s\S]*?\*\/|\/\*\*[\s\S]*?\*\/|\/\/.*/g,""),n();break;case"removeRubyComments":k.value=k.value.replace(/#.*$/gm,"").replace(/^=begin[\s\S]*?^=end/gm,""),n();break;case"removeBashComments":k.value=k.value.replace(/#.*$/gm,""),n();break;case"removeGoComments":k.value=k.value.replace(/\/\*[\s\S]*?\*\/|\/\/.*/g,""),n();break;case"removeRustComments":k.value=k.value.replace(/\/\*[\s\S]*?\*\/|\/\/!.*|\/\/.*/g,""),n();break;case"removeSwiftComments":k.value=k.value.replace(/\/\*[\s\S]*?\*\/|\/\/\/.*|\/\/.*/g,""),n();break;case"removeKotlinComments":k.value=k.value.replace(/\/\*[\s\S]*?\*\/|\/\*\*[\s\S]*?\*\/|\/\/.*/g,""),n();break;case"removeDartComments":k.value=k.value.replace(/\/\*[\s\S]*?\*\/|\/\/\/.*|\/\/.*/g,""),n();break;case"removeSqlComments":k.value=k.value.replace(/\/\*[\s\S]*?\*\/|--.*$/gm,""),n();break;case"textToParagraphs":k.value=k.value.split("\n").filter(e=>e.trim()).map(e=>`<p>${e}</p>`).join("\n"),n();break;case"textToBrTags":k.value=k.value.split("\n").join("<br>\n"),n();break;case"textToOrderedList":k.value="<ol>\n"+k.value.split("\n").filter(e=>e.trim()).map(e=>`  <li>${e}</li>`).join("\n")+"\n</ol>",n();break;case"textToUnorderedList":k.value="<ul>\n"+k.value.split("\n").filter(e=>e.trim()).map(e=>`  <li>${e}</li>`).join("\n")+"\n</ul>",n();break;case"addBulletPoints":k.value=k.value.split("\n").map(e=>e.trim()?`‚Ä¢ ${e}`:e).join("\n"),n();break;case"removeHtmlTags":k.value=k.value.replace(/<[^>]*>/g,"");break;case"removeArabicDiacritics":k.value=k.value.replace(/[\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/g,"");break;case"removeDhivehiFili":k.value=k.value.replace(/[\u07A6-\u07B0]/g,"");break;case"removeThikijehiThaana":const x={"ﬁò":"ﬁê","ﬁô":"ﬁÄ","ﬁõ":"ﬁí","ﬁú":"ﬁí","ﬁû":"ﬁê","ﬁ†":"ﬁå","ﬁ°":"ﬁí","ﬁ¢":"ﬁá","ﬁ§":"ﬁé","ﬁ•":"ﬁà"};k.value=k.value.replace(/[ﬁòﬁôﬁõﬁúﬁûﬁ†ﬁ°ﬁ¢ﬁ§ﬁ•]/g,e=>x[e]||e);break;case"saveFile":const $=new Blob([k.value],{type:"text/plain;charset=utf-8"}),S=document.createElement("a");S.href=URL.createObjectURL($),S.download="saved_text.txt",S.click();break;case"loadFile":const w=document.createElement("input");w.type="file",w.accept="text/plain",w.onchange=e=>{e=e.target.files[0];const a=new FileReader;a.onload=e=>{k.value=e.target.result,t()},a.readAsText(e)},w.click();break;case"titleCase":k.value=k.value.replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase());break;case"sentenceCase":k.value=k.value.toLowerCase().replace(/(^\w|\.\s+\w)/g,e=>e.toUpperCase());break;case"lowercase":k.value=k.value.toLowerCase();break;case"UPPERCASE":k.value=k.value.toUpperCase();break;case"alternatingCase":k.value=k.value.split("").map((e,t)=>t%2==0?e.toLowerCase():e.toUpperCase()).join("");break;case"inverseCase":k.value=k.value.split("").map(e=>e===e.toUpperCase()?e.toLowerCase():e.toUpperCase()).join("");break;case"randomCase":k.value=k.value.split("").map(e=>Math.random()>.5?e.toUpperCase():e.toLowerCase()).join("");break;case"camelCase":k.value=k.value.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,(e,t)=>t.toUpperCase());break;case"pascalCase":k.value=k.value.toLowerCase().replace(/(^|[^a-zA-Z0-9]+)(.)/g,(e,t,a)=>a.toUpperCase());break;case"snakeCase":k.value=k.value.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"_").replace(/^_+|_+$/g,"");break;case"constantCase":k.value=k.value.toUpperCase().replace(/[^A-Z0-9]+/g,"_").replace(/^_+|_+$/g,"");break;case"slugCase":k.value=k.value.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"-").replace(/^-+|-+$/g,"");break;case"dotCase":k.value=k.value.toLowerCase().replace(/[^a-zA-Z0-9]+/g,".").replace(/^\.+|\.+$/g,"");break;case"flatcase":k.value=k.value.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"");break;case"removeUnderscores":k.value=k.value.replace(/_/g," ");break;case"removeHyphens":k.value=k.value.replace(/-/g," ");break;case"removeDuplicateLines":k.value=[...new Set(k.value.split("\n"))].join("\n");break;case"sortLinesAscending":k.value=k.value.split("\n").sort((e,t)=>e.localeCompare(t)).join("\n");break;case"sortLinesDescending":k.value=k.value.split("\n").sort((e,t)=>t.localeCompare(e)).join("\n");break;case"addLineNumbers":const B=document.getElementById("addNumbersWith").value,C=k.value.split("\n").map((e,t)=>`${t+1}${B} ${e}`);k.value=C.join("\n");break;case"removeLineNumbers":const L=document.getElementById("removeNumbersWith").value,T=k.value.split("\n"),A=L.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),D=new RegExp(`^\\d+${A}\\s+`),M=T.map(e=>e.replace(D,""));k.value=M.join("\n");break;case"splitIntoWords":k.value=k.value.split(/\s+/).filter(e=>e.length>0).join("\n");break;case"sortWordsByFrequency":r();const F={};(k.value.toLowerCase().match(/\b[\w']+\b/g)||[]).forEach(e=>{F[e]=(F[e]||0)+1});const U=Object.entries(F).sort((e,t)=>t[1]-e[1]).map(([e,t])=>`${t}: ${e}`);k.value=U.join("\n");break;case"sortLinesByFrequency":r();const j={};k.value.split("\n").filter(e=>""!==e.trim()).forEach(e=>{j[e]=(j[e]||0)+1});const q=Object.entries(j).sort((e,t)=>t[1]-e[1]).map(([e,t])=>`${t}: ${e}`);k.value=q.join("\n");break;case"randomizeLines":k.value=k.value.split("\n").sort(()=>Math.random()-.5).join("\n");break;case"reverseTextHorizontal":k.value=k.value.split("").reverse().join("");break;case"reverseTextVertical":k.value=k.value.split("\n").reverse().join("\n");break;case"checkLineNumberSequence":r();const N=k.value.split("\n"),R=[];let P=1,H=!1;for(let ze=0;ze<N.length;ze++){const We=N[ze].trim();if(""===We){R.push(We);continue}const _e=We.match(/^(\d+)/);if(_e){H=!0;const Ze=parseInt(_e[1]);0!==R.length&&R.some(e=>/\d+/.test(e))||(P=Ze),Ze!==P&&R.push("[!! NOT CONSECUTIVE !!]"),R.push(We),P=Ze+1}else R.push(We)}if(!H)return void alert("No line numbers found to check for sequence.");k.value=R.join("\n");break;case"addPrefixSuffix":const O=document.getElementById("addPrefixInput").value,z=document.getElementById("addSuffixInput").value,W=k.value.split("\n").map(e=>O+e+z);k.value=W.join("\n"),t(),l();break;case"removePrefixSuffix":const _=document.getElementById("removePrefixInput").value,Z=document.getElementById("removeSuffixInput").value,J=k.value.split("\n").map(e=>(_&&e.startsWith(_)&&(e=e.slice(_.length)),Z&&e.endsWith(Z)&&(e=e.slice(0,-Z.length)),e));k.value=J.join("\n"),t(),l();break;case"removeCharsFromEnds":const G=parseInt(document.getElementById("removeStartChars").value)||0,K=parseInt(document.getElementById("removeEndChars").value)||0,Q=k.value.split("\n").map(e=>e?(G>0&&(e=e.slice(G)),K>0&&e.length>0&&(e=e.slice(0,-K)),e):e);k.value=Q.join("\n"),t(),l();break;case"decodeUnicode":k.value=k.value.replace(/\\u([0-9a-fA-F]{4})/g,function(e,t){return String.fromCharCode(parseInt(t,16))}),n();break;case"encodeUnicode":k.value=k.value.replace(/[\s\S]/g,function(e){for(e=e.charCodeAt(0).toString(16);e.length<4;)e="0"+e;return"\\u"+e}),n();break;case"decodeURL":try{k.value=decodeURI(k.value)}catch(Je){alert("Invalid URL encoding")}n();break;case"encodeURL":k.value=encodeURI(k.value),n();break;case"whichUnicodeCharacter":const V=k.value;let Y="";for(let Ge=0;Ge<V.length;Ge++){const Ke=V.codePointAt(Ge),Qe=`https://codepoints.net/U+${Ke.toString(16).toUpperCase().padStart(4,"0")}`;Y+=`U+${Ke.toString(16).toUpperCase().padStart(4,"0")} : ${V[Ge]} : ${Qe}\n`,Ke>65535&&Ge++}k.value=Y,n();break;case"textToLeet":const X={a:"4",e:"3",i:"!",o:"0",t:"7",l:"1",s:"5"};k.value=k.value.toLowerCase().replace(/[aeiotls]/g,e=>X[e]),n();break;case"leetToText":const ee={4:"a",3:"e","!":"i",0:"o",7:"t",1:"l",5:"s"};k.value=k.value.replace(/[43!0715]/g,e=>ee[e]),n();break;case"textToBinary":k.value=k.value.split("").map(e=>e.charCodeAt(0).toString(2).padStart(8,"0")).join(" ");break;case"binaryToText":try{k.value=k.value.trim().split(" ").map(e=>(e=parseInt(e,2),String.fromCharCode(e))).join("")}catch(Ve){alert("Error converting machine code to text. Make sure you have valid binary numbers separated by spaces.")}break;case"convertBrackets":const te={round:["(",")"],square:["[","]"],superscript:["‚ÅΩ","‚Åæ"],corner:["‚åú","‚åù"]},ae=te[document.getElementById("bracketFrom").value],ne=te[document.getElementById("bracketTo").value],re=document.getElementById("bracketDirection").value,le=document.getElementById("bracketTo").value;document.getElementById("bracketFrom"),k.value=k.value.replace(new RegExp(`\\${ae[0]}|\\${ae[1]}`,"g"),e=>"rtl"===re&&"corner"===le?e===ae[0]?ne[1]:ne[0]:e===ae[0]?ne[0]:ne[1]);break;case"reverseBracketDirection":const oe={"(":")",")":"(","[":"]","]":"[","‚ÅΩ":"‚Åæ","‚Åæ":"‚ÅΩ","‚åú":"‚åù","‚åù":"‚åú"};k.value=k.value.replace(/[()[\]‚ÅΩ‚Åæ‚åú‚åù]/g,e=>oe[e]);break;case"convertNumberBrackets":const ce={none:["",""],round:["(",")"],square:["[","]"],superscript:["‚ÅΩ","‚Åæ"]},se={0:"‚Å∞",1:"¬π",2:"¬≤",3:"¬≥",4:"‚Å¥",5:"‚Åµ",6:"‚Å∂",7:"‚Å∑",8:"‚Å∏",9:"‚Åπ"},ie=ce[document.getElementById("numberBracketFrom").value],ue=ce[document.getElementById("numberBracketTo").value],de=document.getElementById("numberBracketTo").value;let me=k.value;ie[0]&&(me=me.replace(new RegExp(`\\${ie[0]}\\d+\\${ie[1]}`,"g"),e=>e.slice(ie[0].length,-ie[1].length))),ue[0]&&(me=me.replace(/\d+/g,e=>(e="superscript"===de?e.split("").map(e=>se[e]).join(""):e,`${ue[0]}${e}${ue[1]}`))),k.value=me;break;case"removeNumberBrackets":const pe={round:["(",")"],square:["[","]"],superscript:["‚ÅΩ","‚Åæ"],none:["",""]}[document.getElementById("numberBracketRemove").value];k.value=k.value.replace(new RegExp(`\\${pe[0]}\\d+\\${pe[1]}`,"g"),""),t();break;case"keepOnlyDhivehi":k.value=k.value.replace(/[^\u0780-\u07BF\s]/g,"");break;case"removeAllDhivehi":k.value=k.value.replace(/[\u0780-\u07BF]/g,"");break;case"keepOnlyArabic":k.value=k.value.replace(/[^\u0600-\u06ff\u0750-\u077f\ufb50-\ufbc1\ufbd3-\ufd3f\ufd50-\ufd8f\ufd92-\ufdc7\ufe70-\ufefc\uFDF0-\uFDFD\s]/g,"");break;case"removeAllArabic":k.value=k.value.replace(/[\u0600-\u06ff\u0750-\u077f\ufb50-\ufbc1\ufbd3-\ufd3f\ufd50-\ufd8f\ufd92-\ufdc7\ufe70-\ufefc\uFDF0-\uFDFD]/g,"");break;case"keepOnlyEnglish":k.value=k.value.replace(/[^A-Za-z\s]/g,"");break;case"removeAllEnglish":k.value=k.value.replace(/[A-Za-z]/g,"");break;case"removeSpacesTabsAndSingleLines":k.value=k.value.replace(/^ +| +$/gm,"").replace(/ +/g," ").replace(/\t+/g," ").trim().replace(/\n{2,}/g,"\n");break;case"removeSpacesAndDoubleLines":k.value=k.value.replace(/^ +| +$/gm,"").replace(/ +/g," ").trim().replace(/\n{3,}/g,"\n\n");break;case"convertSingleToDoubleNewlines":k.value=k.value.replace(/([^\n])\n([^\n])/g,"$1\n\n$2");break;case"wordWrap":k.value=k.value.replace(/\s+/g," ").trim();break;case"removeExtraSpacesOnly":k.value=k.value.replace(/^ +| +$/gm,"").replace(/ +/g," ").trim();break;case"convertTabsToSpaces":k.value=k.value.replace(/\t+/g," ").trim();break;case"removeSingleLinesOnly":k.value=k.value.trim().replace(/\n{2,}/g,"\n");break;case"removeDoubleLinesOnly":k.value=k.value.trim().replace(/\n{3,}/g,"\n\n");break;case"dotsToEllipsis":k.value=k.value.replace(/\.{3}/g,"‚Ä¶");break;case"ellipsisToDots":k.value=k.value.replace(/‚Ä¶/g,"...");break;case"convertDashes":const ge={hyphen:"-",en:"‚Äì",em:"‚Äî"},ve=ge[document.getElementById("dashFrom").value],he=ge[document.getElementById("dashTo").value];k.value=k.value.replace(new RegExp(ve,"g"),he);break;function a(e){var t="";e.useUppercase&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),e.useLowercase&&(t+="abcdefghijklmnopqrstuvwxyz"),e.useNumbers&&(t+="0123456789"),e.useSymbols&&(t+="!@#$%^&*()_+-=[]{}|;:,.<>?"),t||="abcdefghijklmnopqrstuvwxyz";let a="";for(let n=0;n<e.length;n++)a+=t.charAt(Math.floor(Math.random()*t.length));return e.useUppercase&&!/[A-Z]/.test(a)&&(t=Math.floor(Math.random()*e.length),a=a.substring(0,t)+"ABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(26*Math.random()))+a.substring(t+1)),e.useLowercase&&!/[a-z]/.test(a)&&(t=Math.floor(Math.random()*e.length),a=a.substring(0,t)+"abcdefghijklmnopqrstuvwxyz".charAt(Math.floor(26*Math.random()))+a.substring(t+1)),e.useNumbers&&!/[0-9]/.test(a)&&(t=Math.floor(Math.random()*e.length),a=a.substring(0,t)+"0123456789".charAt(Math.floor(10*Math.random()))+a.substring(t+1)),e.useSymbols&&!/[!@#$%^&*()_+\-=\[\]{}|;:,.<>?]/.test(a)&&(e=Math.floor(Math.random()*e.length),a=a.substring(0,e)+"!@#$%^&*()_+-=[]{}|;:,.<>?".charAt(Math.floor(26*Math.random()))+a.substring(e+1)),a}case"setupPasswordGenerator":const ye=document.getElementById("passwordCount");ye&&ye.addEventListener("input",()=>{let e=parseInt(ye.value);e<1&&(ye.value=1),e>100&&(ye.value=100)});const be=document.getElementById("passwordLength");be&&be.addEventListener("input",()=>{let e=parseInt(be.value);e<4&&(be.value=4),e>128&&(be.value=128)});const fe=document.querySelectorAll('.checkbox-group input[type="checkbox"]');fe.forEach(e=>{e.addEventListener("change",()=>{Array.from(fe).some(e=>e.checked)||(e.checked=!0)})});break;case"generatePasswords":const Ee=parseInt(document.getElementById("passwordCount").value)||1,Ie={length:parseInt(document.getElementById("passwordLength").value)||8,useUppercase:document.getElementById("useUppercase").checked,useLowercase:document.getElementById("useLowercase").checked,useNumbers:document.getElementById("useNumbers").checked,useSymbols:document.getElementById("useSymbols").checked},ke=[];for(let Ye=0;Ye<Ee;Ye++)ke.push(a(Ie));k.value=ke.join("\n"),t(),l();break;case"generateSequence":let xe=parseInt(document.getElementById("seqMinInput").value)||1,$e=parseInt(document.getElementById("seqMaxInput").value)||10;xe>$e&&([xe,$e]=[$e,xe],document.getElementById("seqMinInput").value=xe,document.getElementById("seqMaxInput").value=$e);var c=document.getElementById("seqPadStart")?.checked||!1,s=parseInt(document.getElementById("seqPadLength")?.value)||1,i="\\n"===document.getElementById("seqSeparator").value?"\n":document.getElementById("seqSeparator").value||"\n",u=document.getElementById("seqReverse")?.checked||!1,d=document.getElementById("seqPrefix")?.value||"",m=document.getElementById("seqSuffix")?.value||"";let Se=Array.from({length:$e-xe+1},(e,t)=>(e=xe+t,c&&(e=String(e).padStart(s,"0")),`${d}${e}${m}`));u&&Se.reverse(),k.value=Se.join(i),t(),l();break;case"generateRandomNumber":let we=parseInt(document.getElementById("randNoMinInput").value)||1,Be=parseInt(document.getElementById("randNoMaxInput").value)||10;const Ce=parseInt(document.getElementById("randNoCount").value)||1,Le=document.getElementById("randNoUnique").checked;we>Be&&([we,Be]=[Be,we],document.getElementById("randNoMinInput").value=we,document.getElementById("randNoMaxInput").value=Be);const Te=Be-we+1;let Ae=Ce;Le&&Ce>Te&&(Ae=Te);let De=[];if(Le){const Xe=Array.from({length:Te},(e,t)=>we+t);for(let et=Xe.length-1;et>0;et--){const tt=Math.floor(Math.random()*(et+1));[Xe[et],Xe[tt]]=[Xe[tt],Xe[et]]}De=Xe.slice(0,Ae)}else for(let at=0;at<Ae;at++)De.push(Math.floor(Math.random()*(Be-we+1))+we);k.value=De.join("\n"),t(),l();break;case"repeatText":const Me=parseInt(document.getElementById("repeatCount").value)||2,Fe="\\n"===document.getElementById("repeatSeparator").value?"\n":document.getElementById("repeatSeparator").value;k.value=Array(Me).fill(k.value).join(Fe),t(),l();break;case"convertSalawat":const Ue={plain:"ÿµŸÑŸâ ÿßŸÑŸÑŸá ÿπŸÑŸäŸá Ÿàÿ≥ŸÑŸÖ",symbol:"Ô∑∫",tashkeel:"ÿµŸéŸÑŸéŸëŸâ ÿßŸÑŸÑŸáŸè ÿπŸéŸÑŸéŸäŸíŸáŸê ŸàŸéÿ≥ŸéŸÑŸéŸëŸÖŸé"},je=Ue[document.getElementById("salawatFrom").value],qe=Ue[document.getElementById("salawatTo").value],Ne=je.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");k.value=k.value.replace(new RegExp(Ne,"g"),qe);break;case"removeKashidas":k.value=k.value.replace(/ŸÄ/g,"");break;case"shaddaB4Haraka":k.value=k.value.replace(RegExp("([ŸãŸåŸçŸéŸèŸêŸëŸí])(Ÿë)","g"),(e,t,a)=>"Ÿí"===t?e:a+t);break;case"textToArabicDiacritics":case"arabicDiacriticsToText":k.value=Object.entries({"ÿ±ÿ∂Ÿä ÿßŸÑŸÑŸá ÿπŸÜŸáŸÖÿß":"ÿ±Ÿéÿ∂ŸêŸäŸé ÿßŸÑŸÑŸéŸëŸáŸè ÿπŸéŸÜŸíŸáŸèŸÖŸéÿß","ÿ±ÿ∂Ÿä ÿßŸÑŸÑŸá ÿπŸÜŸáŸÖ":"ÿ±Ÿéÿ∂ŸêŸäŸé ÿßŸÑŸÑŸéŸëŸáŸè ÿπŸéŸÜŸíŸáŸèŸÖŸí","ÿ±ÿ∂Ÿä ÿßŸÑŸÑŸá ÿπŸÜŸáÿß":"ÿ±Ÿéÿ∂ŸêŸäŸé ÿßŸÑŸÑŸéŸëŸáŸè ÿπŸéŸÜŸíŸáŸéÿß","ÿ±ÿ∂Ÿä ÿßŸÑŸÑŸá ÿπŸÜŸá":"ÿ±Ÿéÿ∂ŸêŸäŸé ÿßŸÑŸÑŸéŸëŸáŸè ÿπŸéŸÜŸíŸáŸè","ÿπŸÑŸäŸáŸÖÿß ÿßŸÑÿ≥ŸÑÿßŸÖ":"ÿπŸéŸÑŸéŸäŸáŸêŸÖŸéÿß ÿßŸÑÿ≥ŸéŸëŸÑŸéÿßŸÖŸè","ÿπŸÑŸäŸáŸÖ ÿßŸÑÿ≥ŸÑÿßŸÖ":"ÿπŸéŸÑŸéŸäŸáŸêŸÖŸè ÿßŸÑÿ≥ŸéŸëŸÑŸéÿßŸÖŸè","ÿπŸÑŸäŸáÿß ÿßŸÑÿ≥ŸÑÿßŸÖ":"ÿπŸéŸÑŸéŸäŸáŸéÿß ÿßŸÑÿ≥ŸéŸëŸÑŸéÿßŸÖŸè","ÿπŸÑŸäŸá ÿßŸÑÿ≥ŸÑÿßŸÖ":"ÿπŸéŸÑŸéŸäŸáŸê ÿßŸÑÿ≥ŸéŸëŸÑŸéÿßŸÖŸè","ÿ±ÿ≠ŸÖŸáŸÖÿß ÿßŸÑŸÑŸá":"ÿ±Ÿéÿ≠ŸêŸÖŸéŸáŸèŸÖŸéÿß ÿßŸÑŸÑŸéŸëŸáŸè","ÿ±ÿ≠ŸÖŸáŸÖ ÿßŸÑŸÑŸá":"ÿ±Ÿéÿ≠ŸêŸÖŸéŸáŸèŸÖŸè ÿßŸÑŸÑŸéŸëŸáŸè","ÿ±ÿ≠ŸÖŸáÿß ÿßŸÑŸÑŸá":"ÿ±Ÿéÿ≠ŸêŸÖŸéŸáŸéÿß ÿßŸÑŸÑŸéŸëŸáŸè","ÿ±ÿ≠ŸÖŸá ÿßŸÑŸÑŸá":"ÿ±Ÿéÿ≠ŸêŸÖŸéŸáŸè ÿßŸÑŸÑŸéŸëŸáŸè","ÿπÿ≤ Ÿàÿ¨ŸÑ":"ÿπŸéÿ≤ŸéŸë ŸàŸéÿ¨ŸéŸÑŸéŸë","ÿ¨ŸÑ ÿ¨ŸÑÿßŸÑŸá":"ÿ¨ŸéŸÑŸéŸë ÿ¨ŸéŸÑŸéÿßÔªüŸéÔª™Ÿè","ÿ™ÿ®ÿßÿ±ŸÉ Ÿàÿ™ÿπÿßŸÑŸâ":"ÿ™Ÿéÿ®Ÿéÿßÿ±ŸéŸÉŸé ŸàŸéÿ™ŸéÿπŸéÿßŸÑŸéŸâ","ÿ™ÿπÿßŸÑŸâ":"ÿ™ŸéÿπŸéÿßŸÑŸéŸâ"}).reduce((t,[a,n])=>t.replace(new RegExp(("textToArabicDiacritics"===e?a:n).replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),"textToArabicDiacritics"===e?n:a),k.value);break;case"removeQuranicMarks":k.value=k.value.replace(/[€ñ€ó€ò€ô€ö€õ€ú€ù€û€£€ü€†€°€¢€§€•€¶€ß€®€©€™€≠€´€¨Ô¥æÔ¥ø]/g,"").replace(/\s+/g," ").trim();break;case"replaceDoubleBracketsToSingle":k.value=k.value.replace(/\(\(([^)]*)\)\)/g,"($1)");break;case"textToQuranicBrackets":k.value=k.value.replace(/\{/g,"Ô¥æ").replace(/\}/g,"Ô¥ø").replace(/\*/g,"€ù");break;case"quranicToTextBrackets":k.value=k.value.replace(/Ô¥æ/g,"{").replace(/Ô¥ø/g,"}").replace(/€ù/g,"*");break;case"convertPunctuation":const Re={colon:":",fullstop:".",comma:","},Pe=Re[document.getElementById("punctuationFrom").value],He=Re[document.getElementById("punctuationTo").value],Oe=Pe.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");k.value=k.value.replace(new RegExp(Oe,"g"),He);break;case"ltrToRtlPunc":k.value=k.value.replace(/[,;?]/g,e=>({",":"ÿå",";":"ÿõ","?":"ÿü"}[e]||e));break;case"rtlToLtrPunc":k.value=k.value.replace(/[ÿåÿõÿü]/g,e=>({"ÿå":",","ÿõ":";","ÿü":"?"}[e]||e));break;case"findAllTypoIssues":o("findAllTypoIssues");break;case"findDiacriticIssues":o("findDiacriticIssues");break;case"findUnbalancedSymbols":o("findUnbalancedSymbols")}t()}(e.target.dataset.action),c.classList.remove("show"))})}),document.addEventListener("click",l),document.getElementById("copyToClipboard").addEventListener("click",()=>{navigator.clipboard.writeText(k.value)}),document.getElementById("clearAll").addEventListener("click",()=>{k.value="",D=[{id:1,content:""}],T.innerHTML='<button class="numbered-tab active" data-tab="1">1</button><button id="addTab">+</button>',A=1,t()});let M=!0;document.getElementById("toggleDirection").addEventListener("click",()=>{M=!M,k.style.direction=M?"rtl":"ltr",k.style.textAlign=M?"right":"left"});const F=[["ﬁáﬁ¶","a"],["ﬁáﬁß","aa"],["ﬁáﬁ®","i"],["ﬁáﬁ©","ee"],["ﬁáﬁ™","u"],["ﬁáﬁ´","oo"],["ﬁáﬁ¨","e"],["ﬁáﬁ≠","ey"],["ﬁáﬁÆ","o"],["ﬁáﬁØ","oa"],["ﬁ™ﬁáﬁ∞","uh"],["ﬁ®ﬁáﬁ∞","ih"],["ﬁ¨ﬁáﬁ∞","eh"],["ﬁ¶ﬁÅﬁ∞","ah"],["ﬁ¶ﬁáﬁ∞","ah"],["ﬁÅﬁ∞","h"],["ﬁåﬁ∞","i"],["ﬁßﬁáﬁ∞","aah"],["ﬁáﬁ∞","h"],["ﬁ¶","a"],["ﬁß","aa"],["ﬁ®","i"],["ﬁ©","ee"],["ﬁ™","u"],["ﬁ´","oo"],["ﬁ¨","e"],["ﬁ≠","ey"],["ﬁÆ","o"],["ﬁØ","oa"],["ﬁ∞",""],["ﬁÄ","h"],["ﬁÅ","sh"],["ﬁÇ","n"],["ﬁÉ","r"],["ﬁÑ","b"],["ﬁÖ","lh"],["ﬁÜ","k"],["ﬁá","a"],["ﬁà","v"],["ﬁâ","m"],["ﬁä","f"],["ﬁã","dh"],["ﬁå","th"],["ﬁç","l"],["ﬁé","g"],["ﬁè","y"],["ﬁê","s"],["ﬁë","d"],["ﬁí","z"],["ﬁì","t"],["ﬁî","y"],["ﬁï","p"],["ﬁñ","j"],["ﬁó","ch"],["ﬁô","h"],["ﬁö","kh"],["ﬁõ‚Äé","z"],["ﬁú‚Äé","z"],["ﬁù‚Äé","sh"],["ﬁù","sh"],["ﬁ§","q"],["ﬁ¢","a"],["ﬁû","s"],["ﬁü","dh"],["ﬁ°","z"],["ﬁ†","t"],["ﬁßﬁßﬁ£","gh"],["ﬁò","th"],["ﬁõ","dh"],["ﬁßﬁßﬁú","z"]];document.getElementById("transliterateDvToEn").addEventListener("click",()=>{r(),k.value=function(e){e=e.replace(/[\u200B-\u200D\uFEFF]/g,"");for(const[t,a]of F)e=e.replace(new RegExp(t,"g"),a);return e.replace(/(^\s*\w|[.!?]\s*\w)/g,e=>e.toUpperCase())}(k.value),n(),t()});const U=[["ŸÄ",""],["ÿ¢","ﬁáﬁß"],["ÿ®","ﬁÑ"],["ÿ™","ﬁå"],["ÿ´","ﬁò"],["ÿ¨","ﬁñ"],["ÿ≠","ﬁô"],["ÿÆ","ﬁö"],["ÿØ","ﬁã"],["ÿ∞","ﬁõ"],["ÿ±","ﬁÉ"],["ÿ≤","ﬁí"],["ÿ≥","ﬁê"],["ÿ¥","ﬁù"],["ÿµ","ﬁû"],["ÿ∂","ﬁü"],["ÿ∑","ﬁ†"],["ÿ∏","ﬁ°"],["ÿπ","ﬁ¢"],["ÿ∫","ﬁ£"],["ŸÅ","ﬁä"],["ŸÇ","ﬁ§"],["ŸÉ","ﬁÜ"],["ŸÑ","ﬁç"],["ŸÖ","ﬁâ"],["ŸÜ","ﬁÇ"],["Ÿá","ﬁÄ"],["Ÿà","ﬁà"],["Ÿä","ﬁî"],["ÿ©","ﬁå"],["ÿ°","ﬁá"],["ÿ£","ﬁá"],["ÿ§","ﬁá"],["ÿ•","ﬁá"],["ÿ¶","ﬁá"],["Ÿâ","ﬁá"],["Ÿé","ﬁ¶"],["Ÿê","ﬁ®"],["Ÿè","ﬁ™"],["Ÿí","ﬁ∞"],["Ÿã","ﬁ¶ﬁÇﬁ∞"],["Ÿç","ﬁ®ﬁÇﬁ∞"],["Ÿå","ﬁ™ﬁÇﬁ∞"],["ﬁ¶ÿß","ﬁß"],["ÿßﬁç","ﬁç"],["ﬁçﬁáﬁ∞ﬁçﬁ¶ﬁÄ","Ô∑≤"],["ﬁçﬁçﬁÄ","Ô∑≤"],["ﬁçﬁáﬁ∞","ﬁáﬁ∞"],["ﬁß ﬁáﬁ∞ﬁçﬁ¶","ﬁ¶ ﬁáﬁ∞ﬁçﬁ¶"],["ÿß",""],["ﬁ™ﬁà","ﬁ´"],["ﬁá ﬁáﬁ∞"," ﬁáﬁ∞"],["ﬁ´ ﬁç","ﬁ™ ﬁç"],["ﬁáﬁ∞ﬁçﬁ¶ﬁç","ﬁáﬁ∞ﬁçﬁ¶"],["¬´",'"'],["¬ª",'"']];document.getElementById("transliterateArToDv").addEventListener("click",()=>{r(),k.value=function(e){e=e.replace(/(.)Ÿë/g,(e,t)=>`ﬁáﬁ∞${U.find(([e])=>e===t)?.[1]||t}`),e=(e=e.replace(/ÿ©([ŸéŸê Ÿè Ÿã Ÿç Ÿå])/g,"ﬁå$1")).replace(/ÿ©(?![ŸéŸê Ÿè Ÿã Ÿç Ÿå])/g,"ﬁÄ");for(const[t,a]of U)e=e.replace(new RegExp(t,"g"),a);return e}(k.value),t()});const j=new class{constructor(){this.ehbari="ﬁêﬁ™ﬁâﬁ¨ﬁáﬁ∞ ﬁáﬁ¨ﬁáﬁ∞ ﬁãﬁ¨ ﬁåﬁ®ﬁÇﬁ∞ ﬁÄﬁ¶ﬁåﬁ¶ﬁÉﬁ™ ﬁäﬁ¶ﬁêﬁ∞ ﬁÄﬁ¶ ﬁÄﬁ¶ﬁåﬁ∞ ﬁáﬁ¶ﬁÅﬁ∞ ﬁÇﬁ™ﬁàﬁ¶ ﬁãﬁ®ﬁÄﬁ¶ ﬁáﬁ¨ﬁéﬁßﬁÉﬁ¶ ﬁÑﬁßﬁÉﬁ¶ ﬁåﬁ≠ﬁÉﬁ¶ ﬁêﬁßﬁãﬁ¶ ﬁäﬁ¶ﬁÇﬁ¶ﬁÉﬁ¶ ﬁêﬁØﬁÖﬁ¶ ﬁêﬁ¶ﬁåﬁßﬁÉﬁ¶ ﬁáﬁ¶ﬁÅﬁßﬁÉﬁ¶ ﬁÇﬁ¶ﬁàﬁßﬁÉﬁ¶ ﬁàﬁ®ﬁÄﬁ® ﬁáﬁ¨ﬁÜﬁßﬁàﬁ©ﬁêﬁ∞ ﬁÑﬁßﬁàﬁ©ﬁêﬁ∞ ﬁåﬁ≠ﬁàﬁ©ﬁêﬁ∞ ﬁêﬁ¶ﬁáﬁ™ﬁàﬁ©ﬁêﬁ∞ ﬁäﬁ¶ﬁÇﬁ∞ﬁêﬁ¶ﬁàﬁ©ﬁêﬁ∞ ﬁêﬁ¶ﬁáﬁ∞ﬁÑﬁ©ﬁêﬁ∞ ﬁÄﬁ¶ﬁåﬁßﬁàﬁ©ﬁêﬁ∞ ﬁáﬁ¶ﬁÅﬁßﬁàﬁ©ﬁêﬁ∞ ﬁÇﬁ¶ﬁàﬁßﬁàﬁ©ﬁêﬁ∞".split(" "),this.dhihabari="ﬁêﬁ™ﬁÇﬁ∞ ﬁãﬁ®ﬁÄﬁ¶ ﬁàﬁ®ﬁÄﬁ® ﬁåﬁ®ﬁÉﬁ©ﬁêﬁ∞ ﬁêﬁßﬁÖﬁ©ﬁêﬁ∞ ﬁäﬁ¶ﬁÇﬁ∞ﬁêﬁßﬁêﬁ∞ ﬁäﬁ¶ﬁêﬁ∞ﬁãﬁÆﬁÖﬁ¶ﬁêﬁ∞ ﬁÄﬁ¶ﬁáﬁ∞ﬁãﬁ®ﬁÄﬁ¶ ﬁáﬁ¶ﬁáﬁ∞ﬁëﬁ®ﬁÄﬁ¶ ﬁÇﬁ™ﬁàﬁ¶ﬁãﬁ®ﬁÄﬁ¶".split(" "),this.sunbari=["","ﬁÄﬁßﬁêﬁ∞","ﬁâﬁ®ﬁçﬁ®ﬁîﬁ¶ﬁÇﬁ∞","ﬁÑﬁ®ﬁçﬁ®ﬁîﬁ¶ﬁÇﬁ∞","ﬁìﬁ∞ﬁÉﬁ®ﬁçﬁ®ﬁîﬁ¶ﬁÇﬁ∞"]}convert(e){return e?(e=parseInt(e))<1e3?this.thousandSub(e):this.thousandUp(e):null}thousandSub(e){var t="ﬁêﬁ¶ﬁåﬁ≠ﬁÜﬁ¶ ";if(e<=0||e<=29)return this.ehbari[e];if(e<=99)return t=Math.floor(e/10),0===(e%=10)?this.dhihabari[t]:`${this.dhihabari[t]} ${this.ehbari[e]}`;if(e<=999){const a=e%100;return 2===(e=Math.floor(e/100))&&(this.ehbari[2]="ﬁãﬁ™ﬁàﬁ®",t="ﬁêﬁ¶ﬁáﬁ∞ﬁåﬁ¶ "),0===a?`${this.ehbari[e]} ${t}`:`${this.ehbari[e]} ${t}${this.thousandSub(a)}`}return""}thousandHalf(e){const t=[];for(;0!==e;)t.push(e%1e3),e=Math.floor(e/1e3);return t}thousandUp(e){var t=this.thousandHalf(e);e=t.length-1;const a=[];for(var n of t.reverse()){t=`${this.thousandSub(n)} `;let r=`${this.sunbari[e]} `;if(" "===t)break;"ﬁêﬁ™ﬁÇﬁ∞ "!==t&&"ﬁêﬁ™ﬁâﬁ¨ﬁáﬁ∞ "!==t||(r=t=""),a.push(t+r),--e}return(n=a.join("")).endsWith(",")&&(n=n.slice(0,-1)),n.trim()}};document.getElementById("Nos2DvTxt").addEventListener("click",()=>{r();const e=k.value.split("\n").map(e=>{const t=e.match(/\d+/g);return t?t.map(e=>j.convert(e).replace(/\s+/g," ").trim()).join("ÿå "):e.trim()});k.value=e.filter(e=>e.length>0).join("\n"),t()});const q=document.getElementById("typoIssuesResults");document.getElementById("removePunctuation").addEventListener("click",()=>{r(),k.value=k.value.replace(/[^\w\s]/g,""),t()}),document.getElementById("numerateWords").addEventListener("click",()=>{const e=document.getElementById("textArea");document.getElementById("numerateWords").textContent.includes("No ‚Üí Wrd")?(e.value=e.value.replace(/\b\d+\b/g,e=>function(e){const t=" one two three four five six seven eight nine".split(" "),a="  twenty thirty forty fifty sixty seventy eighty ninety".split(" ");var n="ten eleven twelve thirteen fourteen fifteen sixteen seventeen eighteen nineteen".split(" ");return e<10?t[e]:e<20?n[e-10]:e<100?(n=e%10,a[Math.floor(e/10)]+(n?`-${t[n]}`:"")):e}(parseInt(e))).replace(/%/g,"percent"),document.getElementById("numerateWords").textContent="Wrd ‚Üí No"):(e.value=e.value.replace(/\b(?:\w+(?:-\w+)*)\b/g,e=>{var t=e.toLowerCase();return e={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12,thirteen:13,fourteen:14,fifteen:15,sixteen:16,seventeen:17,eighteen:18,nineteen:19,twenty:20,thirty:30,forty:40,fifty:50,sixty:60,seventy:70,eighty:80,ninety:90,hundred:100},t.includes("-")?e=(e[(t=t.split("-"))[0]]||0)+(e[t[1]]||0):e=e[t]||t,e}).replace(/\bpercent\b/g,"%"),document.getElementById("numerateWords").textContent="No ‚Üí Wrd"),t()});const N=document.getElementById("findInput"),R=document.getElementById("replaceInput");document.getElementById("findAndReplaceText").addEventListener("click",()=>{var e=N.value;const a=R.value;e&&(e=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),k.value=k.value.replace(e,a),t())}),document.getElementById("diffCompare").addEventListener("click",()=>{window.open("diffCompare.html","_blank")}),document.getElementById("keyboardPage").addEventListener("click",()=>{window.open("keyboardPage.html","_blank")}),document.getElementById("qrGenerator").addEventListener("click",()=>{window.open("qrGenerator.html","_blank")}),document.getElementById("fullscreen").addEventListener("click",()=>{document.fullscreenElement?(document.exitFullscreen(),k.style.height="300px"):(document.documentElement.requestFullscreen(),k.style.height="100vh")}),document.addEventListener("fullscreenchange",()=>{document.fullscreenElement||(k.style.height="300px")}),u(),setInterval(u,6e4),document.getElementById("toggleMilitaryTime").addEventListener("click",()=>{const e="true"===localStorage.getItem("militaryTime");localStorage.setItem("militaryTime",!e),u()}),k.addEventListener("input",e=>{const t=e.target.selectionStart;var a=e.target.value.substring(0,t);"ss-"===a.split(/\s/).pop()&&(a=a.replace(/ss-$/,"Ô∑∫")+e.target.value.substring(t),e.target.value=a,e.target.setSelectionRange(t,t))}),document.querySelectorAll(".copy-button, .copy-button-lit, .copy-button-other").forEach(e=>{e.addEventListener("click",async()=>{const t=e.dataset.text||e.textContent.trim();try{await navigator.clipboard.writeText(t),d(e,"Copied")}catch(e){console.error("Failed to copy:",e)}})}),document.querySelectorAll("button").forEach(e=>{e.addEventListener("click",t=>{e.closest(".dropdown-button")||d(e,"Clicked")})});var P=JSON.parse(localStorage.getItem("editorTabs"));P&&(D=P,D.forEach(e=>{if(e.id>1){const t=document.createElement("button");t.classList.add("numbered-tab"),t.dataset.tab=e.id,t.textContent=e.id,T.insertBefore(t,L)}}),a(parseInt(localStorage.getItem("currentTab"))||1)),setInterval(()=>{D[A-1].content=k.value,localStorage.setItem("editorTabs",JSON.stringify(D)),localStorage.setItem("currentTab",A)},5e3),t();const H=document.getElementById("calcArea"),O=document.getElementById("addCalcTab"),z=document.querySelector(".calc-numbered-tabs");if(H&&O&&z){let ge=1,ve=[{id:1,content:""}];const he=document.getElementById("sumTotal"),ye=document.getElementById("zakatAmount"),be=document.getElementById("lineResults"),fe=document.getElementById("copyTotal"),Ee=document.getElementById("clearCalc");function W(){let e=0,t="";H.value.split("\n").forEach(a=>{a=function(e){let t=e.match(/[+-]?\d*\.?\d+(?:,\d{3})*(?:\d*\.?\d+)?/g)||[];e=e.match(/[\+\-\*x\/√∑]/g)||[],t=t.map(e=>parseFloat(e.replace(/,/g,"")));for(let a=0;a<e.length;a++)"*"!==e[a]&&"x"!==e[a]&&"/"!==e[a]&&"√∑"!==e[a]||(t.splice(a,2,"*"===e[a]||"x"===e[a]?t[a]*t[a+1]:t[a]/t[a+1]),e.splice(a,1),a--);return t.reduce((e,t)=>e+t,0)}(a),e+=a,t+=`${e.toFixed(2)}\n`}),he.textContent=e.toFixed(2),ye.textContent=(.025*e).toFixed(2),be.textContent=t}function _(e){ve[ge-1].content=H.value,ge=e,H.value=ve[ge-1].content,document.querySelectorAll(".calc-numbered-tab").forEach(t=>{t.classList.toggle("active",parseInt(t.dataset.tab)===e)}),W()}O.addEventListener("click",()=>{const e=ve.length+1;ve.push({id:e,content:""});const t=document.createElement("button");t.classList.add("calc-numbered-tab"),t.dataset.tab=e,t.textContent=e,z.insertBefore(t,O),_(e)}),z.addEventListener("click",e=>{e.target.classList.contains("calc-numbered-tab")&&_(e=parseInt(e.target.dataset.tab))}),H.addEventListener("input",W),fe.addEventListener("click",()=>{navigator.clipboard.writeText(he.textContent),d(fe,"Copied")}),Ee.addEventListener("click",()=>{H.value="",be.textContent="",he.textContent="0.00",ye.textContent="0.00",ve=[{id:1,content:""}],ge=1;const e=z.querySelectorAll(".calc-numbered-tab");e.forEach(e=>{"1"!==e.dataset.tab&&e.remove()}),e[0].classList.add("active"),d(Ee,"Cleared")}),(P=JSON.parse(localStorage.getItem("calculatorTabs")))&&(ve=P,ve.forEach(e=>{if(e.id>1){const t=document.createElement("button");t.classList.add("calc-numbered-tab"),t.dataset.tab=e.id,t.textContent=e.id,z.insertBefore(t,O)}}),_(parseInt(localStorage.getItem("currentCalcTab"))||1)),setInterval(()=>{ve[ge-1].content=H.value,localStorage.setItem("calculatorTabs",JSON.stringify(ve)),localStorage.setItem("currentCalcTab",ge)},5e3)}const Z=document.querySelector(".proportion-container"),J=document.getElementById("addPropTab"),G=document.querySelector(".prop-numbered-tabs");if(Z&&J&&G){let Ie=1,ke=[{id:1,content:Z.innerHTML}];function K(){document.querySelectorAll(".proportion-set").forEach(e=>{e.querySelectorAll(".prop-input").forEach(t=>{t.addEventListener("input",()=>function(e){if(e=e.querySelectorAll(".prop-input"),Array.from(e).filter(e=>""!==e.value).length>=3){const t=e[0].value,a=e[1].value,n=e[2].value;t&&a&&n&&(e[3].value=(a/t*n).toFixed(2))}else e[3].value=""}(e))})})}function Q(e){ke[Ie-1].content=Z.innerHTML,Ie=e,Z.innerHTML=ke[Ie-1].content,document.querySelectorAll(".prop-numbered-tab").forEach(t=>{t.classList.toggle("active",parseInt(t.dataset.tab)===e)}),K()}J.addEventListener("click",()=>{const e=ke.length+1;ke.push({id:e,content:Z.innerHTML});const t=document.createElement("button");t.classList.add("prop-numbered-tab"),t.dataset.tab=e,t.textContent=e,G.insertBefore(t,J),Q(e)}),G.addEventListener("click",e=>{e.target.classList.contains("prop-numbered-tab")&&Q(e=parseInt(e.target.dataset.tab))}),K(),(P=JSON.parse(localStorage.getItem("proportionTabs")))&&(ke=P,ke.forEach(e=>{if(e.id>1){const t=document.createElement("button");t.classList.add("prop-numbered-tab"),t.dataset.tab=e.id,t.textContent=e.id,G.insertBefore(t,J)}}),Q(parseInt(localStorage.getItem("currentPropTab"))||1)),setInterval(()=>{ke[Ie-1].content=Z.innerHTML,localStorage.setItem("proportionTabs",JSON.stringify(ke)),localStorage.setItem("currentPropTab",Ie)},5e3);const xe=document.getElementById("clearProp");xe.addEventListener("click",()=>{document.querySelectorAll(".proportion-set").forEach(e=>{e.querySelectorAll(".prop-input").forEach((e,t)=>{e.value=2===t?"1":""})}),ke=[{id:1,content:Z.innerHTML}],Ie=1;const e=G.querySelectorAll(".prop-numbered-tab");e.forEach(e=>{"1"!==e.dataset.tab&&e.remove()}),e[0].classList.add("active"),d(xe,"Cleared")})}let V="true"===localStorage.getItem("nightCalcMilitaryTime");document.getElementById("maghribTime").addEventListener("change",m),document.getElementById("fajrTime").addEventListener("change",m),document.getElementById("toggleNightCalcFormat").addEventListener("click",()=>{V=!V,localStorage.setItem("nightCalcMilitaryTime",V),m()});const Y=e=>btoa(new Uint8Array(e).reduce((e,t)=>e+String.fromCharCode(t),"")),X=e=>Uint8Array.from(atob(e),e=>e.charCodeAt(0)),ee=new TextEncoder,te=new TextDecoder,ae=e=>window.crypto.subtle.importKey("raw",ee.encode(e||"empty"),"PBKDF2",!1,["deriveKey"]),ne=(e,t,a)=>window.crypto.subtle.deriveKey({name:"PBKDF2",salt:t,iterations:25e4,hash:"SHA-256"},e,{name:"AES-GCM",length:256},!1,a),re=document.querySelectorAll(".crypt-tab"),le=document.querySelectorAll(".crypt-panel");re.forEach(e=>{e.addEventListener("click",()=>{re.forEach(e=>e.classList.remove("active")),le.forEach(e=>e.classList.remove("active")),e.classList.add("active"),document.getElementById(e.dataset.crypttab+"Crypt").classList.add("active")})});const oe=document.getElementById("encryptButton"),ce=document.getElementById("decryptButton"),se=document.getElementById("copyEncrypted"),ie=document.getElementById("copyDecrypted");oe&&oe.addEventListener("click",async()=>{const e=document.getElementById("textToEncrypt").value,t=document.getElementById("encryptPassword").value;if(e)try{const a=await v(e,t);document.getElementById("encryptedText").value=a,d(oe,"Encrypted")}catch(e){console.error("Encryption failed:",e),d(oe,"Encryption failed")}else d(oe,"Please enter text to encrypt")}),ce&&ce.addEventListener("click",async()=>{const e=document.getElementById("textToDecrypt").value,t=document.getElementById("decryptPassword").value;if(e)try{const a=await h(e,t);document.getElementById("decryptedText").value=a||"Decryption failed",d(ce,a?"Decrypted":"Failed")}catch(e){console.error("Decryption failed:",e),d(ce,"Decryption failed"),document.getElementById("decryptedText").value="Decryption failed"}else d(ce,"Please enter text to decrypt")}),se&&se.addEventListener("click",()=>{const e=document.getElementById("encryptedText").value;e&&(navigator.clipboard.writeText(e),d(se,"Copied"))}),ie&&ie.addEventListener("click",()=>{const e=document.getElementById("decryptedText").value;e&&(navigator.clipboard.writeText(e),d(ie,"Copied"))});const ue=document.getElementById("fileToEncrypt"),de=document.getElementById("fileToDecrypt"),me=document.getElementById("fileEncryptButton"),pe=document.getElementById("fileDecryptButton");me?.addEventListener("click",async()=>{const e=ue.files[0],t=document.getElementById("fileEncryptPassword").value;if(e)try{d(me,"Encrypting...");const a=await y(e),n=await v(new Uint8Array(a),t);b(new Blob([X(n)],{type:"application/octet-stream"}),e.name+".encrypted"),d(me,"Encrypted")}catch(e){console.error("File encryption failed:",e),d(me,"Encryption failed")}else d(me,"Please select a file")}),pe?.addEventListener("click",async()=>{const e=de.files[0],t=document.getElementById("fileDecryptPassword").value;if(e)try{d(pe,"Decrypting...");const a=await y(e),n=await h(Y(new Uint8Array(a)),t);b(new Blob([(new TextEncoder).encode(n)],{type:"application/octet-stream"}),e.name.replace(/\.encrypted$/,"")),d(pe,"Decrypted")}catch(e){console.error("File decryption failed:",e),d(pe,"Decryption failed")}else d(pe,"Please select a file")}),ue?.addEventListener("change",()=>{f(ue)}),de?.addEventListener("change",()=>{f(de)}),document.querySelectorAll(".file-label").forEach(e=>{e.addEventListener("dragover",t=>{t.preventDefault(),e.classList.add("dragover")}),e.addEventListener("dragleave",()=>{e.classList.remove("dragover")}),e.addEventListener("drop",t=>{t.preventDefault(),e.classList.remove("dragover");const a=document.getElementById(e.getAttribute("for"));(t=t.dataTransfer.files).length>0&&(a.files=t,f(a))})})});