document.addEventListener("DOMContentLoaded",(()=>{function e(){const e=this.value;I.value=e,k.value=e,E.style.fontSize=`${e}px`}function t(){var e=E.value;const t=e.trim()?e.trim().split(/\s+/).length:0,a=e?e.split("\n").length:0;$.textContent=`Char: ${e.length}`,S.textContent=`Wrd: ${t}`,w.textContent=`Ln: ${a}`,e=new Blob([e]).size,B.textContent=1024>e?`B: ${e}`:1048576>e?`KB: ${(e/1024).toFixed(2)}`:1073741824>e?`MB: ${(e/1048576).toFixed(2)}`:`GB: ${(e/1073741824).toFixed(2)}`}function a(e){T[C-1].content=E.value,C=e,E.value=T.find((t=>t.id===e)).content,document.querySelectorAll(".numbered-tab").forEach((t=>{t.classList.toggle("active",parseInt(t.dataset.tab)===e)})),t()}function n(){E.style.direction="ltr",E.style.textAlign="left"}function r(){window.scrollTo({top:0,behavior:"smooth"})}function l(){document.querySelectorAll(".dropdown-content").forEach((e=>{e.classList.remove("show")}))}function o(e){const t=/[\u07a6-\u07b0]/,a=/[\u064b-\u0650\u0652-\u0656]/,n=/[\u0780-\u07a5]/,r=/[\u064e\u064f\u0650]/,l=window.noFiliExceptions||[],o={"(":")","[":"]","{":"}",'"':'"',"'":"'","“":"”","=":"="},c=e.split(/\s+/),s=[];e=[];for(let m=0;m<c.length;m++){const p=c[m];let v=[];var u=l.some((e=>p.includes(e)));for(let l=0;l<p.length;l++){const c=p[l],s=p[l+1]||"",g=p[l-1]||"";if(c in o)e.push({char:c,wordIndex:m,charIndex:l});else if(Object.values(o).includes(c))if(0===e.length)v.push({type:"unbalanced",index:l,detail:`Unexpected closing ${c}`});else{var i=e[e.length-1];o[i.char]===c?e.pop():v.push({type:"unbalanced",index:l,detail:`Mismatched ${c}, expected ${o[i.char]}`})}if(t.test(c)&&t.test(s)||a.test(c)&&a.test(s)||"ّ"===c&&"ّ"===s)0<v.length&&"standalone"===v[v.length-1].type&&v[v.length-1].index===l-1&&v.pop(),v.push({type:"multiple",index:l}),l++;else{if(n.test(c)){i=n.test(s);var d=p[l+2]||"";i=i&&"."===d,d="."===s,t.test(s)||d||i||("ނ"!==c&&"ރ"!==c||u?"ނ"!==c&&"ރ"!==c&&v.push({type:"noDvFili",index:l}):v.push({type:"noDvFili",index:l})),i&&l++}!t.test(c)&&!a.test(c)&&"ّ"!==c||n.test(g)||/[\u0600-\u06FF]/.test(g)||"ّ"===c&&r.test(s)||v.push({type:"standalone",index:l})}}for(;0<e.length&&e[0].wordIndex===m;)u=e.shift(),v.push({type:"unbalanced",index:u.charIndex,detail:`Unclosed ${u.char}`});0<v.length&&s.push({word:p,index:m,issues:v})}return 0<e.length&&e.forEach((e=>{s.push({word:c[e.wordIndex],index:e.wordIndex,issues:[{type:"unbalanced",index:e.charIndex,detail:`Unclosed ${e.char}`}]})})),s}function c(e){if(0===e.length)j.innerHTML="No Issues Found";else{var t=e.reduce(((e,t)=>e+t.issues.length),0),a=E.value.split(/\s+/),n=`Found ${t} Issue${1<t?"s":""}<br>`;e.forEach(((e,t)=>{const r=a[e.index-1]||"",l=a[e.index+1]||"";let o=e.issues.map((t=>{switch(t.type){case"multiple":var a=`${e.word[t.index-1]||""}${e.word[t.index]} ${e.word[t.index+1]}`;a=`Multiple Fili :&nbsp; ${a}`;break;case"noDvFili":a=`Thaana w/o Fili :&nbsp; ${a=`${e.word[t.index-1]||""} ${e.word[t.index]}`}`;break;case"standalone":a=`Standalone Fili :&nbsp; ${a=`${e.word[t.index-1]||""} ${e.word[t.index]}`}`;break;case"unbalanced":a=e.word[t.index];a=`${e.word.slice(Math.max(0,t.index-2),t.index)}${a}${e.word.slice(t.index+1,t.index+3)}`,a=`${t.detail} :&nbsp; ...${a}...`}return a})).join(", ");n+=`${t+1}. ${r} <span style="color: blue;">${e.word}</span> ${l} : <span style="color: red;">${o}</span><br>`})),j.innerHTML=n}j.style.display="block"}function s(){const e=new Date,t="true"===localStorage.getItem("militaryTime"),a=e.getHours()%12||12,n=String(e.getHours()).padStart(2,"0");var r=t?n:a;const l=12<=e.getHours()?"PM":"AM";String(e.getMinutes()).padStart(2,"0");var o=e.toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"});o=o.replace(/^(\w+)\s+(\d+)/,((e,t,a)=>`${t}, ${a}${["th","st","nd","rd"][3<a%10?0:a%10]}`)),document.getElementById("gregorianLongEn").textContent=`${o}, at ${t?n:a}:${String(e.getMinutes()).padStart(2,"0")}${t?"":" "+l}`,o="އާދީއްތަ ހޯމަ އަންގާރަ ބުދަ ބުރާސްފަތި ހުކުރު ހޮނިހިރު".split(" ");const c=t?"":12<=e.getHours()?"މެނދުރުފަސް":"މެނދުރުކުރި";r=`${o[e.getDay()]}، ${e.getDate()} ${"ޖަނަވަރީ ފެބުރުވަރީ މާރިޗު އެޕްރީލް މޭ ޖޫން ޖުލައި އޮގަސްޓު ސެޕްޓެންބަރު އޮކްޓޫބަރު ނޮވެންބަރު ޑިސެންބަރު".split(" ")[e.getMonth()]} ${e.getFullYear()}، ${r}:${String(e.getMinutes()).padStart(2,"0")}${t?"":" "+c}`,document.getElementById("gregorianLongDv").textContent=r,r=(r=e.toLocaleDateString("ar",{weekday:"long",day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0,hour12:!t})).replace(/(\d{4})\s*،?\s*في/,"$1، في").replace(/\s+،/g,"،").replace(/\d{1,2}:\d{2}\s*[صم]/,`${t?n:a}:${String(e.getMinutes()).padStart(2,"0")}${t?"":12<=e.getHours()?" م":" ص"}`),document.getElementById("gregorianLongAr").textContent=r;try{const r={"محرم":["Muharram","މުޙައްރަމް"],"صفر":["Safar","ޞަފަރު"],"ربيع الأول":["Rabi' al-Awwal","ރަބީޢުލްއައްވަލް"],"ربيع الآخر":["Rabi' ath-Thani","ރަބީޢުލްއާޚިރު"],"جمادى الأولى":["Jumada al-Awwal","ޖުމާދަލްއޫލާ"],"جمادى الآخرة":["Jumada ath-Thani","ޖުމާދަލްއާޚިރާ"],"رجب":["Rajab","ރަޖަބު"],"شعبان":["Sha'ban","ޝަޢުބާން"],"رمضان":["Ramadan","ރަމަޟާން"],"شوال":["Shawwal","ޝައްވާލް"],"ذو القعدة":["Dhul-Qa'dah","ޛުލްގަޢިދާ"],"ذو الحجة":["Dhul-Hijjah","ޛުލްޙިއްޖާ"]},s=new Intl.DateTimeFormat("ar-TN-u-ca-islamic",{weekday:"long",day:"numeric",month:"long",year:"numeric",calendar:"islamic"}).format(e),u=`، في ${t?n:a}:${String(e.getMinutes()).padStart(2,"0")}${t?"":12<=e.getHours()?" م":" ص"}`;document.getElementById("hijriLongAr").textContent=s.replace(/هـ/,"").replace(/\s+،/g,"،").replace(/\s+$/,"")+u;const i=new Intl.DateTimeFormat("ar-u-ca-islamic-umalqura",{weekday:"long",day:"numeric",month:"long",year:"numeric",calendar:"islamic"}).formatToParts(e),d={"الأحد":"Sunday","الاثنين":"Monday","الثلاثاء":"Tuesday","الأربعاء":"Wednesday","الخميس":"Thursday","الجمعة":"Friday","السبت":"Saturday"};let m,p,v,g,y,h,b;i.forEach((e=>{if("weekday"===e.type&&(m=d[e.value]||e.value),"day"===e.type&&(p=e.value),"month"===e.type){var t=e.value;v=r[t]?.[0]||t}"year"===e.type&&(g=e.value)})),document.getElementById("hijriLongEn").textContent=`${m}, ${parseInt(p)} ${v} ${g} AH, at ${t?n:a}:${String(e.getMinutes()).padStart(2,"0")}${t?"":" "+l}`,i.forEach((e=>{if("day"===e.type&&(y=e.value),"month"===e.type){var t=e.value;h=r[t]?.[1]||t}"year"===e.type&&(b=e.value)})),document.getElementById("hijriLongDv").textContent=`${o[e.getDay()]}، ${parseInt(y)} ${h} ${b}، ${t?n:a}:${String(e.getMinutes()).padStart(2,"0")}${t?"":" "+c}`;const f=new Intl.DateTimeFormat("en-u-ca-islamic",{day:"numeric",month:"numeric",year:"numeric",calendar:"islamic"}).format(e).replace(/[^0-9/]/g,"");document.getElementById("hijriShort").textContent=`${f} ${t?n:a}:${String(e.getMinutes()).padStart(2,"0")}${t?"":" "+l}`}catch(e){console.error("Error formatting Hijri dates:",e),["hijriLongAr","hijriLongEn","hijriLongDv","hijriShort"].forEach((e=>{document.getElementById(e).textContent="Hijri date unavailable"}))}document.getElementById("gregorianShort").textContent=`${String(e.getDate()).padStart(2,"0")}/${String(e.getMonth()+1).padStart(2,"0")}/${e.getFullYear()} ${t?n:a}:${String(e.getMinutes()).padStart(2,"0")}${t?"":" "+l}`}function u(e,t){const a=document.createElement("span");a.textContent=t,a.className="copy-feedback",e.appendChild(a),e.classList.add("copy-success"),setTimeout((()=>{a.remove(),e.classList.remove("copy-success")}),1e3)}function i(){var e=document.getElementById("maghribTime"),t=document.getElementById("fajrTime");if(e.value&&t.value){e=d(e.value),(t=d(t.value))<e&&(t+=1440);var a=t-e;t=e+a/2;var n=e+a/3;e+=2*a/3,document.getElementById("midnightTime").textContent=m(t),document.getElementById("secondThirdTime").textContent=m(n),document.getElementById("lastThirdTime").textContent=m(e)}}function d(e){const[t,a]=e.split(":").map(Number);return 60*t+a}function m(e){e=Math.round(e),e%=1440;const t=Math.floor(e/60);if(e%=60,K)return`${String(t).padStart(2,"0")}:${String(e).padStart(2,"0")}`;const a=12<=t?"PM":"AM";return`${t%12||12}:${String(e).padStart(2,"0")} ${a}`}async function p(e,t){if(!e)throw Error("No data to encrypt");try{const a=window.crypto.getRandomValues(new Uint8Array(16)),n=window.crypto.getRandomValues(new Uint8Array(12)),r=await ee(t),l=await te(r,a,["encrypt"]),o=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:n},l,Y.encode(e)),c=new Uint8Array(o);let s=new Uint8Array(a.byteLength+n.byteLength+c.byteLength);return s.set(a,0),s.set(n,a.byteLength),s.set(c,a.byteLength+n.byteLength),Q(s)}catch(e){throw console.error(`Encryption error: ${e}`),e}}async function v(e,t){if(!e)throw Error("No data to decrypt");try{const a=V(e),n=a.slice(0,16),r=a.slice(16,28),l=a.slice(28),o=await ee(t),c=await te(o,n,["decrypt"]),s=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:r},c,l);return X.decode(s)}catch(e){throw console.error(`Decryption error: ${e}`),e}}function g(e){return new Promise(((t,a)=>{const n=new FileReader;n.onload=()=>t(n.result),n.onerror=()=>a(n.error),n.readAsArrayBuffer(e)}))}function y(e,t){e=URL.createObjectURL(e);const a=document.createElement("a");a.href=e,a.download=t,a.type="application/octet-stream",a.setAttribute("download",t),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(e)}function h(e,t="Choose File"){e.nextElementSibling.textContent=e.files[0]?.name||t}const b=document.querySelectorAll(".top-tab"),f=document.querySelectorAll(".tab-content"),E=document.getElementById("textArea"),I=document.getElementById("fontSizeSlider"),k=document.getElementById("fontSize"),$=document.getElementById("charCount"),S=document.getElementById("wordCount"),w=document.getElementById("lineCount"),B=document.getElementById("fileSize"),x=document.getElementById("addTab"),L=document.querySelector(".numbered-tabs");let C=1,T=[{id:1,content:""}];b.forEach((e=>{e.addEventListener("click",(()=>{b.forEach((e=>e.classList.remove("active"))),e.classList.add("active"),f.forEach((t=>{t.classList.remove("active"),t.id===`${e.dataset.tab}Tab`&&t.classList.add("active")}))}))})),I.addEventListener("input",e),k.addEventListener("change",e),k.addEventListener("click",(function(){})),E.addEventListener("input",function(e){let t;return function(...a){clearTimeout(t),t=setTimeout((()=>{clearTimeout(t),e(...a)}),300)}}(t)),x.addEventListener("click",(()=>{const e=T.length+1;T.push({id:e,content:""});const t=document.createElement("button");t.classList.add("numbered-tab"),t.dataset.tab=e,t.textContent=e,L.insertBefore(t,x),a(e)})),L.addEventListener("click",(e=>{e.target.classList.contains("numbered-tab")&&a(parseInt(e.target.dataset.tab))})),document.querySelectorAll(".dropdown-button").forEach((e=>{const a=e.querySelector(".function-button"),o=e.querySelector(".dropdown-content");a.addEventListener("click",(e=>{e.stopPropagation(),l(),o.classList.toggle("show")})),o.addEventListener("click",(e=>{e.stopPropagation(),"BUTTON"===e.target.tagName&&e.target.dataset.action&&(function(e){switch(e){case"arabicToRegular":E.value=E.value.replace(/[٠١٢٣٤٥٦٧٨٩]/g,(e=>"٠١٢٣٤٥٦٧٨٩".indexOf(e)));break;case"regularToArabic":E.value=E.value.replace(/[0-9]/g,(e=>"٠١٢٣٤٥٦٧٨٩"[e]));case"removeFootnoteNumbers":E.value=E.value.replace(/⁽[¹²³⁴⁵⁶⁷⁸⁹⁰]+⁾/g,"");break;case"convertNumerals":var a={regular:"0123456789",arabic:"٠١٢٣٤٥٦٧٨٩",superscript:"⁰¹²³⁴⁵⁶⁷⁸⁹",mathSansSerif:"𝟢𝟣𝟤𝟥𝟦𝟧𝟨𝟩𝟪𝟫",mathSansSerifBold:"𝟬𝟭𝟮𝟯𝟰𝟱𝟲𝟳𝟴𝟵",fullWidth:"０１２３４５６７８９",circled:"⓪①②③④⑤⑥⑦⑧⑨",negativeCircled:"⓿❶❷❸❹❺❻❼❽❾"};const g=a[document.getElementById("numeralFrom").value],y=a[document.getElementById("numeralTo").value];E.value=E.value.replace(/[0-9]/g,(e=>{const t=g.indexOf(e);return-1!==t?y[t]:e}));break;case"removePrecedingZeros":E.value=E.value.replace(/\b0+(\d)/g,"$1");break;case"removeAllNumbers":E.value=E.value.replace(/[٠-٩0-9]/g,"");break;case"keepOnlyNumbers":E.value=E.value.replace(/[^٠-٩0-9]/g,"");break;case"rtlStraightToCurly":case"ltrStraightToCurly":a="rtlStraightToCurly"===e,E.value=E.value.replace(/(\W|^)"(\S)/g,`$1${a?"”":"“"}$2`).replace(new RegExp(`(${a?"”":"“"}[^"]*)"([^"]*$|[^${a?"”":"“"}"]*${a?"”":"“"})`,"g"),`$1${a?"“":"”"}$2`).replace(/([^0-9])"/g,"$1"+(a?"“":"”")).replace(/(\W|^)'(\S)/g,`$1${a?"’":"‘"}$2`).replace(/([a-z])'([a-z])/gi,"$1‘$2").replace(/((\u2019[^']*)|[a-z])'([^0-9]|$)/gi,`$1${a?"‘":"’"}$3`).replace(/(\u2019)([0-9]{2}[^\u2018]*)(\u2019([^0-9]|$)|$|\u2018[a-z])/gi,"‘$2$3").replace(/(\B|^)\u2019(?=([^\u2018]*\u2018\b)*([^\u2018\u2019]*\W[\u2018\u2019]\b|[^\u2018\u2019]*$))/gi,"$1‘").replace(/'''/g,"‴").replace(/''/g,"″").replace(/'/g,"′");break;case"curlyToStraight":E.value=E.value.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,'"');break;case"reverseCurlyQuotes":E.value=E.value.replace(/“|”/g,(e=>"“"===e?"”":"“")).replace(/‘|’/g,(e=>"‘"===e?"’":"‘")).replace(/❝|❞/g,(e=>"❝"===e?"❞":"❝")).replace(/\ud83d\ude76|\ud83d\ude77/g,(e=>"🙷"));break;case"convertQuotes":var o={straightSingle:["'","'"],straightDouble:['"','"'],ltrCurlyDouble:["“","”"],rtlCurlyDouble:["”","“"],ltrCurlySingle:["‘","’"],rtlCurlySingle:["’","‘"],angleQuotes:["«","»"],doubleBrackets:["((","))"],heavyCommaQuotes:["❝","❞"],sansSerifHeavyCommaQuotes:["🙶","🙷"]};a=o[document.getElementById("quoteFrom").value],o=o[document.getElementById("quoteTo").value];var c=a[0].replace(/[.*+?^${}()|[\]\\]/g,"\\$&");a=a[1].replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),E.value=E.value.replace(new RegExp(`${c}([^${a}]*)${a}`,"g"),`${o[0]}$1${o[1]}`);break;case"removeJsComments":E.value=E.value.replace(/\/\*[\s\S]*?\*\/|\/\/.*/g,""),n();break;case"removeHtmlComments":E.value=E.value.replace(/\x3c!--[\s\S]*?--\x3e/g,""),n();break;case"removeCssComments":E.value=E.value.replace(/\/\*[\s\S]*?\*\//g,""),n();break;case"removePowershellComments":E.value=E.value.replace(/#.*$/gm,"").replace(/<#[\s\S]*?#>/g,""),n();break;case"removePythonComments":E.value=E.value.replace(/#.*$/gm,"").replace(/'''[\s\S]*?'''|"""[\s\S]*?"""/g,""),n();break;case"removePhpComments":E.value=E.value.replace(/\/\*[\s\S]*?\*\/|\/\/.*|#.*$/gm,""),n();break;case"removeCComments":E.value=E.value.replace(/\/\*[\s\S]*?\*\/|\/\/.*/g,""),n();break;case"removeCSharpComments":E.value=E.value.replace(/\/\*[\s\S]*?\*\/|\/\/\/.*|\/\/.*/g,""),n();break;case"removeJavaComments":E.value=E.value.replace(/\/\*[\s\S]*?\*\/|\/\*\*[\s\S]*?\*\/|\/\/.*/g,""),n();break;case"removeRubyComments":E.value=E.value.replace(/#.*$/gm,"").replace(/^=begin[\s\S]*?^=end/gm,""),n();break;case"removeBashComments":E.value=E.value.replace(/#.*$/gm,""),n();break;case"removeGoComments":E.value=E.value.replace(/\/\*[\s\S]*?\*\/|\/\/.*/g,""),n();break;case"removeRustComments":E.value=E.value.replace(/\/\*[\s\S]*?\*\/|\/\/!.*|\/\/.*/g,""),n();break;case"removeSwiftComments":E.value=E.value.replace(/\/\*[\s\S]*?\*\/|\/\/\/.*|\/\/.*/g,""),n();break;case"removeKotlinComments":E.value=E.value.replace(/\/\*[\s\S]*?\*\/|\/\*\*[\s\S]*?\*\/|\/\/.*/g,""),n();break;case"removeDartComments":E.value=E.value.replace(/\/\*[\s\S]*?\*\/|\/\/\/.*|\/\/.*/g,""),n();break;case"removeSqlComments":E.value=E.value.replace(/\/\*[\s\S]*?\*\/|--.*$/gm,""),n();break;case"textToParagraphs":E.value=E.value.split("\n").filter((e=>e.trim())).map((e=>`<p>${e}</p>`)).join("\n"),n();break;case"textToBrTags":E.value=E.value.split("\n").join("<br>\n"),n();break;case"textToOrderedList":E.value="<ol>\n"+E.value.split("\n").filter((e=>e.trim())).map((e=>`  <li>${e}</li>`)).join("\n")+"\n</ol>",n();break;case"textToUnorderedList":E.value="<ul>\n"+E.value.split("\n").filter((e=>e.trim())).map((e=>`  <li>${e}</li>`)).join("\n")+"\n</ul>",n();break;case"removeHtmlTags":E.value=E.value.replace(/<[^>]*>/g,"");break;case"removeArabicDiacritics":E.value=E.value.replace(/[\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/g,"");break;case"removeDhivehiFili":E.value=E.value.replace(/[\u07A6-\u07B0]/g,"");break;case"removeThikijehiThaana":const h={"ޘ":"ސ","ޙ":"ހ","ޛ":"ޒ","ޜ":"ޒ","ޞ":"ސ","ޠ":"ތ","ޡ":"ޒ","ޢ":"އ","ޤ":"ގ","ޥ":"ވ"};E.value=E.value.replace(/[ޘޙޛޜޞޠޡޢޤޥ]/g,(e=>h[e]||e));break;case"saveFile":a=new Blob([E.value],{type:"text/plain;charset=utf-8"}),(o=document.createElement("a")).href=URL.createObjectURL(a),o.download="saved_text.txt",o.click();break;case"loadFile":(a=document.createElement("input")).type="file",a.accept="text/plain",a.onchange=e=>{e=e.target.files[0];const a=new FileReader;a.onload=e=>{E.value=e.target.result,t()},a.readAsText(e)},a.click();break;case"titleCase":E.value=E.value.replace(/\w\S*/g,(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()));break;case"sentenceCase":E.value=E.value.toLowerCase().replace(/(^\w|\.\s+\w)/g,(e=>e.toUpperCase()));break;case"lowercase":E.value=E.value.toLowerCase();break;case"UPPERCASE":E.value=E.value.toUpperCase();break;case"alternatingCase":E.value=E.value.split("").map(((e,t)=>0==t%2?e.toLowerCase():e.toUpperCase())).join("");break;case"inverseCase":E.value=E.value.split("").map((e=>e===e.toUpperCase()?e.toLowerCase():e.toUpperCase())).join("");break;case"randomCase":E.value=E.value.split("").map((e=>.5<Math.random()?e.toUpperCase():e.toLowerCase())).join("");break;case"camelCase":E.value=E.value.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,((e,t)=>t.toUpperCase()));break;case"pascalCase":E.value=E.value.toLowerCase().replace(/(^|[^a-zA-Z0-9]+)(.)/g,((e,t,a)=>a.toUpperCase()));break;case"snakeCase":E.value=E.value.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"_").replace(/^_+|_+$/g,"");break;case"constantCase":E.value=E.value.toUpperCase().replace(/[^A-Z0-9]+/g,"_").replace(/^_+|_+$/g,"");break;case"slugCase":E.value=E.value.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"-").replace(/^-+|-+$/g,"");break;case"dotCase":E.value=E.value.toLowerCase().replace(/[^a-zA-Z0-9]+/g,".").replace(/^\.+|\.+$/g,"");break;case"flatcase":E.value=E.value.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"");break;case"splitIntoWords":E.value=E.value.split(/\s+/).filter((e=>0<e.length)).join("\n");break;case"sortWordsByFrequency":r();const b={};(E.value.toLowerCase().match(/\b[\w']+\b/g)||[]).forEach((e=>{b[e]=(b[e]||0)+1})),a=Object.entries(b).sort(((e,t)=>t[1]-e[1])).map((([e,t])=>`${t}: ${e}`)),E.value=a.join("\n");break;case"sortLinesByFrequency":r();const f={};E.value.split("\n").filter((e=>""!==e.trim())).forEach((e=>{f[e]=(f[e]||0)+1})),a=Object.entries(f).sort(((e,t)=>t[1]-e[1])).map((([e,t])=>`${t}: ${e}`)),E.value=a.join("\n");break;case"sortLinesAscending":E.value=E.value.split("\n").sort(((e,t)=>e.localeCompare(t))).join("\n");break;case"sortLinesDescending":E.value=E.value.split("\n").sort(((e,t)=>t.localeCompare(e))).join("\n");break;case"randomizeLines":E.value=E.value.split("\n").sort((()=>Math.random()-.5)).join("\n");break;case"removeDuplicateLines":E.value=[...new Set(E.value.split("\n"))].join("\n");break;case"reverseTextHorizontal":E.value=E.value.split("").reverse().join("");break;case"reverseTextVertical":E.value=E.value.split("\n").reverse().join("\n");break;case"addLineNumbers":const I=document.getElementById("addNumbersWith").value;a=E.value.split("\n").map(((e,t)=>`${t+1}${I} ${e}`)),E.value=a.join("\n");break;case"removeLineNumbers":o=document.getElementById("removeNumbersWith").value,a=E.value.split("\n"),o=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");const k=new RegExp(`^\\d+${o}\\s+`);a=a.map((e=>e.replace(k,""))),E.value=a.join("\n");break;case"decodeUnicode":E.value=E.value.replace(/\\u([0-9a-fA-F]{4})/g,(function(e,t){return String.fromCharCode(parseInt(t,16))})),n();break;case"encodeUnicode":E.value=E.value.replace(/[\s\S]/g,(function(e){for(e=e.charCodeAt(0).toString(16);4>e.length;)e="0"+e;return"\\u"+e})),n();break;case"decodeURL":try{E.value=decodeURI(E.value)}catch(Z){alert("Invalid URL encoding")}n();break;case"encodeURL":E.value=encodeURI(E.value),n();break;case"whichUnicodeCharacter":for(a=E.value,o="",c=0;c<a.length;c++){var s=a.codePointAt(c),u=`https://codepoints.net/U+${s.toString(16).toUpperCase().padStart(4,"0")}`;o+=`U+${s.toString(16).toUpperCase().padStart(4,"0")} : ${a[c]} : ${u}\n`,65535<s&&c++}E.value=o,n();break;case"textToLeet":const $={a:"4",e:"3",i:"!",o:"0",t:"7",l:"1",s:"5"};E.value=E.value.toLowerCase().replace(/[aeiotls]/g,(e=>$[e])),n();break;case"leetToText":const S={4:"a",3:"e","!":"i",0:"o",7:"t",1:"l",5:"s"};E.value=E.value.replace(/[43!0715]/g,(e=>S[e])),n();break;case"textToBinary":E.value=E.value.split("").map((e=>e.charCodeAt(0).toString(2).padStart(8,"0"))).join(" ");break;case"binaryToText":try{E.value=E.value.trim().split(" ").map((e=>(e=parseInt(e,2),String.fromCharCode(e)))).join("")}catch(_){alert("Error converting machine code to text. Make sure you have valid binary numbers separated by spaces.")}break;case"convertBrackets":const w=(a={round:["(",")"],square:["[","]"],superscript:["⁽","⁾"],corner:["⌜","⌝"]})[document.getElementById("bracketFrom").value],B=a[document.getElementById("bracketTo").value],x=document.getElementById("bracketDirection").value,L=document.getElementById("bracketTo").value;document.getElementById("bracketFrom"),E.value=E.value.replace(new RegExp(`\\${w[0]}|\\${w[1]}`,"g"),(e=>"rtl"===x&&"corner"===L?e===w[0]?B[1]:B[0]:e===w[0]?B[0]:B[1]));break;case"reverseBracketDirection":const C={"(":")",")":"(","[":"]","]":"[","⁽":"⁾","⁾":"⁽","⌜":"⌝","⌝":"⌜"};E.value=E.value.replace(/[()[\]⁽⁾⌜⌝]/g,(e=>C[e]));break;case"convertNumberBrackets":const T={0:"⁰",1:"¹",2:"²",3:"³",4:"⁴",5:"⁵",6:"⁶",7:"⁷",8:"⁸",9:"⁹"},A=(a={none:["",""],round:["(",")"],square:["[","]"],superscript:["⁽","⁾"]})[document.getElementById("numberBracketFrom").value],M=a[document.getElementById("numberBracketTo").value],D=document.getElementById("numberBracketTo").value;a=E.value,A[0]&&(a=a.replace(new RegExp(`\\${A[0]}\\d+\\${A[1]}`,"g"),(e=>e.slice(A[0].length,-A[1].length)))),M[0]&&(a=a.replace(/\d+/g,(e=>(e="superscript"===D?e.split("").map((e=>T[e])).join(""):e,`${M[0]}${e}${M[1]}`)))),E.value=a;break;case"removeNumberBrackets":a={round:["(",")"],square:["[","]"],superscript:["⁽","⁾"],none:["",""]}[document.getElementById("numberBracketRemove").value],E.value=E.value.replace(new RegExp(`\\${a[0]}\\d+\\${a[1]}`,"g"),""),t();break;case"keepOnlyDhivehi":E.value=E.value.replace(/[^\u0780-\u07BF\s]/g,"");break;case"removeAllDhivehi":E.value=E.value.replace(/[\u0780-\u07BF]/g,"");break;case"keepOnlyArabic":E.value=E.value.replace(/[^\u0600-\u06ff\u0750-\u077f\ufb50-\ufbc1\ufbd3-\ufd3f\ufd50-\ufd8f\ufd92-\ufdc7\ufe70-\ufefc\uFDF0-\uFDFD\s]/g,"");break;case"removeAllArabic":E.value=E.value.replace(/[\u0600-\u06ff\u0750-\u077f\ufb50-\ufbc1\ufbd3-\ufd3f\ufd50-\ufd8f\ufd92-\ufdc7\ufe70-\ufefc\uFDF0-\uFDFD]/g,"");break;case"keepOnlyEnglish":E.value=E.value.replace(/[^A-Za-z\s]/g,"");break;case"removeAllEnglish":E.value=E.value.replace(/[A-Za-z]/g,"");break;case"removeSpacesTabsAndSingleLines":E.value=E.value.replace(/^ +| +$/gm,"").replace(/ +/g," ").replace(/\t+/g," ").trim().replace(/\n{2,}/g,"\n");break;case"removeSpacesAndDoubleLines":E.value=E.value.replace(/^ +| +$/gm,"").replace(/ +/g," ").trim().replace(/\n{3,}/g,"\n\n");break;case"wordWrap":E.value=E.value.replace(/\s+/g," ").trim();break;case"removeExtraSpacesOnly":E.value=E.value.replace(/^ +| +$/gm,"").replace(/ +/g," ").trim();break;case"convertTabsToSpaces":E.value=E.value.replace(/\t+/g," ").trim();break;case"removeSingleLinesOnly":E.value=E.value.trim().replace(/\n{2,}/g,"\n");break;case"removeDoubleLinesOnly":E.value=E.value.trim().replace(/\n{3,}/g,"\n\n");break;case"dotsToEllipsis":E.value=E.value.replace(/\.{3}/g,"…");break;case"ellipsisToDots":E.value=E.value.replace(/…/g,"...");break;case"convertDashes":a=(o={hyphen:"-",en:"–",em:"—"})[document.getElementById("dashFrom").value],o=o[document.getElementById("dashTo").value],E.value=E.value.replace(new RegExp(a,"g"),o);break;function i(e){var t="";e.useUppercase&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),e.useLowercase&&(t+="abcdefghijklmnopqrstuvwxyz"),e.useNumbers&&(t+="0123456789"),e.useSymbols&&(t+="!@#$%^&*()_+-=[]{}|;:,.<>?"),t||="abcdefghijklmnopqrstuvwxyz";let a="";for(let n=0;n<e.length;n++)a+=t.charAt(Math.floor(Math.random()*t.length));return e.useUppercase&&!/[A-Z]/.test(a)&&(t=Math.floor(Math.random()*e.length),a=a.substring(0,t)+"ABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(26*Math.random()))+a.substring(t+1)),e.useLowercase&&!/[a-z]/.test(a)&&(t=Math.floor(Math.random()*e.length),a=a.substring(0,t)+"abcdefghijklmnopqrstuvwxyz".charAt(Math.floor(26*Math.random()))+a.substring(t+1)),e.useNumbers&&!/[0-9]/.test(a)&&(t=Math.floor(Math.random()*e.length),a=a.substring(0,t)+"0123456789".charAt(Math.floor(10*Math.random()))+a.substring(t+1)),e.useSymbols&&!/[!@#$%^&*()_+\-=\[\]{}|;:,.<>?]/.test(a)&&(e=Math.floor(Math.random()*e.length),a=a.substring(0,e)+"!@#$%^&*()_+-=[]{}|;:,.<>?".charAt(Math.floor(26*Math.random()))+a.substring(e+1)),a}case"setupPasswordGenerator":const F=document.getElementById("passwordCount");F&&F.addEventListener("input",(()=>{let e=parseInt(F.value);1>e&&(F.value=1),100<e&&(F.value=100)}));const j=document.getElementById("passwordLength");j&&j.addEventListener("input",(()=>{let e=parseInt(j.value);4>e&&(j.value=4),128<e&&(j.value=128)}));const q=document.querySelectorAll('.checkbox-group input[type="checkbox"]');q.forEach((e=>{e.addEventListener("change",(()=>{Array.from(q).some((e=>e.checked))||(e.checked=!0)}))}));break;case"generatePasswords":for(a=parseInt(document.getElementById("passwordCount").value)||1,o={length:parseInt(document.getElementById("passwordLength").value)||8,useUppercase:document.getElementById("useUppercase").checked,useLowercase:document.getElementById("useLowercase").checked,useNumbers:document.getElementById("useNumbers").checked,useSymbols:document.getElementById("useSymbols").checked},c=[],s=0;s<a;s++)c.push(i(o));E.value=c.join("\n"),t(),l();break;case"generateSequence":let U=parseInt(document.getElementById("seqMinInput").value)||1;c=parseInt(document.getElementById("seqMaxInput").value)||10,U>c&&([U,c]=[c,U],document.getElementById("seqMinInput").value=U,document.getElementById("seqMaxInput").value=c);var d=document.getElementById("seqPadStart")?.checked||!1,m=parseInt(document.getElementById("seqPadLength")?.value)||1;a="\\n"===document.getElementById("seqSeparator").value?"\n":document.getElementById("seqSeparator").value||"\n",o=document.getElementById("seqReverse")?.checked||!1;var p=document.getElementById("seqPrefix")?.value||"",v=document.getElementById("seqSuffix")?.value||"";c=Array.from({length:c-U+1},((e,t)=>(e=U+t,d&&(e=String(e).padStart(m,"0")),`${p}${e}${v}`))),o&&c.reverse(),E.value=c.join(a),t(),l();break;case"generateRandomNumber":let R=parseInt(document.getElementById("randNoMinInput").value)||1;if(o=parseInt(document.getElementById("randNoMaxInput").value)||10,u=parseInt(document.getElementById("randNoCount").value)||1,c=document.getElementById("randNoUnique").checked,R>o&&([R,o]=[o,R],document.getElementById("randNoMinInput").value=R,document.getElementById("randNoMaxInput").value=o),s=o-R+1,a=u,c&&u>s&&(a=s),u=[],c){for(c=(o=Array.from({length:s},((e,t)=>R+t))).length-1;0<c;c--)s=Math.floor(Math.random()*(c+1)),[o[c],o[s]]=[o[s],o[c]];u=o.slice(0,a)}else for(c=0;c<a;c++)u.push(Math.floor(Math.random()*(o-R+1))+R);E.value=u.join("\n"),t(),l();break;case"repeatText":a=parseInt(document.getElementById("repeatCount").value)||2,o="\\n"===document.getElementById("repeatSeparator").value?"\n":document.getElementById("repeatSeparator").value,E.value=Array(a).fill(E.value).join(o),t(),l();break;case"addPrefixSuffix":const P=document.getElementById("addPrefixInput").value,N=document.getElementById("addSuffixInput").value;a=E.value.split("\n").map((e=>P+e+N)),E.value=a.join("\n"),t(),l();break;case"removePrefixSuffix":const H=document.getElementById("removePrefixInput").value,z=document.getElementById("removeSuffixInput").value;a=E.value.split("\n").map((e=>(H&&e.startsWith(H)&&(e=e.slice(H.length)),z&&e.endsWith(z)&&(e=e.slice(0,-z.length)),e))),E.value=a.join("\n"),t(),l();break;case"removeCharsFromEnds":const O=parseInt(document.getElementById("removeStartChars").value)||0,W=parseInt(document.getElementById("removeEndChars").value)||0;a=E.value.split("\n").map((e=>e?(0<O&&(e=e.slice(O)),0<W&&0<e.length&&(e=e.slice(0,-W)),e):e)),E.value=a.join("\n"),t(),l();break;case"convertSalawat":a=(o={plain:"صلى الله عليه وسلم",symbol:"ﷺ",tashkeel:"صَلَّى اللهُ عَلَيْهِ وَسَلَّمَ"})[document.getElementById("salawatFrom").value],o=o[document.getElementById("salawatTo").value],a=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),E.value=E.value.replace(new RegExp(a,"g"),o);break;case"removeKashidas":E.value=E.value.replace(/ـ/g,"");break;case"shaddaB4Haraka":E.value=E.value.replace(RegExp("([ًٌٍَُِّْ])(ّ)","g"),((e,t,a)=>"ْ"===t?e:a+t));break;case"textToArabicDiacritics":case"arabicDiacriticsToText":E.value=Object.entries({"رضي الله عنهما":"رَضِيَ اللَّهُ عَنْهُمَا","رضي الله عنهم":"رَضِيَ اللَّهُ عَنْهُمْ","رضي الله عنها":"رَضِيَ اللَّهُ عَنْهَا","رضي الله عنه":"رَضِيَ اللَّهُ عَنْهُ","عليهما السلام":"عَلَيهِمَا السَّلَامُ","عليهم السلام":"عَلَيهِمُ السَّلَامُ","عليها السلام":"عَلَيهَا السَّلَامُ","عليه السلام":"عَلَيهِ السَّلَامُ","رحمهما الله":"رَحِمَهُمَا اللَّهُ","رحمهم الله":"رَحِمَهُمُ اللَّهُ","رحمها الله":"رَحِمَهَا اللَّهُ","رحمه الله":"رَحِمَهُ اللَّهُ","عز وجل":"عَزَّ وَجَلَّ","جل جلاله":"جَلَّ جَلَاﻟَﻪُ","تبارك وتعالى":"تَبَارَكَ وَتَعَالَى","تعالى":"تَعَالَى"}).reduce(((t,[a,n])=>t.replace(new RegExp(("textToArabicDiacritics"===e?a:n).replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),"textToArabicDiacritics"===e?n:a)),E.value);break;case"removeQuranicMarks":E.value=E.value.replace(/[ۖۗۘۙۚۛۜ۝۞ۣ۟۠ۡۢۤۥۦۧۨ۩۪ۭ۫۬﴾﴿]/g,"").replace(/\s+/g," ").trim();break;case"replaceDoubleBracketsToSingle":E.value=E.value.replace(/\(\(([^)]*)\)\)/g,"($1)");break;case"textToQuranicBrackets":E.value=E.value.replace(/\{/g,"﴾").replace(/\}/g,"﴿").replace(/\*/g,"۝");break;case"quranicToTextBrackets":E.value=E.value.replace(/﴾/g,"{").replace(/﴿/g,"}").replace(/۝/g,"*");break;case"convertPunctuation":a=(o={colon:":",fullstop:".",comma:","})[document.getElementById("punctuationFrom").value],o=o[document.getElementById("punctuationTo").value],a=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),E.value=E.value.replace(new RegExp(a,"g"),o);break;case"ltrToRtlPunc":E.value=E.value.replace(/[,;?]/g,(e=>({",":"،",";":"؛","?":"؟"}[e]||e)));break;case"rtlToLtrPunc":E.value=E.value.replace(/[،؛؟]/g,(e=>({"،":",","؛":";","؟":"?"}[e]||e)))}t()}(e.target.dataset.action),o.classList.remove("show"))}))})),document.addEventListener("click",l),document.getElementById("copyToClipboard").addEventListener("click",(()=>{navigator.clipboard.writeText(E.value)})),document.getElementById("clearAll").addEventListener("click",(()=>{E.value="",T=[{id:1,content:""}],L.innerHTML='<button class="numbered-tab active" data-tab="1">1</button><button id="addTab">+</button>',C=1,t()}));let A=!0;document.getElementById("toggleDirection").addEventListener("click",(()=>{A=!A,E.style.direction=A?"rtl":"ltr",E.style.textAlign=A?"right":"left"}));const M=[["އަ","a"],["އާ","aa"],["އި","i"],["އީ","ee"],["އު","u"],["އޫ","oo"],["އެ","e"],["އޭ","ey"],["އޮ","o"],["އޯ","oa"],["ުއް","uh"],["ިއް","ih"],["ެއް","eh"],["ަށް","ah"],["ައް","ah"],["ށް","h"],["ތް","i"],["ާއް","aah"],["އް","h"],["ަ","a"],["ާ","aa"],["ި","i"],["ީ","ee"],["ު","u"],["ޫ","oo"],["ެ","e"],["ޭ","ey"],["ޮ","o"],["ޯ","oa"],["ް",""],["ހ","h"],["ށ","sh"],["ނ","n"],["ރ","r"],["ބ","b"],["ޅ","lh"],["ކ","k"],["އ","a"],["ވ","v"],["މ","m"],["ފ","f"],["ދ","dh"],["ތ","th"],["ލ","l"],["ގ","g"],["ޏ","y"],["ސ","s"],["ޑ","d"],["ޒ","z"],["ޓ","t"],["ޔ","y"],["ޕ","p"],["ޖ","j"],["ޗ","ch"],["ޙ","h"],["ޚ","kh"],["ޛ‎","z"],["ޜ‎","z"],["ޝ‎","sh"],["ޝ","sh"],["ޤ","q"],["ޢ","a"],["ޞ","s"],["ޟ","dh"],["ޡ","z"],["ޠ","t"],["ާާޣ","gh"],["ޘ","th"],["ޛ","dh"],["ާާޜ","z"]];document.getElementById("transliterateDvToEn").addEventListener("click",(()=>{r(),E.value=function(e){e=e.replace(/[\u200B-\u200D\uFEFF]/g,"");for(const[t,a]of M)e=e.replace(new RegExp(t,"g"),a);return e.replace(/(^\s*\w|[.!?]\s*\w)/g,(e=>e.toUpperCase()))}(E.value),n(),t()}));const D=[["ـ",""],["آ","އާ"],["ب","ބ"],["ت","ތ"],["ث","ޘ"],["ج","ޖ"],["ح","ޙ"],["خ","ޚ"],["د","ދ"],["ذ","ޛ"],["ر","ރ"],["ز","ޒ"],["س","ސ"],["ش","ޝ"],["ص","ޞ"],["ض","ޟ"],["ط","ޠ"],["ظ","ޡ"],["ع","ޢ"],["غ","ޣ"],["ف","ފ"],["ق","ޤ"],["ك","ކ"],["ل","ލ"],["م","މ"],["ن","ނ"],["ه","ހ"],["و","ވ"],["ي","ޔ"],["ة","ތ"],["ء","އ"],["أ","އ"],["ؤ","އ"],["إ","އ"],["ئ","އ"],["ى","އ"],["َ","ަ"],["ِ","ި"],["ُ","ު"],["ْ","ް"],["ً","ަން"],["ٍ","ިން"],["ٌ","ުން"],["ަا","ާ"],["اލ","ލ"],["ލއްލަހ","ﷲ"],["ލލހ","ﷲ"],["ލއް","އް"],["ާ އްލަ","ަ އްލަ"],["ا",""],["ުވ","ޫ"],["އ އް"," އް"],["ޫ ލ","ު ލ"],["އްލަލ","އްލަ"],["«",'"'],["»",'"']];document.getElementById("transliterateArToDv").addEventListener("click",(()=>{r(),E.value=function(e){e=e.replace(/(.)ّ/g,((e,t)=>`އް${D.find((([e])=>e===t))?.[1]||t}`)),e=(e=e.replace(/ة([َِ ُ ً ٍ ٌ])/g,"ތ$1")).replace(/ة(?![َِ ُ ً ٍ ٌ])/g,"ހ");for(const[t,a]of D)e=e.replace(new RegExp(t,"g"),a);return e}(E.value),t()}));const F=new class{constructor(){this.ehbari="ސުމެއް އެއް ދެ ތިން ހަތަރު ފަސް ހަ ހަތް އަށް ނުވަ ދިހަ އެގާރަ ބާރަ ތޭރަ ސާދަ ފަނަރަ ސޯޅަ ސަތާރަ އަށާރަ ނަވާރަ ވިހި އެކާވީސް ބާވީސް ތޭވީސް ސައުވީސް ފަންސަވީސް ސައްބީސް ހަތާވީސް އަށާވީސް ނަވާވީސް".split(" "),this.dhihabari="ސުން ދިހަ ވިހި ތިރީސް ސާޅީސް ފަންސާސް ފަސްދޮޅަސް ހައްދިހަ އައްޑިހަ ނުވަދިހަ".split(" "),this.sunbari=["","ހާސް","މިލިޔަން","ބިލިޔަން","ޓްރިލިޔަން"]}convert(e){return e?1e3>(e=parseInt(e))?this.thousandSub(e):this.thousandUp(e):null}thousandSub(e){var t="ސަތޭކަ ";if(0>=e||29>=e)return this.ehbari[e];if(99>=e)return t=Math.floor(e/10),0===(e%=10)?this.dhihabari[t]:`${this.dhihabari[t]} ${this.ehbari[e]}`;if(999>=e){const a=e%100;return 2===(e=Math.floor(e/100))&&(this.ehbari[2]="ދުވި",t="ސައްތަ "),0===a?`${this.ehbari[e]} ${t}`:`${this.ehbari[e]} ${t}${this.thousandSub(a)}`}return""}thousandHalf(e){const t=[];for(;0!==e;)t.push(e%1e3),e=Math.floor(e/1e3);return t}thousandUp(e){var t=this.thousandHalf(e);e=t.length-1;const a=[];for(var n of t.reverse()){t=`${this.thousandSub(n)} `;let r=`${this.sunbari[e]} `;if(" "===t)break;"ސުން "!==t&&"ސުމެއް "!==t||(r=t=""),a.push(t+r),--e}return(n=a.join("")).endsWith(",")&&(n=n.slice(0,-1)),n.trim()}};document.getElementById("Nos2DvTxt").addEventListener("click",(()=>{r();const e=E.value.split("\n").map((e=>{const t=e.match(/\d+/g);return t?t.map((e=>F.convert(e).replace(/\s+/g," ").trim())).join("، "):e.trim()}));E.value=e.filter((e=>0<e.length)).join("\n"),t()}));const j=document.getElementById("typoIssuesResults");document.getElementById("findTypoIssues").addEventListener("click",(()=>{const e=E.value;if(window.noFiliExceptions){var t=o(e);c(t)}else(t=document.createElement("script")).src="noFiliExceptions.js",t.onload=()=>{c(o(e))},t.onerror=()=>{console.error("Failed to load exceptions"),j.innerHTML="Error loading exceptions. Continuing without them.";c(o(e))},document.head.appendChild(t)})),document.getElementById("removePunctuation").addEventListener("click",(()=>{r(),E.value=E.value.replace(/[^\w\s]/g,""),t()})),document.getElementById("numerateWords").addEventListener("click",(()=>{const e=document.getElementById("textArea");document.getElementById("numerateWords").textContent.includes("No → Wrd")?(e.value=e.value.replace(/\b\d+\b/g,(e=>function(e){const t=" one two three four five six seven eight nine".split(" "),a="  twenty thirty forty fifty sixty seventy eighty ninety".split(" ");var n="ten eleven twelve thirteen fourteen fifteen sixteen seventeen eighteen nineteen".split(" ");return 10>e?t[e]:20>e?n[e-10]:100>e?(n=e%10,a[Math.floor(e/10)]+(n?`-${t[n]}`:"")):e}(parseInt(e)))).replace(/%/g,"percent"),document.getElementById("numerateWords").textContent="Wrd → No"):(e.value=e.value.replace(/\b(?:\w+(?:-\w+)*)\b/g,(e=>{var t=e.toLowerCase();return e={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12,thirteen:13,fourteen:14,fifteen:15,sixteen:16,seventeen:17,eighteen:18,nineteen:19,twenty:20,thirty:30,forty:40,fifty:50,sixty:60,seventy:70,eighty:80,ninety:90,hundred:100},t.includes("-")?e=(e[(t=t.split("-"))[0]]||0)+(e[t[1]]||0):e=e[t]||t,e})).replace(/\bpercent\b/g,"%"),document.getElementById("numerateWords").textContent="No → Wrd"),t()}));const q=document.getElementById("findInput"),U=document.getElementById("replaceInput");document.getElementById("findAndReplaceText").addEventListener("click",(()=>{var e=q.value;const a=U.value;e&&(e=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),E.value=E.value.replace(e,a),t())})),document.getElementById("diffCompare").addEventListener("click",(()=>{window.open("diffCompare.html","_blank")})),document.getElementById("keyboardPage").addEventListener("click",(()=>{window.open("keyboardPage.html","_blank")})),document.getElementById("qrGenerator").addEventListener("click",(()=>{window.open("qrGenerator.html","_blank")})),document.getElementById("fullscreen").addEventListener("click",(()=>{document.fullscreenElement?(document.exitFullscreen(),E.style.height="300px"):(document.documentElement.requestFullscreen(),E.style.height="100vh")})),document.addEventListener("fullscreenchange",(()=>{document.fullscreenElement||(E.style.height="300px")})),s(),setInterval(s,6e4),document.getElementById("toggleMilitaryTime").addEventListener("click",(()=>{const e="true"===localStorage.getItem("militaryTime");localStorage.setItem("militaryTime",!e),s()})),E.addEventListener("input",(e=>{const t=e.target.selectionStart;var a=e.target.value.substring(0,t);"ss-"===a.split(/\s/).pop()&&(a=a.replace(/ss-$/,"ﷺ")+e.target.value.substring(t),e.target.value=a,e.target.setSelectionRange(t,t))})),document.querySelectorAll(".copy-button, .copy-button-lit, .copy-button-other").forEach((e=>{e.addEventListener("click",(async()=>{const t=e.dataset.text||e.textContent.trim();try{await navigator.clipboard.writeText(t),u(e,"Copied")}catch(e){console.error("Failed to copy:",e)}}))})),document.querySelectorAll("button").forEach((e=>{e.addEventListener("click",(t=>{e.closest(".dropdown-button")||u(e,"Clicked")}))}));var R=JSON.parse(localStorage.getItem("editorTabs"));R&&(T=R,T.forEach((e=>{if(1<e.id){const t=document.createElement("button");t.classList.add("numbered-tab"),t.dataset.tab=e.id,t.textContent=e.id,L.insertBefore(t,x)}})),a(parseInt(localStorage.getItem("currentTab"))||1)),setInterval((()=>{T[C-1].content=E.value,localStorage.setItem("editorTabs",JSON.stringify(T)),localStorage.setItem("currentTab",C)}),5e3),t();const P=document.getElementById("calcArea"),N=document.getElementById("addCalcTab"),H=document.querySelector(".calc-numbered-tabs");if(P&&N&&H){let me=1,pe=[{id:1,content:""}];const ve=document.getElementById("sumTotal"),ge=document.getElementById("zakatAmount"),ye=document.getElementById("lineResults"),he=document.getElementById("copyTotal"),be=document.getElementById("clearCalc");function z(){let e=0,t="";P.value.split("\n").forEach((a=>{a=function(e){let t=e.match(/[+-]?\d*\.?\d+(?:,\d{3})*(?:\d*\.?\d+)?/g)||[];e=e.match(/[\+\-\*x\/÷]/g)||[],t=t.map((e=>parseFloat(e.replace(/,/g,""))));for(let a=0;a<e.length;a++)"*"!==e[a]&&"x"!==e[a]&&"/"!==e[a]&&"÷"!==e[a]||(t.splice(a,2,"*"===e[a]||"x"===e[a]?t[a]*t[a+1]:t[a]/t[a+1]),e.splice(a,1),a--);return t.reduce(((e,t)=>e+t),0)}(a),e+=a,t+=`${e.toFixed(2)}\n`})),ve.textContent=e.toFixed(2),ge.textContent=(.025*e).toFixed(2),ye.textContent=t}function O(e){pe[me-1].content=P.value,me=e,P.value=pe[me-1].content,document.querySelectorAll(".calc-numbered-tab").forEach((t=>{t.classList.toggle("active",parseInt(t.dataset.tab)===e)})),z()}N.addEventListener("click",(()=>{const e=pe.length+1;pe.push({id:e,content:""});const t=document.createElement("button");t.classList.add("calc-numbered-tab"),t.dataset.tab=e,t.textContent=e,H.insertBefore(t,N),O(e)})),H.addEventListener("click",(e=>{e.target.classList.contains("calc-numbered-tab")&&O(e=parseInt(e.target.dataset.tab))})),P.addEventListener("input",z),he.addEventListener("click",(()=>{navigator.clipboard.writeText(ve.textContent),u(he,"Copied")})),be.addEventListener("click",(()=>{P.value="",ye.textContent="",ve.textContent="0.00",ge.textContent="0.00",pe=[{id:1,content:""}],me=1;const e=H.querySelectorAll(".calc-numbered-tab");e.forEach((e=>{"1"!==e.dataset.tab&&e.remove()})),e[0].classList.add("active"),u(be,"Cleared")})),(R=JSON.parse(localStorage.getItem("calculatorTabs")))&&(pe=R,pe.forEach((e=>{if(1<e.id){const t=document.createElement("button");t.classList.add("calc-numbered-tab"),t.dataset.tab=e.id,t.textContent=e.id,H.insertBefore(t,N)}})),O(parseInt(localStorage.getItem("currentCalcTab"))||1)),setInterval((()=>{pe[me-1].content=P.value,localStorage.setItem("calculatorTabs",JSON.stringify(pe)),localStorage.setItem("currentCalcTab",me)}),5e3)}const W=document.querySelector(".proportion-container"),Z=document.getElementById("addPropTab"),_=document.querySelector(".prop-numbered-tabs");if(W&&Z&&_){let fe=1,Ee=[{id:1,content:W.innerHTML}];function J(){document.querySelectorAll(".proportion-set").forEach((e=>{e.querySelectorAll(".prop-input").forEach((t=>{t.addEventListener("input",(()=>function(e){if(e=e.querySelectorAll(".prop-input"),3<=Array.from(e).filter((e=>""!==e.value)).length){const t=e[0].value,a=e[1].value,n=e[2].value;t&&a&&n&&(e[3].value=(a/t*n).toFixed(2))}else e[3].value=""}(e)))}))}))}function G(e){Ee[fe-1].content=W.innerHTML,fe=e,W.innerHTML=Ee[fe-1].content,document.querySelectorAll(".prop-numbered-tab").forEach((t=>{t.classList.toggle("active",parseInt(t.dataset.tab)===e)})),J()}Z.addEventListener("click",(()=>{const e=Ee.length+1;Ee.push({id:e,content:W.innerHTML});const t=document.createElement("button");t.classList.add("prop-numbered-tab"),t.dataset.tab=e,t.textContent=e,_.insertBefore(t,Z),G(e)})),_.addEventListener("click",(e=>{e.target.classList.contains("prop-numbered-tab")&&G(e=parseInt(e.target.dataset.tab))})),J(),(R=JSON.parse(localStorage.getItem("proportionTabs")))&&(Ee=R,Ee.forEach((e=>{if(1<e.id){const t=document.createElement("button");t.classList.add("prop-numbered-tab"),t.dataset.tab=e.id,t.textContent=e.id,_.insertBefore(t,Z)}})),G(parseInt(localStorage.getItem("currentPropTab"))||1)),setInterval((()=>{Ee[fe-1].content=W.innerHTML,localStorage.setItem("proportionTabs",JSON.stringify(Ee)),localStorage.setItem("currentPropTab",fe)}),5e3);const Ie=document.getElementById("clearProp");Ie.addEventListener("click",(()=>{document.querySelectorAll(".proportion-set").forEach((e=>{e.querySelectorAll(".prop-input").forEach(((e,t)=>{e.value=2===t?"1":""}))})),Ee=[{id:1,content:W.innerHTML}],fe=1;const e=_.querySelectorAll(".prop-numbered-tab");e.forEach((e=>{"1"!==e.dataset.tab&&e.remove()})),e[0].classList.add("active"),u(Ie,"Cleared")}))}let K="true"===localStorage.getItem("nightCalcMilitaryTime");document.getElementById("maghribTime").addEventListener("change",i),document.getElementById("fajrTime").addEventListener("change",i),document.getElementById("toggleNightCalcFormat").addEventListener("click",(()=>{K=!K,localStorage.setItem("nightCalcMilitaryTime",K),i()}));const Q=e=>btoa(new Uint8Array(e).reduce(((e,t)=>e+String.fromCharCode(t)),"")),V=e=>Uint8Array.from(atob(e),(e=>e.charCodeAt(0))),Y=new TextEncoder,X=new TextDecoder,ee=e=>window.crypto.subtle.importKey("raw",Y.encode(e||"empty"),"PBKDF2",!1,["deriveKey"]),te=(e,t,a)=>window.crypto.subtle.deriveKey({name:"PBKDF2",salt:t,iterations:25e4,hash:"SHA-256"},e,{name:"AES-GCM",length:256},!1,a),ae=document.querySelectorAll(".crypt-tab"),ne=document.querySelectorAll(".crypt-panel");ae.forEach((e=>{e.addEventListener("click",(()=>{ae.forEach((e=>e.classList.remove("active"))),ne.forEach((e=>e.classList.remove("active"))),e.classList.add("active"),document.getElementById(e.dataset.crypttab+"Crypt").classList.add("active")}))}));const re=document.getElementById("encryptButton"),le=document.getElementById("decryptButton"),oe=document.getElementById("copyEncrypted"),ce=document.getElementById("copyDecrypted");re&&re.addEventListener("click",(async()=>{const e=document.getElementById("textToEncrypt").value,t=document.getElementById("encryptPassword").value;if(e)try{const a=await p(e,t);document.getElementById("encryptedText").value=a,u(re,"Encrypted")}catch(e){console.error("Encryption failed:",e),u(re,"Encryption failed")}else u(re,"Please enter text to encrypt")})),le&&le.addEventListener("click",(async()=>{const e=document.getElementById("textToDecrypt").value,t=document.getElementById("decryptPassword").value;if(e)try{const a=await v(e,t);document.getElementById("decryptedText").value=a||"Decryption failed",u(le,a?"Decrypted":"Failed")}catch(e){console.error("Decryption failed:",e),u(le,"Decryption failed"),document.getElementById("decryptedText").value="Decryption failed"}else u(le,"Please enter text to decrypt")})),oe&&oe.addEventListener("click",(()=>{const e=document.getElementById("encryptedText").value;e&&(navigator.clipboard.writeText(e),u(oe,"Copied"))})),ce&&ce.addEventListener("click",(()=>{const e=document.getElementById("decryptedText").value;e&&(navigator.clipboard.writeText(e),u(ce,"Copied"))}));const se=document.getElementById("fileToEncrypt"),ue=document.getElementById("fileToDecrypt"),ie=document.getElementById("fileEncryptButton"),de=document.getElementById("fileDecryptButton");ie?.addEventListener("click",(async()=>{const e=se.files[0],t=document.getElementById("fileEncryptPassword").value;if(e)try{u(ie,"Encrypting...");const a=await g(e),n=await p(new Uint8Array(a),t);y(new Blob([V(n)],{type:"application/octet-stream"}),e.name+".encrypted"),u(ie,"Encrypted")}catch(e){console.error("File encryption failed:",e),u(ie,"Encryption failed")}else u(ie,"Please select a file")})),de?.addEventListener("click",(async()=>{const e=ue.files[0],t=document.getElementById("fileDecryptPassword").value;if(e)try{u(de,"Decrypting...");const a=await g(e),n=await v(Q(new Uint8Array(a)),t);y(new Blob([(new TextEncoder).encode(n)],{type:"application/octet-stream"}),e.name.replace(/\.encrypted$/,"")),u(de,"Decrypted")}catch(e){console.error("File decryption failed:",e),u(de,"Decryption failed")}else u(de,"Please select a file")})),se?.addEventListener("change",(()=>{h(se)})),ue?.addEventListener("change",(()=>{h(ue)})),document.querySelectorAll(".file-label").forEach((e=>{e.addEventListener("dragover",(t=>{t.preventDefault(),e.classList.add("dragover")})),e.addEventListener("dragleave",(()=>{e.classList.remove("dragover")})),e.addEventListener("drop",(t=>{t.preventDefault(),e.classList.remove("dragover");const a=document.getElementById(e.getAttribute("for"));0<(t=t.dataTransfer.files).length&&(a.files=t,h(a))}))}))}));