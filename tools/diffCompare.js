!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.mergely=e():t.mergely=e()}(self,(()=>(()=>{function t(i){var r=n[i];return void 0!==r||(r=n[i]={id:i,exports:{}},e[i].call(r.exports,r,r.exports,t)),r.exports}var e={653:(t,e,n)=>{!function(t){function e(t,e){for(var n=t.flags,i=n=null!=n?n:(t.ignoreCase?"i":"")+(t.global?"g":"")+(t.multiline?"m":""),r=0;r<e.length;r++)-1==i.indexOf(e.charAt(r))&&(i+=e.charAt(r));return n==i?t:new RegExp(t.source,i)}function n(t,n,i){n=e(n,"g");var r=i.line,o=i.ch;for(i=t.lastLine();r<=i;r++,o=0)if(n.lastIndex=o,o=t.getLine(r),o=n.exec(o))return{from:u(r,o.index),to:u(r,o.index+o[0].length),match:o}}function i(t,i,r){if(!/\\s|\\n|\n|\\W|\\D|\[\^/.test(i.source))return n(t,i,r);i=e(i,"gm");for(var o,s=1,l=r.line,a=t.lastLine();l<=a;){for(var h=0;h<s&&!(l>a);h++){var c=t.getLine(l++);o=null==o?c:o+"\n"+c}if(s*=2,i.lastIndex=r.ch,h=i.exec(o))return i=o.slice(0,h.index).split("\n"),t=h[0].split("\n"),r=r.line+i.length-1,i=i[i.length-1].length,{from:u(r,i),to:u(r+t.length-1,1==t.length?i+t[0].length:t[t.length-1].length),match:h}}}function r(t,e,n){for(var i,r=0;r<=t.length&&(e.lastIndex=r,r=e.exec(t));){var o=r.index+r[0].length;if(o>t.length-n)break;(!i||o>i.index+i[0].length)&&(i=r),r=r.index+1}return i}function o(t,n,i){n=e(n,"g");var o=i.line,s=i.ch;for(i=t.firstLine();o>=i;o--,s=-1){var l=t.getLine(o);if(s=r(l,n,0>s?0:l.length-s))return{from:u(o,s.index),to:u(o,s.index+s[0].length),match:s}}}function s(t,n,i){if(!/\\s|\\n|\n|\\W|\\D|\[\^/.test(n.source))return o(t,n,i);n=e(n,"gm");var s=1,l=t.getLine(i.line).length-i.ch;i=i.line;for(var a=t.firstLine();i>=a;){for(var h=0;h<s&&i>=a;h++)var c=t.getLine(i--),d=null==d?c:c+"\n"+d;if(s*=2,h=r(d,n,l))return n=d.slice(0,h.index).split("\n"),t=h[0].split("\n"),i+=n.length,n=n[n.length-1].length,{from:u(i,n),to:u(i+t.length-1,1==t.length?n+t[0].length:t[t.length-1].length),match:h}}}function l(t,e,n,i){if(t.length==e.length)return n;var r=0;for(e=n+Math.max(0,t.length-e.length);;){if(r==e)return r;var o=r+e>>1,s=i(t.slice(0,o)).length;if(s==n)return o;s>n?e=o:r=o+1}}function a(t,e,n,i){if(!e.length)return null;e=(i=i?d:f)(e).split(/\r|\n\r?/);var r=n.line;n=n.ch;var o=t.lastLine()+1-e.length;t:for(;r<=o;r++,n=0){var s=t.getLine(r).slice(n),a=i(s);if(1==e.length){var h=a.indexOf(e[0]);if(-1==h)continue t;return l(s,a,h,i),{from:u(r,l(s,a,h,i)+n),to:u(r,l(s,a,h+e[0].length,i)+n)}}if(h=a.length-e[0].length,a.slice(h)==e[0]){for(var c=1;c<e.length-1;c++)if(i(t.getLine(r+c))!=e[c])continue t;var p=i(c=t.getLine(r+e.length-1)),g=e[e.length-1];if(p.slice(0,g.length)==g)return{from:u(r,l(s,a,h,i)+n),to:u(r+e.length-1,l(c,p,g.length,i))}}}}function h(t,e,n,i){if(!e.length)return null;e=(i=i?d:f)(e).split(/\r|\n\r?/);var r=n.line,o=n.ch,s=t.firstLine()-1+e.length;t:for(;r>=s;r--,o=-1){var a=t.getLine(r);if(-1<o&&(a=a.slice(0,o)),o=i(a),1==e.length){if(-1==(n=o.lastIndexOf(e[0])))continue t;return{from:u(r,l(a,o,n,i)),to:u(r,l(a,o,n+e[0].length,i))}}var h=e[e.length-1];if(o.slice(0,h.length)==h){var c=1;for(n=r-e.length+1;c<e.length-1;c++)if(i(t.getLine(n+c))!=e[c])continue t;if((c=i(n=t.getLine(r+1-e.length))).slice(c.length-e[0].length)==e[0])return{from:u(r+1-e.length,l(n,c,n.length-e[0].length,i)),to:u(r,l(a,o,h.length,i))}}}}function c(t,r,l,c){if(this.afterEmptyMatch=this.atOccurrence=!1,this.doc=t,l=l?t.clipPos(l):u(0,0),this.pos={from:l,to:l},"object"==typeof c)var d=c.caseFold;else d=c,c=null;"string"==typeof r?(null==d&&(d=!1),this.matches=function(e,n){return(e?h:a)(t,r,n,d)}):(r=e(r,"gm"),this.matches=c&&!1===c.multiline?function(e,i){return(e?o:n)(t,r,i)}:function(e,n){return(e?s:i)(t,r,n)})}var u=t.Pos;if(String.prototype.normalize)var d=function(t){return t.normalize("NFD").toLowerCase()},f=function(t){return t.normalize("NFD")};else d=function(t){return t.toLowerCase()},f=function(t){return t};c.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(e){var n=this.doc.clipPos(e?this.pos.from:this.pos.to);return this.afterEmptyMatch&&this.atOccurrence&&(n=u(n.line,n.ch),e?(n.ch--,0>n.ch&&(n.line--,n.ch=(this.doc.getLine(n.line)||"").length)):(n.ch++,n.ch>(this.doc.getLine(n.line)||"").length&&(n.ch=0,n.line++)),0!=t.cmpPos(n,this.doc.clipPos(n)))?this.atOccurrence=!1:(this.afterEmptyMatch=(n=this.matches(e,n))&&0==t.cmpPos(n.from,n.to),n?(this.pos=n,this.atOccurrence=!0,this.pos.match||!0):(e=u(e?this.doc.firstLine():this.doc.lastLine()+1,0),this.pos={from:e,to:e},this.atOccurrence=!1))},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(e,n){this.atOccurrence&&(e=t.splitLines(e),this.doc.replaceRange(e,this.pos.from,this.pos.to,n),this.pos.to=u(this.pos.from.line+e.length-1,e[e.length-1].length+(1==e.length?this.pos.from.ch:0)))}},t.defineExtension("getSearchCursor",(function(t,e,n){return new c(this.doc,t,e,n)})),t.defineDocExtension("getSearchCursor",(function(t,e,n){return new c(this,t,e,n)})),t.defineExtension("selectMatches",(function(e,n){var i=[];for(e=this.getSearchCursor(e,this.getCursor("from"),n);e.findNext()&&!(0<t.cmpPos(e.to(),this.getCursor("to")));)i.push({anchor:e.from(),head:e.to()});i.length&&this.setSelections(i,0)}))}(n(237))},533:(t,e,n)=>{!function(t){function e(t){t.state.markedSelection&&t.operation((function(){!function(t){if(!t.somethingSelected())return r(t);if(1<t.listSelections().length)return o(t);var e=t.getCursor("start"),n=t.getCursor("end"),l=t.state.markedSelection;if(!l.length)return i(t,e,n);var h=l[0].find(),c=l[l.length-1].find();if(!h||!c||n.line-e.line<=s||0<=a(e,c.to)||0>=a(n,h.from))return o(t);for(;0<a(e,h.from);)l.shift().clear(),h=l[0].find();for(0>a(e,h.from)&&(h.to.line-e.line<s?(l.shift().clear(),i(t,e,h.to,0)):i(t,e,h.from,0));0>a(n,c.to);)l.pop().clear(),c=l[l.length-1].find();0<a(n,c.to)&&(n.line-c.from.line<s?(l.pop().clear(),i(t,c.from,n)):i(t,c.to,n))}(t)}))}function n(t){t.state.markedSelection&&t.state.markedSelection.length&&t.operation((function(){r(t)}))}function i(t,e,n,i){if(0!=a(e,n))for(var r=t.state.markedSelection,o=t.state.markedSelectionStyle,h=e.line;;){var c=h==e.line?e:l(h,0),u=(h+=s)>=n.line,d=u?n:l(h,0);if(c=t.markText(c,d,{className:o}),null==i?r.push(c):r.splice(i++,0,c),u)break}}function r(t){t=t.state.markedSelection;for(var e=0;e<t.length;++e)t[e].clear();t.length=0}function o(t){r(t);for(var e=t.listSelections(),n=0;n<e.length;n++)i(t,e[n].from(),e[n].to())}t.defineOption("styleSelectedText",!1,(function(i,s,l){l=l&&l!=t.Init,s&&!l?(i.state.markedSelection=[],i.state.markedSelectionStyle="string"==typeof s?s:"CodeMirror-selectedtext",o(i),i.on("cursorActivity",e),i.on("change",n)):!s&&l&&(i.off("cursorActivity",e),i.off("change",n),r(i),i.state.markedSelection=i.state.markedSelectionStyle=null)}));var s=8,l=t.Pos,a=t.cmpPos}(n(237))},237:function(t){t.exports=function(){function t(t){return new RegExp("(^|\\s)"+t+"(?:$|\\s)\\s*")}function e(t){for(var e=t.childNodes.length;0<e;--e)t.removeChild(t.firstChild);return t}function n(t,n){return e(t).appendChild(n)}function i(t,e,n,i){if(t=document.createElement(t),n&&(t.className=n),i&&(t.style.cssText=i),"string"==typeof e)t.appendChild(document.createTextNode(e));else if(e)for(n=0;n<e.length;++n)t.appendChild(e[n]);return t}function r(t,e,n,r){return(t=i(t,e,n,r)).setAttribute("role","presentation"),t}function o(t,e){if(3==e.nodeType&&(e=e.parentNode),t.contains)return t.contains(e);do{if(11==e.nodeType&&(e=e.host),e==t)return!0}while(e=e.parentNode)}function s(t){var e=t.ownerDocument||t;try{var n=t.activeElement}catch(t){n=e.body||null}for(;n&&n.shadowRoot&&n.shadowRoot.activeElement;)n=n.shadowRoot.activeElement;return n}function l(e,n){var i=e.className;t(n).test(i)||(e.className+=(i?" ":"")+n)}function a(e,n){e=e.split(" ");for(var i=0;i<e.length;i++)e[i]&&!t(e[i]).test(n)&&(n+=" "+e[i]);return n}function h(t){return t.display.wrapper.ownerDocument}function c(t){return t.getRootNode?t.getRootNode():t.ownerDocument}function u(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function d(t,e,n){for(var i in e||={},t)!t.hasOwnProperty(i)||!1===n&&e.hasOwnProperty(i)||(e[i]=t[i]);return e}function f(t,e,n,i,r){for(null==e&&-1==(e=t.search(/[^\s\u00a0]/))&&(e=t.length),i=i||0,r=r||0;;){var o=t.indexOf("\t",i);if(0>o||o>=e)return r+(e-i);r+=o-i,r+=n-r%n,i=o+1}}function p(t,e){for(var n=0;n<t.length;++n)if(t[n]==e)return n;return-1}function g(t,e,n){for(var i=0,r=0;;){var o=t.indexOf("\t",i);-1==o&&(o=t.length);var s=o-i;if(o==t.length||r+s>=e)return i+Math.min(s,e-r);if(r+=o-i,i=o+1,(r+=n-r%n)>=e)return i}}function m(t){for(;Wo.length<=t;)Wo.push(v(Wo)+" ");return Wo[t]}function v(t){return t[t.length-1]}function y(t,e){for(var n=[],i=0;i<t.length;i++)n[i]=e(t[i],i);return n}function b(t,e,n){for(var i=0,r=n(e);i<t.length&&n(t[i])<=r;)i++;t.splice(i,0,e)}function w(){}function x(t,e){return Object.create?t=Object.create(t):(w.prototype=t,t=new w),e&&d(e,t),t}function _(t){return/\w/.test(t)||""<t&&(t.toUpperCase()!=t.toLowerCase()||Po.test(t))}function C(t,e){return e?!!(-1<e.source.indexOf("\\w")&&_(t))||e.test(t):_(t)}function k(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}function S(t){return 768<=t.charCodeAt(0)&&Ho.test(t)}function L(t,e,n){for(;(0>n?0<e:e<t.length)&&S(t.charAt(e));)e+=n;return e}function M(t,e,n){for(var i=e>n?-1:1;;){if(e==n)return e;var r=(e+n)/2;if((r=0>i?Math.ceil(r):Math.floor(r))==e)return t(r)?e:n;t(r)?n=r:e=r+i}}function T(t,e,n,i){if(!t)return i(e,n,"ltr",0);for(var r=!1,o=0;o<t.length;++o){var s=t[o];(s.from<n&&s.to>e||e==n&&s.to==e)&&(i(Math.max(s.from,e),Math.min(s.to,n),1==s.level?"rtl":"ltr",o),r=!0)}r||i(e,n,"ltr")}function O(t,e,n){var i;zo=null;for(var r=0;r<t.length;++r){var o=t[r];if(o.from<e&&o.to>e)return r;o.to==e&&(o.from!=o.to&&"before"==n?i=r:zo=r),o.from==e&&(o.from!=o.to&&"before"!=n?i=r:zo=r)}return null!=i?i:zo}function N(t,e){var n=t.order;return null==n&&(n=t.order=Ro(t.text,e)),n}function A(t,e,n){if(t.removeEventListener)t.removeEventListener(e,n,!1);else if(t.detachEvent)t.detachEvent("on"+e,n);else{var i=(t=t._handlers)&&t[e];i&&-1<(n=p(i,n))&&(t[e]=i.slice(0,n).concat(i.slice(n+1)))}}function D(t,e){var n=t._handlers&&t._handlers[e]||Io;if(n.length)for(var i=Array.prototype.slice.call(arguments,2),r=0;r<n.length;++r)n[r].apply(null,i)}function E(t,e,n){return"string"==typeof e&&(e={type:e,preventDefault:function(){this.defaultPrevented=!0}}),D(t,n||e.type,t,e),I(e)||e.codemirrorIgnore}function W(t){var e=t._handlers&&t._handlers.cursorActivity;if(e){t=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]);for(var n=0;n<e.length;++n)-1==p(t,e[n])&&t.push(e[n])}}function P(t,e){return 0<(t._handlers&&t._handlers[e]||Io).length}function H(t){t.prototype.on=function(t,e){Fo(this,t,e)},t.prototype.off=function(t,e){A(this,t,e)}}function z(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function R(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function I(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function F(t){z(t),R(t)}function B(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),vo&&t.ctrlKey&&1==e&&(e=3),e}function V(t,e){2<arguments.length&&(e.dependencies=Array.prototype.slice.call(arguments,2)),jo[t]=e}function $(t){if("string"==typeof t&&Ko.hasOwnProperty(t))t=Ko[t];else if(t&&"string"==typeof t.name&&Ko.hasOwnProperty(t.name)){var e=Ko[t.name];"string"==typeof e&&(e={name:e}),(t=x(e,t)).name=e.name}else{if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return $("application/xml");if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+json$/.test(t))return $("application/json")}return"string"==typeof t?{name:t}:t||{name:"null"}}function U(t,e){e=$(e);var n=jo[e.name];if(!n)return U(t,"text/plain");if(t=n(t,e),qo.hasOwnProperty(e.name))for(var i in n=qo[e.name])n.hasOwnProperty(i)&&(t.hasOwnProperty(i)&&(t["_"+i]=t[i]),t[i]=n[i]);if(t.name=e.name,e.helperType&&(t.helperType=e.helperType),e.modeProps)for(var r in e.modeProps)t[r]=e.modeProps[r];return t}function G(t,e){d(e,t=qo.hasOwnProperty(t)?qo[t]:qo[t]={})}function j(t,e){if(!0===e)return e;if(t.copyState)return t.copyState(e);for(var n in t={},e){var i=e[n];i instanceof Array&&(i=i.concat([])),t[n]=i}return t}function K(t,e){for(var n;t.innerMode&&(n=t.innerMode(e))&&n.mode!=t;)e=n.state,t=n.mode;return n||{mode:t,state:e}}function q(t,e,n){return!t.startState||t.startState(e,n)}function X(t,e){if(0>(e-=t.first)||e>=t.size)throw Error("There is no line "+(e+t.first)+" in the document.");for(;!t.lines;)for(var n=0;;++n){var i=t.children[n],r=i.chunkSize();if(e<r){t=i;break}e-=r}return t.lines[e]}function Y(t,e,n){var i=[],r=e.line;return t.iter(e.line,n.line+1,(function(t){t=t.text,r==n.line&&(t=t.slice(0,n.ch)),r==e.line&&(t=t.slice(e.ch)),i.push(t),++r})),i}function Z(t,e,n){var i=[];return t.iter(e,n,(function(t){i.push(t.text)})),i}function J(t,e){if(e-=t.height)for(;t;t=t.parent)t.height+=e}function Q(t){if(null==t.parent)return null;var e=t.parent;t=p(e.lines,t);for(var n=e.parent;n;e=n,n=n.parent)for(var i=0;n.children[i]!=e;++i)t+=n.children[i].chunkSize();return t+e.first}function tt(t,e){var n=t.first;t:do{for(var i=0;i<t.children.length;++i){var r=t.children[i],o=r.height;if(e<o){t=r;continue t}e-=o,n+=r.chunkSize()}return n}while(!t.lines);for(i=0;i<t.lines.length&&!(e<(r=t.lines[i].height));++i)e-=r;return n+i}function et(t,e){return e>=t.first&&e<t.first+t.size}function nt(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function it(t,e,n){if(void 0===n&&(n=null),!(this instanceof it))return new it(t,e,n);this.line=t,this.ch=e,this.sticky=n}function rt(t,e){return t.line-e.line||t.ch-e.ch}function ot(t,e){return t.sticky==e.sticky&&0==rt(t,e)}function st(t){return it(t.line,t.ch)}function lt(t,e){return 0>rt(t,e)?e:t}function at(t,e){return 0>rt(t,e)?t:e}function ht(t,e){if(e.line<t.first)return it(t.first,0);var n=t.first+t.size-1;return e.line>n?it(n,X(t,n).text.length):(t=X(t,e.line).text.length,e=null==(n=e.ch)||n>t?it(e.line,t):0>n?it(e.line,0):e)}function ct(t,e){for(var n=[],i=0;i<e.length;i++)n[i]=ht(t,e[i]);return n}function ut(t,e,n,i){var r=[t.state.modeGen],o={};bt(t,e.text,t.doc.mode,n,(function(t,e){return r.push(t,e)}),o,i);var s=n.state;i=function(i){n.baseTokens=r;var l=t.state.overlays[i],a=1,h=0;n.state=!0,bt(t,e.text,l.mode,n,(function(t,e){for(var n=a;h<t;){var i=r[a];i>t&&r.splice(a,1,t,r[a+1],i),a+=2,h=Math.min(t,i)}if(e)if(l.opaque)r.splice(n,a-n,t,"overlay "+e),a=n+2;else for(;n<a;n+=2)t=r[n+1],r[n+1]=(t?t+" ":"")+"overlay "+e}),o),n.state=s,n.baseTokens=null,n.baseTokenPos=1};for(var l=0;l<t.state.overlays.length;++l)i(l);return{styles:r,classes:o.bgClass||o.textClass?o:null}}function dt(t,e,n){if(!e.styles||e.styles[0]!=t.state.modeGen){var i=ft(t,Q(e)),r=e.text.length>t.options.maxHighlightLength&&j(t.doc.mode,i.state),o=ut(t,e,i);r&&(i.state=r),e.stateAfter=i.save(!r),e.styles=o.styles,o.classes?e.styleClasses=o.classes:e.styleClasses&&(e.styleClasses=null),n===t.doc.highlightFrontier&&(t.doc.modeFrontier=Math.max(t.doc.modeFrontier,++t.doc.highlightFrontier))}return e.styles}function ft(t,e,n){var i=t.doc,r=t.display;if(!i.mode.startState)return new Zo(i,!0,e);var o=wt(t,e,n),s=o>i.first&&X(i,o-1).stateAfter,l=s?Zo.fromSaved(i,s,o):new Zo(i,q(i.mode),o);return i.iter(o,e,(function(n){pt(t,n.text,l);var i=l.line;n.stateAfter=i==e-1||0==i%5||i>=r.viewFrom&&i<r.viewTo?l.save():null,l.nextLine()})),n&&(i.modeFrontier=l.line),l}function pt(t,e,n,i){var r=t.doc.mode;for((t=new Xo(e,t.options.tabSize,n)).start=t.pos=i||0,""==e&&gt(r,n.state);!t.eol();)mt(r,t,n.state),t.start=t.pos}function gt(t,e){return t.blankLine?t.blankLine(e):t.innerMode&&(t=K(t,e)).mode.blankLine?t.mode.blankLine(t.state):void 0}function mt(t,e,n,i){for(var r=0;10>r;r++){i&&(i[0]=K(t,n).mode);var o=t.token(e,n);if(e.pos>e.start)return o}throw Error("Mode "+t.name+" failed to advance stream.")}function vt(t,e,n,i){var r,o=t.doc,s=o.mode,l=X(o,(e=ht(o,e)).line);for(n=ft(t,e.line,n),t=new Xo(l.text,t.options.tabSize,n),i&&(r=[]);(i||t.pos<e.ch)&&!t.eol();){t.start=t.pos;var a=mt(s,t,n.state);i&&r.push(new Jo(t,a,j(o.mode,n.state)))}return i?r:new Jo(t,a,n.state)}function yt(t,e){if(t)for(;;){var n=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;t=t.slice(0,n.index)+t.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==e[i]?e[i]=n[2]:new RegExp("(?:^|\\s)"+n[2]+"(?:$|\\s)").test(e[i])||(e[i]+=" "+n[2])}return t}function bt(t,e,n,i,r,o,s){var l=n.flattenSpans;null==l&&(l=t.options.flattenSpans);var a=0,h=null,c=new Xo(e,t.options.tabSize,i),u=t.options.addModeClass&&[null];for(""==e&&yt(gt(n,i.state),o);!c.eol();){if(c.pos>t.options.maxHighlightLength){l=!1,s&&pt(t,e,i,c.pos),c.pos=e.length;var d=null}else d=yt(mt(n,c,i.state,u),o);if(u){var f=u[0].name;f&&(d="m-"+(d?f+" "+d:f))}if(!l||h!=d){for(;a<c.start;)r(a=Math.min(c.start,a+5e3),h);h=d}c.start=c.pos}for(;a<c.pos;)r(t=Math.min(c.pos,a+5e3),h),a=t}function wt(t,e,n){for(var i,r,o=t.doc,s=n?-1:e-(t.doc.mode.innerMode?1e3:100);e>s;--e){if(e<=o.first)return o.first;var l=X(o,e-1),a=l.stateAfter;if(a&&(!n||e+(a instanceof Yo?a.lookAhead:0)<=o.modeFrontier))return e;l=f(l.text,null,t.options.tabSize),(null==r||i>l)&&(r=e-1,i=l)}return r}function xt(t,e){if(t.modeFrontier=Math.min(t.modeFrontier,e),!(t.highlightFrontier<e-10)){for(var n=t.first,i=e-1;i>n;i--){var r=X(t,i).stateAfter;if(r&&(!(r instanceof Yo)||i+r.lookAhead<e)){n=i+1;break}}t.highlightFrontier=Math.min(t.highlightFrontier,n)}}function _t(t,e,n){this.marker=t,this.from=e,this.to=n}function Ct(t,e){if(t)for(var n=0;n<t.length;++n){var i=t[n];if(i.marker==e)return i}}function kt(t,e){if(e.full)return null;var n=et(t,e.from.line)&&X(t,e.from.line).markedSpans,i=et(t,e.to.line)&&X(t,e.to.line).markedSpans;if(!n&&!i)return null;t=e.from.ch;var r,o,s=e.to.ch,l=0==rt(e.from,e.to);if(n)for(var a=0;a<n.length;++a){var h=n[a],c=h.marker;if(null==h.from||(c.inclusiveLeft?h.from<=t:h.from<t)||!(h.from!=t||"bookmark"!=c.type||l&&h.marker.insertLeft)){var u=null==h.to||(c.inclusiveRight?h.to>=t:h.to>t);(r||=[]).push(new _t(c,h.from,u?null:h.to))}}if(n=r,i)for(r=0;r<i.length;++r)h=(a=i[r]).marker,(null==a.to||(h.inclusiveRight?a.to>=s:a.to>s)||a.from==s&&"bookmark"==h.type&&(!l||a.marker.insertLeft))&&(c=null==a.from||(h.inclusiveLeft?a.from<=s:a.from<s),(o||=[]).push(new _t(h,c?null:a.from-s,null==a.to?null:a.to-s)));if(i=1==e.text.length,s=v(e.text).length+(i?t:0),n)for(l=0;l<n.length;++l)null==(r=n[l]).to&&((a=Ct(o,r.marker))?i&&(r.to=null==a.to?null:a.to+s):r.to=t);if(o)for(t=0;t<o.length;++t)null!=(l=o[t]).to&&(l.to+=s),null==l.from?Ct(n,l.marker)||(l.from=s,i&&(n||=[]).push(l)):(l.from+=s,i&&(n||=[]).push(l));if(n&&=St(n),o&&o!=n&&(o=St(o)),t=[n],!i){var d;if(0<(e=e.text.length-2)&&n)for(i=0;i<n.length;++i)null==n[i].to&&(d||=[]).push(new _t(n[i].marker,null,null));for(n=0;n<e;++n)t.push(d);t.push(o)}return t}function St(t){for(var e=0;e<t.length;++e){var n=t[e];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&t.splice(e--,1)}return t.length?t:null}function Lt(t,e,n){var i=null;if(t.iter(e.line,n.line+1,(function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var n=t.markedSpans[e].marker;!n.readOnly||i&&-1!=p(i,n)||(i||=[]).push(n)}})),!i)return null;for(t=[{from:e,to:n}],e=0;e<i.length;++e)for(var r=(n=i[e]).find(0),o=0;o<t.length;++o){var s=t[o];if(!(0>rt(s.to,r.from)||0<rt(s.from,r.to))){var l=[o,1],a=rt(s.from,r.from),h=rt(s.to,r.to);(0>a||!n.inclusiveLeft&&!a)&&l.push({from:s.from,to:r.from}),(0<h||!n.inclusiveRight&&!h)&&l.push({from:r.to,to:s.to}),t.splice.apply(t,l),o+=l.length-3}}return t}function Mt(t){var e=t.markedSpans;if(e){for(var n=0;n<e.length;++n)e[n].marker.detachLine(t);t.markedSpans=null}}function Tt(t,e){if(e){for(var n=0;n<e.length;++n)e[n].marker.attachLine(t);t.markedSpans=e}}function Ot(t,e){var n=t.lines.length-e.lines.length;if(0!=n)return n;n=t.find();var i=e.find(),r=rt(n.from,i.from)||(t.inclusiveLeft?-1:0)-(e.inclusiveLeft?-1:0);return r?-r:(n=rt(n.to,i.to)||(t.inclusiveRight?1:0)-(e.inclusiveRight?1:0))?n:e.id-t.id}function Nt(t,e){if(t=ts&&t.markedSpans)for(var n,i=0;i<t.length;++i)if((n=t[i]).marker.collapsed&&null==(e?n.from:n.to)&&(!r||0>Ot(r,n.marker)))var r=n.marker;return r}function At(t,e,n,i,r){if(t=X(t,e),t=ts&&t.markedSpans)for(e=0;e<t.length;++e){var o=t[e];if(o.marker.collapsed){var s=o.marker.find(0),l=rt(s.from,n)||(o.marker.inclusiveLeft?-1:0)-(r.inclusiveLeft?-1:0),a=rt(s.to,i)||(o.marker.inclusiveRight?1:0)-(r.inclusiveRight?1:0);if(!(0<=l&&0>=a||0>=l&&0<=a)&&(0>=l&&(o.marker.inclusiveRight&&r.inclusiveLeft?0<=rt(s.to,n):0<rt(s.to,n))||0<=l&&(o.marker.inclusiveRight&&r.inclusiveLeft?0>=rt(s.from,i):0>rt(s.from,i))))return!0}}}function Dt(t){for(var e;e=Nt(t,!0);)t=e.find(-1,!0).line;return t}function Et(t,e){var n=Dt(t=X(t,e));return t==n?e:Q(n)}function Wt(t,e){if(e>t.lastLine())return e;var n=X(t,e);if(!Pt(t,n))return e;for(;t=Nt(n,!1);)n=t.find(1,!0).line;return Q(n)+1}function Pt(t,e){var n=ts&&e.markedSpans;if(n)for(var i,r=0;r<n.length;++r)if((i=n[r]).marker.collapsed&&(null==i.from||!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&Ht(t,e,i)))return!0}function Ht(t,e,n){if(null==n.to)return Ht(t,(e=n.marker.find(1,!0)).line,Ct(e.line.markedSpans,n.marker));if(n.marker.inclusiveRight&&n.to==e.text.length)return!0;for(var i,r=0;r<e.markedSpans.length;++r)if((i=e.markedSpans[r]).marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&Ht(t,e,i))return!0}function zt(t){for(var e=0,n=(t=Dt(t)).parent,i=0;i<n.lines.length;++i){var r=n.lines[i];if(r==t)break;e+=r.height}for(t=n.parent;t;t=(n=t).parent)for(i=0;i<t.children.length&&(r=t.children[i])!=n;++i)e+=r.height;return e}function Rt(t){if(0==t.height)return 0;for(var e,n=t.text.length,i=t;e=Nt(i,!0);)i=(e=e.find(0,!0)).from.line,n+=e.from.ch-e.to.ch;for(i=t;e=Nt(i,!1);)t=e.find(0,!0),n-=i.text.length-t.from.ch,n+=(i=t.to.line).text.length-t.to.ch;return n}function It(t){var e=t.display;t=t.doc,e.maxLine=X(t,t.first),e.maxLineLength=Rt(e.maxLine),e.maxLineChanged=!0,t.iter((function(t){var n=Rt(t);n>e.maxLineLength&&(e.maxLineLength=n,e.maxLine=t)}))}function Ft(t,e){return!t||/^\s*$/.test(t)?null:(e=e.addModeClass?rs:is)[t]||(e[t]=t.replace(/\S+/g,"cm-$&"))}function Bt(t,o){var s=r("span",null,null,oo?"padding-right: .1px":null);s={pre:r("pre",[s],"CodeMirror-line"),content:s,col:0,pos:0,cm:t,trailingSpace:!1,splitSpaces:t.getOption("lineWrapping")},o.measure={};for(var l=0;l<=(o.rest?o.rest.length:0);l++){var h=l?o.rest[l-1]:o.line,c=void 0;s.pos=0,s.addToken=$t;var u=t.display.measure;if(null!=To)u=To;else{var d=n(u,document.createTextNode("AخA")),f=ko(d,0,1).getBoundingClientRect();d=ko(d,1,2).getBoundingClientRect(),e(u),u=!(!f||f.left==f.right)&&(To=3>d.right-f.right)}u&&(c=N(h,t.doc.direction))&&(s.addToken=Ut(s.addToken,c)),s.map=[];var p=o!=t.display.externalMeasured&&Q(h);t:{var g=d=f=u=void 0,m=void 0,v=void 0,y=void 0,b=h;c=s,p=dt(t,h,p);var w=b.markedSpans;b=b.text;var x=0;if(w)for(var _=b.length,C=0,k=1,S="",L=0;;){if(L==C){m=g=d=v="",f=u=null,L=1/0;for(var M=[],T=void 0,O=0;O<w.length;++O){var A=w[O],E=A.marker;if("bookmark"==E.type&&A.from==C&&E.widgetNode)M.push(E);else if(A.from<=C&&(null==A.to||A.to>C||E.collapsed&&A.to==C&&A.from==C)){if(null!=A.to&&A.to!=C&&L>A.to&&(L=A.to,g=""),E.className&&(m+=" "+E.className),E.css&&(v=(v?v+";":"")+E.css),E.startStyle&&A.from==C&&(d+=" "+E.startStyle),E.endStyle&&A.to==L&&(T||=[]).push(E.endStyle,A.to),E.title&&((u||={}).title=E.title),E.attributes)for(var W in E.attributes)(u||={})[W]=E.attributes[W];E.collapsed&&(!f||0>Ot(f.marker,E))&&(f=A)}else A.from>C&&L>A.from&&(L=A.from)}if(T)for(O=0;O<T.length;O+=2)T[O+1]==L&&(g+=" "+T[O]);if(!f||f.from==C)for(T=0;T<M.length;++T)Gt(c,0,M[T]);if(f&&(f.from||0)==C){if(Gt(c,(null==f.to?_+1:f.to)-C,f.marker,null==f.from),null==f.to)break t;f.to==C&&(f=!1)}}if(C>=_)break;for(M=Math.min(_,L);;){if(S){if(T=C+S.length,f||(O=T>M?S.slice(0,M-C):S,c.addToken(c,O,y?y+m:m,d,C+O.length==L?g:"",v,u)),T>=M){S=S.slice(M-C),C=M;break}C=T,d=""}S=b.slice(x,x=p[k++]),y=Ft(p[k++],c.cm.options)}}else for(u=1;u<p.length;u+=2)c.addToken(c,b.slice(x,x=p[u]),Ft(p[u+1],c.cm.options))}h.styleClasses&&(h.styleClasses.bgClass&&(s.bgClass=a(h.styleClasses.bgClass,s.bgClass||"")),h.styleClasses.textClass&&(s.textClass=a(h.styleClasses.textClass,s.textClass||""))),0==s.map.length&&(c=(h=s.map).push,f=(u=s.content).appendChild,d=t.display.measure,null==Mo&&(g=i("span","​"),n(d,i("span",[g,document.createTextNode("x")])),0!=d.firstChild.offsetHeight&&(Mo=1>=g.offsetWidth&&2<g.offsetHeight&&!(io&&8>ro))),(d=Mo?i("span","​"):i("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")).setAttribute("cm-text",""),c.call(h,0,0,f.call(u,d))),0==l?(o.measure.map=s.map,o.measure.cache={}):((o.measure.maps||(o.measure.maps=[])).push(s.map),(o.measure.caches||(o.measure.caches=[])).push({}))}return oo&&(W=s.content.lastChild,/\bcm-tab\b/.test(W.className)||W.querySelector&&W.querySelector(".cm-tab"))&&(s.content.className="cm-tab-wrap-hack"),D(t,"renderLine",t,o.line,s.pre),s.pre.className&&(s.textClass=a(s.pre.className,s.textClass||"")),s}function Vt(t){var e=i("span","•","cm-invalidchar");return e.title="\\u"+t.charCodeAt(0).toString(16),e.setAttribute("aria-label",e.title),e}function $t(t,e,n,r,o,s,l){if(e){if(t.splitSpaces){var a=t.trailingSpace;if(1<e.length&&!/  /.test(e))a=e;else{for(var h="",c=0;c<e.length;c++){var u=e.charAt(c);" "!=u||!a||c!=e.length-1&&32!=e.charCodeAt(c+1)||(u=" "),h+=u,a=" "==u}a=h}}else a=e;if(h=a,u=!1,(c=t.cm.state.specialChars).test(e)){a=document.createDocumentFragment();for(var d=0;;){c.lastIndex=d;var f=c.exec(e),p=f?f.index-d:e.length-d;if(p){var g=document.createTextNode(h.slice(d,d+p));io&&9>ro?a.appendChild(i("span",[g])):a.appendChild(g),t.map.push(t.pos,t.pos+p,g),t.col+=p,t.pos+=p}if(!f)break;d+=p+1,"\t"==f[0]?(f=t.cm.options.tabSize,f-=t.col%f,(p=a.appendChild(i("span",m(f),"cm-tab"))).setAttribute("role","presentation"),p.setAttribute("cm-text","\t"),t.col+=f):("\r"==f[0]||"\n"==f[0]?(p=a.appendChild(i("span","\r"==f[0]?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",f[0]):((p=t.cm.options.specialCharPlaceholder(f[0])).setAttribute("cm-text",f[0]),io&&9>ro?a.appendChild(i("span",[p])):a.appendChild(p)),t.col+=1),t.map.push(t.pos,t.pos+1,p),t.pos++}}else t.col+=e.length,a=document.createTextNode(h),t.map.push(t.pos,t.pos+e.length,a),io&&9>ro&&(u=!0),t.pos+=e.length;if(t.trailingSpace=32==h.charCodeAt(e.length-1),n||r||o||u||s||l){if(e=n||"",r&&(e+=r),o&&(e+=o),r=i("span",[a],e,s),l)for(var v in l)l.hasOwnProperty(v)&&"style"!=v&&"class"!=v&&r.setAttribute(v,l[v]);return t.content.appendChild(r)}t.content.appendChild(a)}}function Ut(t,e){return function(n,i,r,o,s,l,a){r=r?r+" cm-force-border":"cm-force-border";for(var h=n.pos,c=h+i.length;;){for(var u=void 0,d=0;d<e.length&&!((u=e[d]).to>h&&u.from<=h);d++);if(u.to>=c)return t(n,i,r,o,s,l,a);t(n,i.slice(0,u.to-h),r,o,null,l,a),o=null,i=i.slice(u.to-h),h=u.to}}}function Gt(t,e,n,i){var r=!i&&n.widgetNode;r&&t.map.push(t.pos,t.pos+e,r),!i&&t.cm.display.input.needsContentAttribute&&(r||=t.content.appendChild(document.createElement("span")),r.setAttribute("cm-marker",n.id)),r&&(t.cm.display.input.setUneditable(r),t.content.appendChild(r)),t.pos+=e,t.trailingSpace=!1}function jt(t,e,n){for(var i,r=this.line=e;r=Nt(r,!1);)r=r.find(1,!0).line,(i||=[]).push(r);this.size=(this.rest=i)?Q(v(this.rest))-n+1:1,this.node=this.text=null,this.hidden=Pt(t,e)}function Kt(t,e,n){var i,r=[];for(i=e;i<n;)i+=(e=new jt(t.doc,X(t.doc,i),i)).size,r.push(e);return r}function qt(t,e){if(t=t.ownsGroup)try{var n=t.delayedCallbacks,i=0;do{for(;i<n.length;i++)n[i].call(null);for(var r=0;r<t.ops.length;r++){var o=t.ops[r];if(o.cursorActivityHandlers)for(;o.cursorActivityCalled<o.cursorActivityHandlers.length;)o.cursorActivityHandlers[o.cursorActivityCalled++].call(null,o.cm)}}while(i<n.length)}finally{os=null,e(t)}}function Xt(t,e){var n=t._handlers&&t._handlers[e]||Io;if(n.length){var i=Array.prototype.slice.call(arguments,2);if(os)var r=os.delayedCallbacks;else ss?r=ss:(r=ss=[],setTimeout(Yt,0));for(var o=function(t){r.push((function(){return n[t].apply(null,i)}))},s=0;s<n.length;++s)o(s)}}function Yt(){var t=ss;ss=null;for(var e=0;e<t.length;++e)t[e]()}function Zt(e,n,i,r){for(var o=0;o<n.changes.length;o++){var s=n.changes[o];if("text"==s){s=e;var l=n,a=l.text.className,h=Qt(s,l);l.text==l.node&&(l.node=h.pre),l.text.parentNode.replaceChild(h.pre,l.text),l.text=h.pre,h.bgClass!=l.bgClass||h.textClass!=l.textClass?(l.bgClass=h.bgClass,l.textClass=h.textClass,te(s,l)):a&&(l.text.className=a)}else if("gutter"==s)ee(e,n,i,r);else if("class"==s)te(e,n);else if("widget"==s){s=e,a=r,(l=n).alignable&&(l.alignable=null),h=t("CodeMirror-linewidget");for(var c,u=l.node.firstChild;u;u=c)c=u.nextSibling,h.test(u.className)&&l.node.removeChild(u);ie(s,l,a)}}n.changes=null}function Jt(t){return t.node==t.text&&(t.node=i("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),io&&8>ro&&(t.node.style.zIndex=2)),t.node}function Qt(t,e){var n=t.display.externalMeasured;return n&&n.line==e.line?(t.display.externalMeasured=null,e.measure=n.measure,n.built):Bt(t,e)}function te(t,e){var n=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),e.background)n?e.background.className=n:(e.background.parentNode.removeChild(e.background),e.background=null);else if(n){var r=Jt(e);e.background=r.insertBefore(i("div",null,n),r.firstChild),t.display.input.setUneditable(e.background)}e.line.wrapClass?Jt(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className=""),e.text.className=(e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass)||""}function ee(t,e,n,r){if(e.gutter&&(e.node.removeChild(e.gutter),e.gutter=null),e.gutterBackground&&(e.node.removeChild(e.gutterBackground),e.gutterBackground=null),e.line.gutterClass){var o=Jt(e);e.gutterBackground=i("div",null,"CodeMirror-gutter-background "+e.line.gutterClass,"left: "+(t.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),t.display.input.setUneditable(e.gutterBackground),o.insertBefore(e.gutterBackground,e.text)}if(o=e.line.gutterMarkers,t.options.lineNumbers||o){var s=Jt(e),l=e.gutter=i("div",null,"CodeMirror-gutter-wrapper","left: "+(t.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(l.setAttribute("aria-hidden","true"),t.display.input.setUneditable(l),s.insertBefore(l,e.text),e.line.gutterClass&&(l.className+=" "+e.line.gutterClass),!t.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(e.lineNumber=l.appendChild(i("div",nt(t.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),o)for(e=0;e<t.display.gutterSpecs.length;++e)n=t.display.gutterSpecs[e].className,(s=o.hasOwnProperty(n)&&o[n])&&l.appendChild(i("div",[s],"CodeMirror-gutter-elt","left: "+r.gutterLeft[n]+"px; width: "+r.gutterWidth[n]+"px"))}}function ne(t,e,n,i){var r=Qt(t,e);return e.text=e.node=r.pre,r.bgClass&&(e.bgClass=r.bgClass),r.textClass&&(e.textClass=r.textClass),te(t,e),ee(t,e,n,i),ie(t,e,i),e.node}function ie(t,e,n){if(re(t,e.line,e,n,!0),e.rest)for(var i=0;i<e.rest.length;i++)re(t,e.rest[i],e,n,!1)}function re(t,e,n,r,o){if(e.widgets){var s=Jt(n),l=0;for(e=e.widgets;l<e.length;++l){var a=e[l],h=i("div",[a.node],"CodeMirror-linewidget"+(a.className?" "+a.className:""));a.handleMouseEvents||h.setAttribute("cm-ignore-events","true");var c=a,u=h,d=n,f=r;c.noHScroll&&((d.alignable||(d.alignable=[])).push(u),d=f.wrapperWidth,u.style.left=f.fixedPos+"px",c.coverGutter||(d-=f.gutterTotalWidth,u.style.paddingLeft=f.gutterTotalWidth+"px"),u.style.width=d+"px"),c.coverGutter&&(u.style.zIndex=5,u.style.position="relative",c.noHScroll||(u.style.marginLeft=-f.gutterTotalWidth+"px")),t.display.input.setUneditable(h),o&&a.above?s.insertBefore(h,n.gutter||n.text):s.appendChild(h),Xt(a,"redraw")}}}function oe(t){if(null!=t.height)return t.height;var e=t.doc.cm;if(!e)return 0;if(!o(document.body,t.node)){var r="position: relative;";t.coverGutter&&(r+="margin-left: -"+e.display.gutters.offsetWidth+"px;"),t.noHScroll&&(r+="width: "+e.display.wrapper.clientWidth+"px;"),n(e.display.measure,i("div",[t.node],null,r))}return t.height=t.node.parentNode.offsetHeight}function se(t,e){for(e=e.target||e.srcElement;e!=t.wrapper;e=e.parentNode)if(!e||1==e.nodeType&&"true"==e.getAttribute("cm-ignore-events")||e.parentNode==t.sizer&&e!=t.mover)return!0}function le(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function ae(t){if(t.cachedPaddingH)return t.cachedPaddingH;var e=n(t.measure,i("pre","x","CodeMirror-line-like"));return e=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,e={left:parseInt(e.paddingLeft),right:parseInt(e.paddingRight)},isNaN(e.left)||isNaN(e.right)||(t.cachedPaddingH=e),e}function he(t){return 50-t.display.nativeBarWidth}function ce(t){return t.display.scroller.clientWidth-he(t)-t.display.barWidth}function ue(t){return t.display.scroller.clientHeight-he(t)-t.display.barHeight}function de(t,e,n){if(t.line==e)return{map:t.measure.map,cache:t.measure.cache};if(t.rest){for(var i=0;i<t.rest.length;i++)if(t.rest[i]==e)return{map:t.measure.maps[i],cache:t.measure.caches[i]};for(e=0;e<t.rest.length;e++)if(Q(t.rest[e])>n)return{map:t.measure.maps[e],cache:t.measure.caches[e],before:!0}}}function fe(t,e){return e>=t.display.viewFrom&&e<t.display.viewTo?t.display.view[$e(t,e)]:(t=t.display.externalMeasured)&&e>=t.lineN&&e<t.lineN+t.size?t:void 0}function pe(t,e){var i=Q(e),r=fe(t,i);if(r&&!r.text?r=null:r&&r.changes&&(Zt(t,r,i,Re(t)),t.curOp.forceUpdate=!0),!r){var o=Dt(e);r=Q(o),(o=t.display.externalMeasured=new jt(t.doc,o,r)).lineN=r,r=o.built=Bt(t,o),o.text=r.pre,n(t.display.lineMeasure,r.pre),r=o}return{line:e,view:r,rect:null,map:(t=de(r,e,i)).map,cache:t.cache,before:t.before,hasHeights:!1}}function ge(t,e,r,o,s){e.before&&(r=-1);var l=r+(o||"");if(e.cache.hasOwnProperty(l))t=e.cache[l];else{if(e.rect||(e.rect=e.view.text.getBoundingClientRect()),!e.hasHeights){var a=e.view,h=e.rect,c=t.options.lineWrapping,u=c&&ce(t);if(!a.measure.heights||c&&a.measure.width!=u){var d=a.measure.heights=[];if(c)for(a.measure.width=u,a=a.text.firstChild.getClientRects(),c=0;c<a.length-1;c++){u=a[c];var f=a[c+1];2<Math.abs(u.bottom-f.bottom)&&d.push((u.bottom+f.top)/2-h.top)}d.push(h.bottom-h.top)}e.hasHeights=!0}if(d=o,o=(a=me(e.map,r,d)).node,h=a.start,c=a.end,r=a.collapse,3==o.nodeType){for(var p=0;4>p;p++){for(;h&&S(e.line.text.charAt(a.coverStart+h));)--h;for(;a.coverStart+c<a.coverEnd&&S(e.line.text.charAt(a.coverStart+c));)++c;if(io&&9>ro&&0==h&&c==a.coverEnd-a.coverStart)var g=o.parentNode.getBoundingClientRect();else{if(g=ko(o,h,c).getClientRects(),c=ls,"left"==d)for(u=0;u<g.length&&(c=g[u]).left==c.right;u++);else for(u=g.length-1;0<=u&&(c=g[u]).left==c.right;u--);g=c}if(g.left||g.right||0==h)break;c=h,--h,r="right"}io&&11>ro&&(p=t.display.measure,(d=!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI)||(null!=Go?p=Go:(p=(d=n(p,i("span","x"))).getBoundingClientRect(),d=ko(d,0,1).getBoundingClientRect(),p=Go=1<Math.abs(p.left-d.left)),d=!p),d||(p=screen.logicalXDPI/screen.deviceXDPI,d=screen.logicalYDPI/screen.deviceYDPI,g={left:g.left*p,right:g.right*p,top:g.top*d,bottom:g.bottom*d}))}else 0<h&&(r=d="right"),g=t.options.lineWrapping&&1<(p=o.getClientRects()).length?p["right"==d?p.length-1:0]:o.getBoundingClientRect();for(!(io&&9>ro)||h||g&&(g.left||g.right)||(g=(g=o.parentNode.getClientRects()[0])?{left:g.left,right:g.left+ze(t.display),top:g.top,bottom:g.bottom}:ls),p=((o=g.top-e.rect.top)+(h=g.bottom-e.rect.top))/2,d=e.view.measure.heights,a=0;a<d.length-1&&!(p<d[a]);a++);r={left:("right"==r?g.right:g.left)-e.rect.left,right:("left"==r?g.left:g.right)-e.rect.left,top:a?d[a-1]:0,bottom:d[a]},g.left||g.right||(r.bogus=!0),t.options.singleCursorHeightPerLine||(r.rtop=o,r.rbottom=h),(t=r).bogus||(e.cache[l]=t)}return{left:t.left,right:t.right,top:s?t.rtop:t.top,bottom:s?t.rbottom:t.bottom}}function me(t,e,n){for(var i,r,o,s,l,a,h=0;h<t.length;h+=3)if(l=t[h],a=t[h+1],e<l?(r=0,o=1,s="left"):e<a?o=1+(r=e-l):(h==t.length-3||e==a&&t[h+3]>e)&&(r=(o=a-l)-1,e>=a&&(s="right")),null!=r){if(i=t[h+2],l==a&&n==(i.insertLeft?"left":"right")&&(s=n),"left"==n&&0==r)for(;h&&t[h-2]==t[h-3]&&t[h-1].insertLeft;)i=t[2+(h-=3)],s="left";if("right"==n&&r==a-l)for(;h<t.length-3&&t[h+3]==t[h+4]&&!t[h+5].insertLeft;)i=t[(h+=3)+2],s="right";break}return{node:i,start:r,end:o,collapse:s,coverStart:l,coverEnd:a}}function ve(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var e=0;e<t.rest.length;e++)t.measure.caches[e]={}}function ye(t){t.display.externalMeasure=null,e(t.display.lineMeasure);for(var n=0;n<t.display.view.length;n++)ve(t.display.view[n])}function be(t){ye(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function we(t){return lo&&go?-(t.body.getBoundingClientRect().left-parseInt(getComputedStyle(t.body).marginLeft)):t.defaultView.pageXOffset||(t.documentElement||t.body).scrollLeft}function xe(t){return lo&&go?-(t.body.getBoundingClientRect().top-parseInt(getComputedStyle(t.body).marginTop)):t.defaultView.pageYOffset||(t.documentElement||t.body).scrollTop}function _e(t){var e=0;if(t=Dt(t).widgets)for(var n=0;n<t.length;++n)t[n].above&&(e+=oe(t[n]));return e}function Ce(t,e,n,i,r){return r||(r=_e(e),n.top+=r,n.bottom+=r),"line"==i||(i||="local",e=zt(e),e="local"==i?e+t.display.lineSpace.offsetTop:e-t.display.viewOffset,"page"!=i&&"window"!=i||(e+=(r=t.display.lineSpace.getBoundingClientRect()).top+("window"==i?0:xe(h(t))),t=r.left+("window"==i?0:we(h(t))),n.left+=t,n.right+=t),n.top+=e,n.bottom+=e),n}function ke(t,e,n){if("div"==n)return e;var i=e.left;return e=e.top,"page"==n?(i-=we(h(t)),e-=xe(h(t))):"local"!=n&&n||(i+=(n=t.display.sizer.getBoundingClientRect()).left,e+=n.top),{left:i-(t=t.display.lineSpace.getBoundingClientRect()).left,top:e-t.top}}function Se(t,e,n,i,r){i||=X(t.doc,e.line);var o=i;return e=e.ch,Ce(t,o,i=ge(t,pe(t,i),e,r),n)}function Le(t,e,n,i,r,o){function s(e,s){return e=ge(t,r,e,s?"right":"left",o),s?e.left=e.right:e.right=e.left,Ce(t,i,e,n)}function l(t,e,n){return s(n?t-1:t,1==a[e].level!=n)}i=i||X(t.doc,e.line),r||=pe(t,i);var a=N(i,t.doc.direction),h=e.ch;if(e=e.sticky,h>=i.text.length?(h=i.text.length,e="before"):0>=h&&(h=0,e="after"),!a)return s("before"==e?h-1:h,"before"==e);var c=O(a,h,e),u=zo;return c=l(h,c,"before"==e),null!=u&&(c.other=l(h,u,"before"!=e)),c}function Me(t,e){var n=0;return e=ht(t.doc,e),t.options.lineWrapping||(n=ze(t.display)*e.ch),{left:n,right:n,top:t=zt(e=X(t.doc,e.line))+t.display.lineSpace.offsetTop,bottom:t+e.height}}function Te(t,e,n,i,r){return(t=it(t,e,n)).xRel=r,i&&(t.outside=i),t}function Oe(t,e,n){var i=t.doc;if(0>(n+=t.display.viewOffset))return Te(i.first,0,null,-1,-1);var r=tt(i,n),o=i.first+i.size-1;if(r>o)return Te(i.first+i.size-1,X(i,o).text.length,null,1,1);0>e&&(e=0);for(var s=X(i,r);;){var l=void 0,a=s;if(s=(o=Ee(t,s,r,e,n)).ch+(0<o.xRel||0<o.outside?1:0),a=ts&&a.markedSpans)for(var h=0;h<a.length;++h){var c=a[h];c.marker.collapsed&&(null==c.from||c.from<s)&&(null==c.to||c.to>s)&&(!l||0>Ot(l,c.marker))&&(l=c.marker)}if(!l)return o;if((o=l.find(1)).line==r)return o;s=X(i,r=o.line)}}function Ne(t,e,n,i){i-=_e(e);var r=M((function(e){return ge(t,n,e-1).bottom<=i}),e=e.text.length,0);return{begin:r,end:e=M((function(e){return ge(t,n,e).top>i}),r,e)}}function Ae(t,e,n,i){return n||=pe(t,e),Ne(t,e,n,i=Ce(t,e,ge(t,n,i),"line").top)}function De(t,e,n,i){return!(t.bottom<=n)&&(t.top>n||(i?t.left:t.right)>e)}function Ee(t,e,n,i,r){r-=zt(e);var o=pe(t,e),s=_e(e),l=0,a=e.text.length,h=!0,c=N(e,t.doc.direction);c&&(l=(h=1!=(c=(t.options.lineWrapping?Pe:We)(t,e,n,o,c,i,r)).level)?c.from:c.to-1,a=h?c.to:c.from-1);var u=null,d=null;c=M((function(e){var n=ge(t,o,e);return n.top+=s,n.bottom+=s,!!De(n,i,r,!1)&&(n.top<=r&&n.left<=i&&(u=e,d=n),!0)}),l,a);var f=!1;return d?(l=i-d.left<d.right-i,c=u+((h=l==h)?0:1),h=h?"after":"before",l=l?d.left:d.right):(h||c!=a&&c!=l||c++,h=0==c?"after":c==e.text.length?"before":ge(t,o,c-(h?1:0)).bottom+s<=r==h?"after":"before",l=(f=Le(t,it(n,c,h),"line",e,o)).left,f=r<f.top?-1:r>=f.bottom?1:0),Te(n,c=L(e.text,c,1),h,f,i-l)}function We(t,e,n,i,r,o,s){var l=M((function(l){var a=1!=(l=r[l]).level;return De(Le(t,it(n,a?l.to:l.from,a?"before":"after"),"line",e,i),o,s,!0)}),0,r.length-1),a=r[l];if(0<l){var h=1!=a.level;De(h=Le(t,it(n,h?a.from:a.to,h?"after":"before"),"line",e,i),o,s,!0)&&h.top>s&&(a=r[l-1])}return a}function Pe(t,e,n,i,r,o,s){n=(s=Ne(t,e,i,s)).begin,s=s.end,/\s/.test(e.text.charAt(s-1))&&s--;for(var l=e=null,a=0;a<r.length;a++){var h=r[a];if(!(h.from>=s||h.to<=n)){var c=ge(t,i,1!=h.level?Math.min(s,h.to)-1:Math.max(n,h.from)).right;c=c<o?o-c+1e9:c-o,(!e||l>c)&&(e=h,l=c)}}return e||=r[r.length-1],e.from<n&&(e={from:n,to:e.to,level:e.level}),e.to>s&&(e={from:e.from,to:s,level:e.level}),e}function He(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==ns){ns=i("pre",null,"CodeMirror-line-like");for(var r=0;49>r;++r)ns.appendChild(document.createTextNode("x")),ns.appendChild(i("br"));ns.appendChild(document.createTextNode("x"))}return n(t.measure,ns),3<(r=ns.offsetHeight/50)&&(t.cachedTextHeight=r),e(t.measure),r||1}function ze(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=i("span","xxxxxxxxxx"),r=i("pre",[e],"CodeMirror-line-like");return n(t.measure,r),2<(e=((e=e.getBoundingClientRect()).right-e.left)/10)&&(t.cachedCharWidth=e),e||10}function Re(t){for(var e=t.display,n={},i={},r=e.gutters.clientLeft,o=e.gutters.firstChild,s=0;o;o=o.nextSibling,++s){var l=t.display.gutterSpecs[s].className;n[l]=o.offsetLeft+o.clientLeft+r,i[l]=o.clientWidth}return{fixedPos:Ie(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:e.wrapper.clientWidth}}function Ie(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function Fe(t){var e=He(t.display),n=t.options.lineWrapping,i=n&&Math.max(5,t.display.scroller.clientWidth/ze(t.display)-3);return function(r){if(Pt(t.doc,r))return 0;var o=0;if(r.widgets)for(var s=0;s<r.widgets.length;s++)r.widgets[s].height&&(o+=r.widgets[s].height);return n?o+(Math.ceil(r.text.length/i)||1)*e:o+e}}function Be(t){var e=t.doc,n=Fe(t);e.iter((function(t){var e=n(t);e!=t.height&&J(t,e)}))}function Ve(t,e,n,i){var r,o=t.display;if(!n&&"true"==(e.target||e.srcElement).getAttribute("cm-not-content"))return null;n=o.lineSpace.getBoundingClientRect();try{var s=e.clientX-n.left,l=e.clientY-n.top}catch(t){return null}return e=Oe(t,s,l),i&&0<e.xRel&&(r=X(t.doc,e.line).text).length==e.ch&&(i=f(r,r.length,t.options.tabSize)-r.length,e=it(e.line,Math.max(0,Math.round((s-ae(t.display).left)/ze(t.display))-i))),e}function $e(t,e){if(e>=t.display.viewTo)return null;if(0>(e-=t.display.viewFrom))return null;t=t.display.view;for(var n=0;n<t.length;n++)if(0>(e-=t[n].size))return n}function Ue(t,e,n,i){null==e&&(e=t.doc.first),null==n&&(n=t.doc.first+t.doc.size),i||=0;var r=t.display;if(i&&n<r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>e)&&(r.updateLineNumbers=e),t.curOp.viewChanged=!0,e>=r.viewTo)ts&&Et(t.doc,e)<r.viewTo&&je(t);else if(n<=r.viewFrom)ts&&Wt(t.doc,n+i)>r.viewFrom?je(t):(r.viewFrom+=i,r.viewTo+=i);else if(e<=r.viewFrom&&n>=r.viewTo)je(t);else if(e<=r.viewFrom){var o=Ke(t,n,n+i,1);o?(r.view=r.view.slice(o.index),r.viewFrom=o.lineN,r.viewTo+=i):je(t)}else if(n>=r.viewTo)(o=Ke(t,e,e,-1))?(r.view=r.view.slice(0,o.index),r.viewTo=o.lineN):je(t);else{o=Ke(t,e,e,-1);var s=Ke(t,n,n+i,1);o&&s?(r.view=r.view.slice(0,o.index).concat(Kt(t,o.lineN,s.lineN)).concat(r.view.slice(s.index)),r.viewTo+=i):je(t)}(t=r.externalMeasured)&&(n<t.lineN?t.lineN+=i:e<t.lineN+t.size&&(r.externalMeasured=null))}function Ge(t,e,n){t.curOp.viewChanged=!0;var i=t.display,r=t.display.externalMeasured;r&&e>=r.lineN&&e<r.lineN+r.size&&(i.externalMeasured=null),e<i.viewFrom||e>=i.viewTo||null!=(t=i.view[$e(t,e)]).node&&-1==p(t=t.changes||(t.changes=[]),n)&&t.push(n)}function je(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function Ke(t,e,n,i){var r=$e(t,e),o=t.display.view;if(!ts||n==t.doc.first+t.doc.size)return{index:r,lineN:n};for(var s=t.display.viewFrom,l=0;l<r;l++)s+=o[l].size;if(s!=e){if(0<i){if(r==o.length-1)return null;e=s+o[r].size-e,r++}else e=s-e;n+=e}for(;Et(t.doc,n)!=n;){if(r==(0>i?0:o.length-1))return null;n+=i*o[r-(0>i?1:0)].size,r+=i}return{index:r,lineN:n}}function qe(t){t=t.display.view;for(var e=0,n=0;n<t.length;n++){var i=t[n];i.hidden||i.node&&!i.changes||++e}return e}function Xe(t){t.display.input.showSelection(t.display.input.prepareSelection())}function Ye(t,e){void 0===e&&(e=!0);var n=t.doc,i={},r=i.cursors=document.createDocumentFragment(),o=i.selection=document.createDocumentFragment(),s=t.options.$customCursor;s&&(e=!0);for(var l=0;l<n.sel.ranges.length;l++)if(e||l!=n.sel.primIndex){var a=n.sel.ranges[l];if(!(a.from().line>=t.display.viewTo||a.to().line<t.display.viewFrom)){var h=a.empty();if(s){var c=s(t,a);c&&Ze(t,c,r)}else(h||t.options.showCursorWhenSelecting)&&Ze(t,a.head,r);h||Qe(t,a,o)}}return i}function Ze(t,e,n){var r=Le(t,e,"div",null,null,!t.options.singleCursorHeightPerLine),o=n.appendChild(i("div"," ","CodeMirror-cursor"));o.style.left=r.left+"px",o.style.top=r.top+"px",o.style.height=Math.max(0,r.bottom-r.top)*t.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(t.getWrapperElement().className)&&(e=(e=Se(t,e,"div",null,null)).right-e.left,o.style.width=(0<e?e:t.defaultCharWidth())+"px"),r.other&&((t=n.appendChild(i("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"))).style.display="",t.style.left=r.other.left+"px",t.style.top=r.other.top+"px",t.style.height=.85*(r.other.bottom-r.other.top)+"px")}function Je(t,e){return t.top-e.top||t.left-e.left}function Qe(t,e,n){function r(t,e,n,r){0>e&&(e=0),e=Math.round(e),r=Math.round(r),a.appendChild(i("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px;\n                             top: "+e+"px; width: "+(null==n?u-t:n)+"px;\n                             height: "+(r-e)+"px"))}function o(e,n,i){function o(n,i){return Se(t,it(e,n),"div",f,i)}function s(e,n,i){return e=Ae(t,f,null,e),n="ltr"==n==("after"==i)?"left":"right",o(i="after"==i?e.begin:e.end-(/\s/.test(f.text.charAt(e.end-1))?2:1),n)[n]}var a,h,f=X(l,e),p=f.text.length,g=N(f,l.direction);return T(g,n||0,null==i?p:i,(function(t,e,l,f){var m="ltr"==l,v=o(t,m?"left":"right"),y=o(e-1,m?"right":"left"),b=null==n&&0==t,w=null==i&&e==p,x=0==f;f=!g||f==g.length-1,3>=y.top-v.top?r(e=(d?b:w)&&x?c:(m?v:y).left,v.top,((d?w:b)&&f?u:(m?y:v).right)-e,v.bottom):(m?(m=d&&b&&x?c:v.left,b=d?u:s(t,l,"before"),t=d?c:s(e,l,"after"),w=d&&w&&f?u:y.right):(m=d?s(t,l,"before"):c,b=!d&&b&&x?u:v.right,t=!d&&w&&f?c:y.left,w=d?s(e,l,"after"):u),r(m,v.top,b-m,v.bottom),v.bottom<y.top&&r(c,v.bottom,null,y.top),r(t,y.top,w-t,y.bottom)),(!a||0>Je(v,a))&&(a=v),0>Je(y,a)&&(a=y),(!h||0>Je(v,h))&&(h=v),0>Je(y,h)&&(h=y)})),{start:a,end:h}}var s=t.display,l=t.doc,a=document.createDocumentFragment(),h=ae(t.display),c=h.left,u=Math.max(s.sizerWidth,ce(t)-s.sizer.offsetLeft)-h.right,d="ltr"==l.direction;if(s=e.from(),e=e.to(),s.line==e.line)o(s.line,s.ch,e.ch);else{var f=X(l,s.line);h=X(l,e.line),h=Dt(f)==Dt(h),s=o(s.line,s.ch,h?f.text.length+1:null).end,e=o(e.line,h?0:null,e.ch).start,h&&(s.top<e.top-2?(r(s.right,s.top,null,s.bottom),r(c,e.top,e.left,e.bottom)):r(s.right,s.top,e.left-s.right,s.bottom)),s.bottom<e.top&&r(c,s.bottom,null,e.top)}n.appendChild(a)}function tn(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var n=!0;e.cursorDiv.style.visibility="",0<t.options.cursorBlinkRate?e.blinker=setInterval((function(){t.hasFocus()||on(t),e.cursorDiv.style.visibility=(n=!n)?"":"hidden"}),t.options.cursorBlinkRate):0>t.options.cursorBlinkRate&&(e.cursorDiv.style.visibility="hidden")}}function en(t){t.hasFocus()||(t.display.input.focus(),t.state.focused||rn(t))}function nn(t){t.state.delayingBlurEvent=!0,setTimeout((function(){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1,t.state.focused&&on(t))}),100)}function rn(t,e){t.state.delayingBlurEvent&&!t.state.draggingText&&(t.state.delayingBlurEvent=!1),"nocursor"!=t.options.readOnly&&(t.state.focused||(D(t,"focus",t,e),t.state.focused=!0,l(t.display.wrapper,"CodeMirror-focused"),t.curOp||t.display.selForContextMenu==t.doc.sel||(t.display.input.reset(),oo&&setTimeout((function(){return t.display.input.reset(!0)}),20)),t.display.input.receivedFocus()),tn(t))}function on(t,e){t.state.delayingBlurEvent||(t.state.focused&&(D(t,"blur",t,e),t.state.focused=!1,Co(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout((function(){t.state.focused||(t.display.shift=!1)}),150))}function sn(t){for(var e=t.display,n=e.lineDiv.offsetTop,i=Math.max(0,e.scroller.getBoundingClientRect().top),r=e.lineDiv.getBoundingClientRect().top,o=0,s=0;s<e.view.length;s++){var l=e.view[s],a=t.options.lineWrapping,h=0;if(!l.hidden){if(r+=l.line.height,io&&8>ro){var c=(a=l.node.offsetTop+l.node.offsetHeight)-n;n=a}else{var u=l.node.getBoundingClientRect();c=u.bottom-u.top,!a&&l.text.firstChild&&(h=l.text.firstChild.getBoundingClientRect().right-u.left-1)}if((.005<(a=l.line.height-c)||-.005>a)&&(r<i&&(o-=a),J(l.line,c),ln(l.line),l.rest))for(c=0;c<l.rest.length;c++)ln(l.rest[c]);h>t.display.sizerWidth&&(h=Math.ceil(h/ze(t.display)))>t.display.maxLineLength&&(t.display.maxLineLength=h,t.display.maxLine=l.line,t.display.maxLineChanged=!0)}}2<Math.abs(o)&&(e.scroller.scrollTop+=o)}function ln(t){if(t.widgets)for(var e=0;e<t.widgets.length;++e){var n=t.widgets[e],i=n.node.parentNode;i&&(n.height=i.offsetHeight)}}function an(t,e,n){var i=n&&null!=n.top?Math.max(0,n.top):t.scroller.scrollTop;i=Math.floor(i-t.lineSpace.offsetTop);var r=n&&null!=n.bottom?n.bottom:i+t.wrapper.clientHeight;if(i=tt(e,i),r=tt(e,r),n&&n.ensure){var o=n.ensure.from.line;n=n.ensure.to.line,o<i?(i=o,r=tt(e,zt(X(e,o))+t.wrapper.clientHeight)):Math.min(n,e.lastLine())>=r&&(i=tt(e,zt(X(e,n))-t.wrapper.clientHeight),r=n)}return{from:i,to:Math.max(r,i+1)}}function hn(t,e){var n=t.display,i=He(t.display);0>e.top&&(e.top=0);var r=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:n.scroller.scrollTop,o=ue(t),s={};e.bottom-e.top>o&&(e.bottom=e.top+o);var l=t.doc.height+le(n),a=e.top<i;return i=e.bottom>l-i,e.top<r?s.scrollTop=a?0:e.top:e.bottom>r+o&&(o=Math.min(e.top,(i?l:e.bottom)-o))!=r&&(s.scrollTop=o),r=t.options.fixedGutter?0:n.gutters.offsetWidth,o=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:n.scroller.scrollLeft-r,t=ce(t)-n.gutters.offsetWidth,(n=e.right-e.left>t)&&(e.right=e.left+t),10>e.left?s.scrollLeft=0:e.left<o?s.scrollLeft=Math.max(0,e.left+r-(n?0:10)):e.right>t+o-3&&(s.scrollLeft=e.right+(n?0:10)-t),s}function cn(t,e){null!=e&&(fn(t),t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+e)}function un(t){fn(t);var e=t.getCursor();t.curOp.scrollToPos={from:e,to:e,margin:t.options.cursorScrollMargin}}function dn(t,e,n){null==e&&null==n||fn(t),null!=e&&(t.curOp.scrollLeft=e),null!=n&&(t.curOp.scrollTop=n)}function fn(t){var e=t.curOp.scrollToPos;e&&(t.curOp.scrollToPos=null,pn(t,Me(t,e.from),Me(t,e.to),e.margin))}function pn(t,e,n,i){dn(t,(e=hn(t,{left:Math.min(e.left,n.left),top:Math.min(e.top,n.top)-i,right:Math.max(e.right,n.right),bottom:Math.max(e.bottom,n.bottom)+i})).scrollLeft,e.scrollTop)}function gn(t,e){2>Math.abs(t.doc.scrollTop-e)||(Qr||Dn(t,{top:e}),mn(t,e,!0),Qr&&Dn(t),Tn(t,100))}function mn(t,e,n){e=Math.max(0,Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,e)),(t.display.scroller.scrollTop!=e||n)&&(t.doc.scrollTop=e,t.display.scrollbars.setScrollTop(e),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e))}function vn(t,e,n,i){e=Math.max(0,Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth)),(n?e==t.doc.scrollLeft:2>Math.abs(t.doc.scrollLeft-e))&&!i||(t.doc.scrollLeft=e,Hn(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbars.setScrollLeft(e))}function yn(t){var e=t.display,n=e.gutters.offsetWidth,i=Math.round(t.doc.height+le(t.display));return{clientHeight:e.scroller.clientHeight,viewHeight:e.wrapper.clientHeight,scrollWidth:e.scroller.scrollWidth,clientWidth:e.scroller.clientWidth,viewWidth:e.wrapper.clientWidth,barLeft:t.options.fixedGutter?n:0,docHeight:i,scrollHeight:i+he(t)+e.barHeight,nativeBarWidth:e.nativeBarWidth,gutterWidth:n}}function bn(t,e){e||=yn(t);var n=t.display.barWidth,i=t.display.barHeight;for(wn(t,e),e=0;4>e&&n!=t.display.barWidth||i!=t.display.barHeight;e++)n!=t.display.barWidth&&t.options.lineWrapping&&sn(t),wn(t,yn(t)),n=t.display.barWidth,i=t.display.barHeight}function wn(t,e){var n=t.display,i=n.scrollbars.update(e);n.sizer.style.paddingRight=(n.barWidth=i.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=i.bottom)+"px",n.heightForcer.style.borderBottom=i.bottom+"px solid transparent",i.right&&i.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=i.bottom+"px",n.scrollbarFiller.style.width=i.right+"px"):n.scrollbarFiller.style.display="",i.bottom&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=i.bottom+"px",n.gutterFiller.style.width=e.gutterWidth+"px"):n.gutterFiller.style.display=""}function xn(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&Co(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new cs[t.options.scrollbarStyle]((function(e){t.display.wrapper.insertBefore(e,t.display.scrollbarFiller),Fo(e,"mousedown",(function(){t.state.focused&&setTimeout((function(){return t.display.input.focus()}),0)})),e.setAttribute("cm-not-content","true")}),(function(e,n){"horizontal"==n?vn(t,e):gn(t,e)}),t),t.display.scrollbars.addClass&&l(t.display.wrapper,t.display.scrollbars.addClass)}function _n(t){t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++us,markArrays:null},t=t.curOp,os?os.ops.push(t):t.ownsGroup=os={ops:[t],delayedCallbacks:[]}}function Cn(t){(t=t.curOp)&&qt(t,(function(t){for(var e=0;e<t.ops.length;e++)t.ops[e].cm.curOp=null;for(t=t.ops,e=0;e<t.length;e++){var n=t[e],r=n.cm,o=r.display,l=r.display;!l.scrollbarsClipped&&l.scroller.offsetWidth&&(l.nativeBarWidth=l.scroller.offsetWidth-l.scroller.clientWidth,l.heightForcer.style.height=he(r)+"px",l.sizer.style.marginBottom=-l.nativeBarWidth+"px",l.sizer.style.borderRightWidth=he(r)+"px",l.scrollbarsClipped=!0),n.updateMaxLine&&It(r),n.mustUpdate=n.viewChanged||n.forceUpdate||null!=n.scrollTop||n.scrollToPos&&(n.scrollToPos.from.line<o.viewFrom||n.scrollToPos.to.line>=o.viewTo)||o.maxLineChanged&&r.options.lineWrapping,n.update=n.mustUpdate&&new ds(r,n.mustUpdate&&{top:n.scrollTop,ensure:n.scrollToPos},n.forceUpdate)}for(e=0;e<t.length;e++)(n=t[e]).updatedDisplay=n.mustUpdate&&Nn(n.cm,n.update);for(e=0;e<t.length;e++)o=(r=(n=t[e]).cm).display,n.updatedDisplay&&sn(r),n.barMeasure=yn(r),o.maxLineChanged&&!r.options.lineWrapping&&(l=o.maxLine.text.length,l=ge(r,pe(r,o.maxLine),l,void 0),n.adjustWidthTo=l.left+3,r.display.sizerWidth=n.adjustWidthTo,n.barMeasure.scrollWidth=Math.max(o.scroller.clientWidth,o.sizer.offsetLeft+n.adjustWidthTo+he(r)+r.display.barWidth),n.maxScrollLeft=Math.max(0,o.sizer.offsetLeft+n.adjustWidthTo-ce(r))),(n.updatedDisplay||n.selectionChanged)&&(n.preparedSelection=o.input.prepareSelection());for(e=0;e<t.length;e++)r=(n=t[e]).cm,null!=n.adjustWidthTo&&(r.display.sizer.style.minWidth=n.adjustWidthTo+"px",n.maxScrollLeft<r.doc.scrollLeft&&vn(r,Math.min(r.display.scroller.scrollLeft,n.maxScrollLeft),!0),r.display.maxLineChanged=!1),o=n.focus&&n.focus==s(c(r.display.wrapper)),n.preparedSelection&&r.display.input.showSelection(n.preparedSelection,o),(n.updatedDisplay||n.startHeight!=r.doc.height)&&bn(r,n.barMeasure),n.updatedDisplay&&Pn(r,n.barMeasure),n.selectionChanged&&tn(r),r.state.focused&&n.updateInput&&r.display.input.reset(n.typing),o&&en(n.cm);for(e=0;e<t.length;e++){var a=void 0;if(o=(r=(n=t[e]).cm).display,l=r.doc,n.updatedDisplay&&An(r,n.update),null==o.wheelStartX||null==n.scrollTop&&null==n.scrollLeft&&!n.scrollToPos||(o.wheelStartX=o.wheelStartY=null),null!=n.scrollTop&&mn(r,n.scrollTop,n.forceScroll),null!=n.scrollLeft&&vn(r,n.scrollLeft,!0,!0),n.scrollToPos){var h=ht(l,n.scrollToPos.from),u=ht(l,n.scrollToPos.to),d=n.scrollToPos.margin;null==d&&(d=0),r.options.lineWrapping||h!=u||(u="before"==h.sticky?it(h.line,h.ch+1,"before"):h,h=h.ch?it(h.line,"before"==h.sticky?h.ch-1:h.ch,"after"):h);for(var f=0;5>f;f++){var p=!1;a=Le(r,h);var g=u&&u!=h?Le(r,u):a;g=hn(r,a={left:Math.min(a.left,g.left),top:Math.min(a.top,g.top)-d,right:Math.max(a.left,g.left),bottom:Math.max(a.bottom,g.bottom)+d});var m=r.doc.scrollTop,v=r.doc.scrollLeft;if(null!=g.scrollTop&&(gn(r,g.scrollTop),1<Math.abs(r.doc.scrollTop-m)&&(p=!0)),null!=g.scrollLeft&&(vn(r,g.scrollLeft),1<Math.abs(r.doc.scrollLeft-v)&&(p=!0)),!p)break}u=a,E(r,"scrollCursorIntoView")||(f=(d=r.display).sizer.getBoundingClientRect(),h=null,p=d.wrapper.ownerDocument,0>u.top+f.top?h=!0:u.bottom+f.top>(p.defaultView.innerHeight||p.documentElement.clientHeight)&&(h=!1),null==h||fo||(u=i("div","​",null,"position: absolute;\n                         top: "+(u.top-d.viewOffset-r.display.lineSpace.offsetTop)+"px;\n                         height: "+(u.bottom-u.top+he(r)+d.barHeight)+"px;\n                         left: "+u.left+"px; width: "+Math.max(2,u.right-u.left)+"px;"),r.display.lineSpace.appendChild(u),u.scrollIntoView(h),r.display.lineSpace.removeChild(u)))}if(u=n.maybeHiddenMarkers,h=n.maybeUnhiddenMarkers,u)for(d=0;d<u.length;++d)u[d].lines.length||D(u[d],"hide");if(h)for(u=0;u<h.length;++u)h[u].lines.length&&D(h[u],"unhide");o.wrapper.offsetHeight&&(l.scrollTop=r.display.scroller.scrollTop),n.changeObjs&&D(r,"changes",r,n.changeObjs),n.update&&n.update.finish()}}))}function kn(t,e){if(t.curOp)return e();_n(t);try{return e()}finally{Cn(t)}}function Sn(t,e){return function(){if(t.curOp)return e.apply(t,arguments);_n(t);try{return e.apply(t,arguments)}finally{Cn(t)}}}function Ln(t){return function(){if(this.curOp)return t.apply(this,arguments);_n(this);try{return t.apply(this,arguments)}finally{Cn(this)}}}function Mn(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);_n(e);try{return t.apply(this,arguments)}finally{Cn(e)}}}function Tn(t,e){t.doc.highlightFrontier<t.display.viewTo&&t.state.highlight.set(e,u(On,t))}function On(t){var e=t.doc;if(!(e.highlightFrontier>=t.display.viewTo)){var n=+new Date+t.options.workTime,i=ft(t,e.highlightFrontier),r=[];e.iter(i.line,Math.min(e.first+e.size,t.display.viewTo+500),(function(o){if(i.line>=t.display.viewFrom){var s=o.styles,l=o.text.length>t.options.maxHighlightLength?j(e.mode,i.state):null,a=ut(t,o,i,!0);for(l&&(i.state=l),o.styles=a.styles,l=o.styleClasses,(a=a.classes)?o.styleClasses=a:l&&(o.styleClasses=null),a=!s||s.length!=o.styles.length||l!=a&&(!l||!a||l.bgClass!=a.bgClass||l.textClass!=a.textClass),l=0;!a&&l<s.length;++l)a=s[l]!=o.styles[l];a&&r.push(i.line),o.stateAfter=i.save()}else o.text.length<=t.options.maxHighlightLength&&pt(t,o.text,i),o.stateAfter=0==i.line%5?i.save():null;if(i.nextLine(),+new Date>n)return Tn(t,t.options.workDelay),!0})),e.highlightFrontier=i.line,e.modeFrontier=Math.max(e.modeFrontier,i.line),r.length&&kn(t,(function(){for(var e=0;e<r.length;e++)Ge(t,r[e],"text")}))}}function Nn(t,n){var i=t.display,r=t.doc;if(n.editorIsHidden)return je(t),!1;if(!n.force&&n.visible.from>=i.viewFrom&&n.visible.to<=i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo)&&i.renderedView==i.view&&0==qe(t))return!1;zn(t)&&(je(t),n.dims=Re(t));var l=r.first+r.size,a=Math.max(n.visible.from-t.options.viewportMargin,r.first),u=Math.min(l,n.visible.to+t.options.viewportMargin);return i.viewFrom<a&&20>a-i.viewFrom&&(a=Math.max(r.first,i.viewFrom)),i.viewTo>u&&20>i.viewTo-u&&(u=Math.min(l,i.viewTo)),ts&&(a=Et(t.doc,a),u=Wt(t.doc,u)),r=a!=i.viewFrom||u!=i.viewTo||i.lastWrapHeight!=n.wrapperHeight||i.lastWrapWidth!=n.wrapperWidth,0==(l=t.display).view.length||a>=l.viewTo||u<=l.viewFrom?(l.view=Kt(t,a,u),l.viewFrom=a):(l.viewFrom>a?l.view=Kt(t,a,l.viewFrom).concat(l.view):l.viewFrom<a&&(l.view=l.view.slice($e(t,a))),l.viewFrom=a,l.viewTo<u?l.view=l.view.concat(Kt(t,l.viewTo,u)):l.viewTo>u&&(l.view=l.view.slice(0,$e(t,u)))),l.viewTo=u,i.viewOffset=zt(X(t.doc,i.viewFrom)),t.display.mover.style.top=i.viewOffset+"px",u=qe(t),!(!r&&0==u&&!n.force&&i.renderedView==i.view&&(null==i.updateLineNumbers||i.updateLineNumbers>=i.viewTo)||(t.hasFocus()?a=null:(a=s(c(t.display.wrapper)))&&o(t.display.lineDiv,a)?(a={activeElt:a},window.getSelection&&(l=h(t).defaultView.getSelection()).anchorNode&&l.extend&&o(t.display.lineDiv,l.anchorNode)&&(a.anchorNode=l.anchorNode,a.anchorOffset=l.anchorOffset,a.focusNode=l.focusNode,a.focusOffset=l.focusOffset)):a=null,4<u&&(i.lineDiv.style.display="none"),En(t,i.updateLineNumbers,n.dims),4<u&&(i.lineDiv.style.display=""),i.renderedView=i.view,(u=a)&&u.activeElt&&u.activeElt!=s(c(u.activeElt))&&(u.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(u.activeElt.nodeName)&&u.anchorNode&&o(document.body,u.anchorNode)&&o(document.body,u.focusNode)&&(a=(l=u.activeElt.ownerDocument).defaultView.getSelection(),(l=l.createRange()).setEnd(u.anchorNode,u.anchorOffset),l.collapse(!1),a.removeAllRanges(),a.addRange(l),a.extend(u.focusNode,u.focusOffset))),e(i.cursorDiv),e(i.selectionDiv),i.gutters.style.height=i.sizer.style.minHeight=0,r&&(i.lastWrapHeight=n.wrapperHeight,i.lastWrapWidth=n.wrapperWidth,Tn(t,400)),i.updateLineNumbers=null,0))}function An(t,e){for(var n=e.viewport,i=!0;;i=!1){if(i&&t.options.lineWrapping&&e.oldDisplayWidth!=ce(t))i&&(e.visible=an(t.display,t.doc,n));else if(n&&null!=n.top&&(n={top:Math.min(t.doc.height+le(t.display)-ue(t),n.top)}),e.visible=an(t.display,t.doc,n),e.visible.from>=t.display.viewFrom&&e.visible.to<=t.display.viewTo)break;if(!Nn(t,e))break;sn(t),i=yn(t),Xe(t),bn(t,i),Pn(t,i),e.force=!1}e.signal(t,"update",t),t.display.viewFrom==t.display.reportedViewFrom&&t.display.viewTo==t.display.reportedViewTo||(e.signal(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo),t.display.reportedViewFrom=t.display.viewFrom,t.display.reportedViewTo=t.display.viewTo)}function Dn(t,e){if(Nn(t,e=new ds(t,e))){sn(t),An(t,e);var n=yn(t);Xe(t),bn(t,n),Pn(t,n),e.finish()}}function En(t,n,i){function r(e){var n=e.nextSibling;return oo&&vo&&t.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),n}var o=t.display,s=t.options.lineNumbers,l=o.lineDiv,a=l.firstChild,h=o.view;o=o.viewFrom;for(var c=0;c<h.length;c++){var u=h[c];if(!u.hidden)if(u.node&&u.node.parentNode==l){for(;a!=u.node;)a=r(a);a=s&&null!=n&&n<=o&&u.lineNumber,u.changes&&(-1<p(u.changes,"gutter")&&(a=!1),Zt(t,u,o,i)),a&&(e(u.lineNumber),u.lineNumber.appendChild(document.createTextNode(nt(t.options,o)))),a=u.node.nextSibling}else{var d=ne(t,u,o,i);l.insertBefore(d,a)}o+=u.size}for(;a;)a=r(a)}function Wn(t){t.sizer.style.marginLeft=t.gutters.offsetWidth+"px",Xt(t,"gutterChanged",t)}function Pn(t,e){t.display.sizer.style.minHeight=e.docHeight+"px",t.display.heightForcer.style.top=e.docHeight+"px",t.display.gutters.style.height=e.docHeight+t.display.barHeight+he(t)+"px"}function Hn(t){var e=t.display,n=e.view;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var i=Ie(e)-e.scroller.scrollLeft+t.doc.scrollLeft,r=e.gutters.offsetWidth,o=i+"px",s=0;s<n.length;s++)if(!n[s].hidden){t.options.fixedGutter&&(n[s].gutter&&(n[s].gutter.style.left=o),n[s].gutterBackground&&(n[s].gutterBackground.style.left=o));var l=n[s].alignable;if(l)for(var a=0;a<l.length;a++)l[a].style.left=o}t.options.fixedGutter&&(e.gutters.style.left=i+r+"px")}}function zn(t){if(!t.options.lineNumbers)return!1;var e=t.doc;e=nt(t.options,e.first+e.size-1);var n=t.display;if(e.length!=n.lineNumChars){var r=n.measure.appendChild(i("div",[i("div",e)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=r.firstChild.offsetWidth;return r=r.offsetWidth-o,n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(o,n.lineGutter.offsetWidth-r)+1,n.lineNumWidth=n.lineNumInnerWidth+r,n.lineNumChars=n.lineNumInnerWidth?e.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",Wn(t.display),!0}return!1}function Rn(t,e){for(var n=[],i=!1,r=0;r<t.length;r++){var o=t[r],s=null;if("string"!=typeof o&&(s=o.style,o=o.className),"CodeMirror-linenumbers"==o){if(!e)continue;i=!0}n.push({className:o,style:s})}return e&&!i&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function In(t){var n=t.gutters,r=t.gutterSpecs;e(n),t.lineGutter=null;for(var o=0;o<r.length;++o){var s=r[o],l=s.className;s=s.style;var a=n.appendChild(i("div",null,"CodeMirror-gutter "+l));s&&(a.style.cssText=s),"CodeMirror-linenumbers"==l&&(t.lineGutter=a,a.style.width=(t.lineNumWidth||1)+"px")}n.style.display=r.length?"":"none",Wn(t)}function Fn(t){In(t.display),Ue(t),Hn(t)}function Bn(t,e,n,o){this.input=n,this.scrollbarFiller=i("div",null,"CodeMirror-scrollbar-filler"),this.scrollbarFiller.setAttribute("cm-not-content","true"),this.gutterFiller=i("div",null,"CodeMirror-gutter-filler"),this.gutterFiller.setAttribute("cm-not-content","true"),this.lineDiv=r("div",null,"CodeMirror-code"),this.selectionDiv=i("div",null,null,"position: relative; z-index: 1"),this.cursorDiv=i("div",null,"CodeMirror-cursors"),this.measure=i("div",null,"CodeMirror-measure"),this.lineMeasure=i("div",null,"CodeMirror-measure"),this.lineSpace=r("div",[this.measure,this.lineMeasure,this.selectionDiv,this.cursorDiv,this.lineDiv],null,"position: relative; outline: none");var s=r("div",[this.lineSpace],"CodeMirror-lines");this.mover=i("div",[s],null,"position: relative"),this.sizer=i("div",[this.mover],"CodeMirror-sizer"),this.sizerWidth=null,this.heightForcer=i("div",null,null,"position: absolute; height: 50px; width: 1px;"),this.gutters=i("div",null,"CodeMirror-gutters"),this.lineGutter=null,this.scroller=i("div",[this.sizer,this.heightForcer,this.gutters],"CodeMirror-scroll"),this.scroller.setAttribute("tabIndex","-1"),this.wrapper=i("div",[this.scrollbarFiller,this.gutterFiller,this.scroller],"CodeMirror"),lo&&105<=ao&&(this.wrapper.style.clipPath="inset(0px)"),this.wrapper.setAttribute("translate","no"),io&&8>ro&&(this.gutters.style.zIndex=-1,this.scroller.style.paddingRight=0),oo||Qr&&mo||(this.scroller.draggable=!0),t&&(t.appendChild?t.appendChild(this.wrapper):t(this.wrapper)),this.reportedViewFrom=this.reportedViewTo=this.viewFrom=this.viewTo=e.first,this.view=[],this.externalMeasured=this.renderedView=null,this.lastWrapHeight=this.lastWrapWidth=this.viewOffset=0,this.updateLineNumbers=null,this.nativeBarWidth=this.barHeight=this.barWidth=0,this.scrollbarsClipped=!1,this.lineNumWidth=this.lineNumInnerWidth=this.lineNumChars=null,this.alignWidgets=!1,this.maxLine=this.cachedCharWidth=this.cachedTextHeight=this.cachedPaddingH=null,this.maxLineLength=0,this.maxLineChanged=!1,this.wheelDX=this.wheelDY=this.wheelStartX=this.wheelStartY=null,this.shift=!1,this.activeTouch=this.selForContextMenu=null,this.gutterSpecs=Rn(o.gutters,o.lineNumbers),In(this),n.init(this)}function Vn(t){var e=t.wheelDeltaX,n=t.wheelDeltaY;return null==e&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(e=t.detail),null==n&&t.detail&&t.axis==t.VERTICAL_AXIS?n=t.detail:null==n&&(n=t.wheelDelta),{x:e,y:n}}function $n(t){return(t=Vn(t)).x*=ps,t.y*=ps,t}function Un(t,e){lo&&102==ao&&(null==t.display.chromeScrollHack?t.display.sizer.style.pointerEvents="none":clearTimeout(t.display.chromeScrollHack),t.display.chromeScrollHack=setTimeout((function(){t.display.chromeScrollHack=null,t.display.sizer.style.pointerEvents=""}),100));var n=Vn(e),i=n.x;n=n.y;var r=ps;0===e.deltaMode&&(i=e.deltaX,n=e.deltaY,r=1);var o=t.display,s=o.scroller,l=s.scrollWidth>s.clientWidth,a=s.scrollHeight>s.clientHeight;if(i&&l||n&&a){if(n&&vo&&oo){l=e.target;var h=o.view;t:for(;l!=s;l=l.parentNode)for(var c=0;c<h.length;c++)if(h[c].node==l){t.display.currentWheelTarget=l;break t}}!i||Qr||ho||null==r?(n&&null!=r&&(r*=n,l=(a=t.doc.scrollTop)+o.wrapper.clientHeight,0>r?a=Math.max(0,a+r-50):l=Math.min(t.doc.height,l+r+50),Dn(t,{top:a,bottom:l})),20>fs&&0!==e.deltaMode&&(null==o.wheelStartX?(o.wheelStartX=s.scrollLeft,o.wheelStartY=s.scrollTop,o.wheelDX=i,o.wheelDY=n,setTimeout((function(){if(null!=o.wheelStartX){var t=s.scrollLeft-o.wheelStartX,e=s.scrollTop-o.wheelStartY;t=e&&o.wheelDY&&e/o.wheelDY||t&&o.wheelDX&&t/o.wheelDX,o.wheelStartX=o.wheelStartY=null,t&&(ps=(ps*fs+t)/(fs+1),++fs)}}),200)):(o.wheelDX+=i,o.wheelDY+=n))):(n&&a&&gn(t,Math.max(0,s.scrollTop+n*r)),vn(t,Math.max(0,s.scrollLeft+i*r)),(!n||n&&a)&&z(e),o.wheelStartX=null)}}function Gn(t,e,n){t=t&&t.options.selectionsMayTouch,n=e[n],e.sort((function(t,e){return rt(t.from(),e.from())})),n=p(e,n);for(var i=1;i<e.length;i++){var r=e[i],o=e[i-1],s=rt(o.to(),r.from());if(t&&!r.empty()?0<s:0<=s){s=at(o.from(),r.from());var l=lt(o.to(),r.to());r=o.empty()?r.from()==r.head:o.from()==o.head,i<=n&&--n,e.splice(--i,2,new ms(r?l:s,r?s:l))}}return new gs(e,n)}function jn(t,e){return new gs([new ms(t,e||t)],0)}function Kn(t){return t.text?it(t.from.line+t.text.length-1,v(t.text).length+(1==t.text.length?t.from.ch:0)):t.to}function qn(t,e){if(0>rt(t,e.from))return t;if(0>=rt(t,e.to))return Kn(e);var n=t.line+e.text.length-(e.to.line-e.from.line)-1,i=t.ch;return t.line==e.to.line&&(i+=Kn(e).ch-e.to.ch),it(n,i)}function Xn(t,e){for(var n=[],i=0;i<t.sel.ranges.length;i++){var r=t.sel.ranges[i];n.push(new ms(qn(r.anchor,e),qn(r.head,e)))}return Gn(t.cm,n,t.sel.primIndex)}function Yn(t,e,n){return t.line==e.line?it(n.line,t.ch-e.ch+n.ch):it(n.line+(t.line-e.line),t.ch)}function Zn(t){t.doc.mode=U(t.options,t.doc.modeOption),Jn(t)}function Jn(t){t.doc.iter((function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)})),t.doc.modeFrontier=t.doc.highlightFrontier=t.doc.first,Tn(t,100),t.state.modeGen++,t.curOp&&Ue(t)}function Qn(t,e){return 0==e.from.ch&&0==e.to.ch&&""==v(e.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function ti(t,e,n,i){function r(t,n,r){t.text=n,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),Mt(t),Tt(t,r),(n=i?i(t):1)!=t.height&&J(t,n),Xt(t,"change",t,e)}function o(t,e){for(var r=[];t<e;++t)r.push(new es(a[t],n?n[t]:null,i));return r}var s=e.from,l=e.to,a=e.text,h=X(t,s.line),c=X(t,l.line),u=v(a),d=n?n[a.length-1]:null,f=l.line-s.line;e.full?(t.insert(0,o(0,a.length)),t.remove(a.length,t.size-a.length)):Qn(t,e)?(l=o(0,a.length-1),r(c,c.text,d),f&&t.remove(s.line,f),l.length&&t.insert(s.line,l)):h==c?1==a.length?r(h,h.text.slice(0,s.ch)+u+h.text.slice(l.ch),d):((f=o(1,a.length-1)).push(new es(u+h.text.slice(l.ch),d,i)),r(h,h.text.slice(0,s.ch)+a[0],n?n[0]:null),t.insert(s.line+1,f)):1==a.length?(r(h,h.text.slice(0,s.ch)+a[0]+c.text.slice(l.ch),n?n[0]:null),t.remove(s.line+1,f)):(r(h,h.text.slice(0,s.ch)+a[0],n?n[0]:null),r(c,u+c.text.slice(l.ch),d),d=o(1,a.length-1),1<f&&t.remove(s.line+1,f-1),t.insert(s.line+1,d)),Xt(t,"change",t,e)}function ei(t,e,n){function i(t,r,o){if(t.linked)for(var s=0;s<t.linked.length;++s){var l=t.linked[s];if(l.doc!=r){var a=o&&l.sharedHist;n&&!a||(e(l.doc,a),i(l.doc,t,a))}}}i(t,null,!0)}function ni(t,e){if(e.cm)throw Error("This document is already in use.");t.doc=e,e.cm=t,Be(t),Zn(t),ii(t),t.options.direction=e.direction,t.options.lineWrapping||It(t),t.options.mode=e.modeOption,Ue(t)}function ii(t){("rtl"==t.doc.direction?l:Co)(t.display.lineDiv,"CodeMirror-rtl")}function ri(t){kn(t,(function(){ii(t),Ue(t)}))}function oi(t){this.done=[],this.undone=[],this.undoDepth=t?t.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOrigin=this.lastSelOrigin=this.lastOp=this.lastSelOp=null,this.generation=this.maxGeneration=t?t.maxGeneration:1}function si(t,e){var n={from:st(e.from),to:Kn(e),text:Y(t,e.from,e.to)};return ci(t,n,e.from.line,e.to.line+1),ei(t,(function(t){return ci(t,n,e.from.line,e.to.line+1)}),!0),n}function li(t){for(;t.length&&v(t).ranges;)t.pop()}function ai(t,e,n,i){var r=t.history;r.undone.length=0;var o,s=+new Date;if(o=r.lastOp==i||r.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&r.lastModTime>s-(t.cm?t.cm.options.historyEventDelay:500)||"*"==e.origin.charAt(0))){if(r.lastOp==i){li(r.done);var l=v(r.done)}else r.done.length&&!v(r.done).ranges?l=v(r.done):1<r.done.length&&!r.done[r.done.length-2].ranges?(r.done.pop(),l=v(r.done)):l=void 0;o=l}if(o){var a=v(l.changes);0==rt(e.from,e.to)&&0==rt(e.from,a.to)?a.to=Kn(e):l.changes.push(si(t,e))}else for((l=v(r.done))&&l.ranges||hi(t.sel,r.done),l={changes:[si(t,e)],generation:r.generation},r.done.push(l);r.done.length>r.undoDepth;)r.done.shift(),r.done[0].ranges||r.done.shift();r.done.push(n),r.generation=++r.maxGeneration,r.lastModTime=r.lastSelTime=s,r.lastOp=r.lastSelOp=i,r.lastOrigin=r.lastSelOrigin=e.origin,a||D(t,"historyAdded")}function hi(t,e){var n=v(e);n&&n.ranges&&n.equals(t)||e.push(t)}function ci(t,e,n,i){var r=e["spans_"+t.id],o=0;t.iter(Math.max(t.first,n),Math.min(t.first+t.size,i),(function(n){n.markedSpans&&((r||=e["spans_"+t.id]={})[o]=n.markedSpans),++o}))}function ui(t,e){var n;if(n=e["spans_"+t.id]){for(var i=[],r=0;r<e.text.length;++r){var o=i,s=o.push,l=void 0,a=n[r];if(a){for(var h=0;h<a.length;++h)a[h].marker.explicitlyCleared?l||=a.slice(0,h):l&&l.push(a[h]);l=l?l.length?l:null:a}else l=null;s.call(o,l)}n=i}else n=null;if(t=kt(t,e),!n)return t;if(!t)return n;for(e=0;e<n.length;++e)if(i=n[e],r=t[e],i&&r)t:for(o=0;o<r.length;++o){for(s=r[o],l=0;l<i.length;++l)if(i[l].marker==s.marker)continue t;i.push(s)}else r&&(n[e]=r);return n}function di(t,e,n){for(var i=[],r=0;r<t.length;++r){var o=t[r];if(o.ranges)i.push(n?gs.prototype.deepCopy.call(o):o);else{o=o.changes;var s=[];i.push({changes:s});for(var l=0;l<o.length;++l){var a,h=o[l];if(s.push({from:h.from,to:h.to,text:h.text}),e)for(var c in h)(a=c.match(/^spans_(\d+)$/))&&-1<p(e,Number(a[1]))&&(v(s)[c]=h[c],delete h[c])}}}return i}function fi(t,e,n,i){return i?(t=t.anchor,n&&((i=0>rt(e,t))!=0>rt(n,t)?(t=e,e=n):i!=0>rt(e,n)&&(e=n)),new ms(t,e)):new ms(n||e,e)}function pi(t,e,n,i,r){null==r&&(r=t.cm&&(t.cm.display.shift||t.extend)),bi(t,new gs([fi(t.sel.primary(),e,n,r)],0),i)}function gi(t,e,n){for(var i=[],r=t.cm&&(t.cm.display.shift||t.extend),o=0;o<t.sel.ranges.length;o++)i[o]=fi(t.sel.ranges[o],e[o],null,r);bi(t,e=Gn(t.cm,i,t.sel.primIndex),n)}function mi(t,e,n,i){var r=t.sel.ranges.slice(0);r[e]=n,bi(t,Gn(t.cm,r,t.sel.primIndex),i)}function vi(t,e,n){return n={ranges:e.ranges,update:function(e){this.ranges=[];for(var n=0;n<e.length;n++)this.ranges[n]=new ms(ht(t,e[n].anchor),ht(t,e[n].head))},origin:n&&n.origin},D(t,"beforeSelectionChange",t,n),t.cm&&D(t.cm,"beforeSelectionChange",t.cm,n),n.ranges!=e.ranges?Gn(t.cm,n.ranges,n.ranges.length-1):e}function yi(t,e,n){var i=t.history.done,r=v(i);r&&r.ranges?(i[i.length-1]=e,wi(t,e,n)):bi(t,e,n)}function bi(t,e,n){wi(t,e,n),e=t.sel;var i,r=t.cm?t.cm.curOp.id:NaN,o=t.history,s=n&&n.origin;if(!(i=r==o.lastSelOp)&&(i=s&&o.lastSelOrigin==s)&&!(i=o.lastModTime==o.lastSelTime&&o.lastOrigin==s)){i=v(o.done);var l=s.charAt(0);i="*"==l||"+"==l&&i.ranges.length==e.ranges.length&&i.somethingSelected()==e.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}i?o.done[o.done.length-1]=e:hi(e,o.done),o.lastSelTime=+new Date,o.lastSelOrigin=s,o.lastSelOp=r,n&&!1!==n.clearRedo&&li(o.undone)}function wi(t,e,n){(P(t,"beforeSelectionChange")||t.cm&&P(t.cm,"beforeSelectionChange"))&&(e=vi(t,e,n));var i=n&&n.bias||(0>rt(e.primary().head,t.sel.primary().head)?-1:1);xi(t,Ci(t,e,i,!0)),n&&!1===n.scroll||!t.cm||"nocursor"==t.cm.getOption("readOnly")||un(t.cm)}function xi(t,e){e.equals(t.sel)||(t.sel=e,t.cm&&(t.cm.curOp.updateInput=1,t.cm.curOp.selectionChanged=!0,W(t.cm)),Xt(t,"cursorActivity",t))}function _i(t){xi(t,Ci(t,t.sel,null,!1))}function Ci(t,e,n,i){for(var r,o=0;o<e.ranges.length;o++){var s=e.ranges[o],l=e.ranges.length==t.sel.ranges.length&&t.sel.ranges[o],a=Si(t,s.anchor,l&&l.anchor,n,i);l=s.head==s.anchor?a:Si(t,s.head,l&&l.head,n,i),(r||a!=s.anchor||l!=s.head)&&(r||=e.ranges.slice(0,o),r[o]=new ms(a,l))}return r?Gn(t.cm,r,e.primIndex):e}function ki(t,e,n,i,r){var o=X(t,e.line);if(o.markedSpans)for(var s=0;s<o.markedSpans.length;++s){var l=o.markedSpans[s],a=l.marker,h="selectLeft"in a?!a.selectLeft:a.inclusiveLeft,c="selectRight"in a?!a.selectRight:a.inclusiveRight;if((null==l.from||(h?l.from<=e.ch:l.from<e.ch))&&(null==l.to||(c?l.to>=e.ch:l.to>e.ch))){if(r&&(D(a,"beforeCursorEnter"),a.explicitlyCleared)){if(o.markedSpans){--s;continue}break}if(a.atomic)return n&&(s=a.find(0>i?1:-1),l=void 0,(0>i?c:h)&&(s=Li(t,s,-i,s&&s.line==e.line?o:null)),s&&s.line==e.line&&(l=rt(s,n))&&(0>i?0>l:0<l))?ki(t,s,e,i,r):(n=a.find(0>i?-1:1),(0>i?h:c)&&(n=Li(t,n,i,n.line==e.line?o:null)),n?ki(t,n,e,i,r):null)}}return e}function Si(t,e,n,i,r){return(e=ki(t,e,n,i=i||1,r)||!r&&ki(t,e,n,i,!0)||ki(t,e,n,-i,r)||!r&&ki(t,e,n,-i,!0))||(t.cantEdit=!0,it(t.first,0))}function Li(t,e,n,i){return 0>n&&0==e.ch?e.line>t.first?ht(t,it(e.line-1)):null:0<n&&e.ch==(i||X(t,e.line)).text.length?e.line<t.first+t.size-1?it(e.line+1,0):null:new it(e.line,e.ch+n)}function Mi(t){t.setSelection(it(t.firstLine(),0),it(t.lastLine()),Ao)}function Ti(t,e,n){var i={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){return i.canceled=!0}};return n&&(i.update=function(e,n,r,o){e&&(i.from=ht(t,e)),n&&(i.to=ht(t,n)),r&&(i.text=r),void 0!==o&&(i.origin=o)}),D(t,"beforeChange",t,i),t.cm&&D(t.cm,"beforeChange",t.cm,i),i.canceled?(t.cm&&(t.cm.curOp.updateInput=2),null):{from:i.from,to:i.to,text:i.text,origin:i.origin}}function Oi(t,e,n){if(t.cm){if(!t.cm.curOp)return Sn(t.cm,Oi)(t,e,n);if(t.cm.state.suppressEdits)return}if(!(P(t,"beforeChange")||t.cm&&P(t.cm,"beforeChange"))||(e=Ti(t,e,!0)))if(n=Qo&&!n&&Lt(t,e.from,e.to))for(var i=n.length-1;0<=i;--i)Ni(t,{from:n[i].from,to:n[i].to,text:i?[""]:e.text,origin:e.origin});else Ni(t,e)}function Ni(t,e){if(1!=e.text.length||""!=e.text[0]||0!=rt(e.from,e.to)){var n=Xn(t,e);ai(t,e,n,t.cm?t.cm.curOp.id:NaN),Ei(t,e,n,kt(t,e));var i=[];ei(t,(function(t,n){n||-1!=p(i,t.history)||(Ri(t.history,e),i.push(t.history)),Ei(t,e,null,kt(t,e))}))}}function Ai(t,e,n){var i=t.cm&&t.cm.state.suppressEdits;if(!i||n){for(var r,o=t.history,s=t.sel,l="undo"==e?o.done:o.undone,a="undo"==e?o.undone:o.done,h=0;h<l.length&&(r=l[h],n?!r.ranges||r.equals(t.sel):r.ranges);h++);if(h!=l.length){for(o.lastOrigin=o.lastSelOrigin=null;;){if(!(r=l.pop()).ranges){if(i)return void l.push(r);break}if(hi(r,a),n&&!r.equals(t.sel))return void bi(t,r,{clearRedo:!1});s=r}var c=[];hi(s,a),a.push({changes:c,generation:o.generation}),o.generation=r.generation||++o.maxGeneration;var u=P(t,"beforeChange")||t.cm&&P(t.cm,"beforeChange");for(n=function(n){var i=r.changes[n];if(i.origin=e,u&&!Ti(t,i,!1))return l.length=0,{};c.push(si(t,i));var o=n?Xn(t,i):v(l);Ei(t,i,o,ui(t,i)),!n&&t.cm&&t.cm.scrollIntoView({from:i.from,to:Kn(i)});var s=[];ei(t,(function(t,e){e||-1!=p(s,t.history)||(Ri(t.history,i),s.push(t.history)),Ei(t,i,null,ui(t,i))}))},i=r.changes.length-1;0<=i;--i)if(o=n(i))return o.v}}}function Di(t,e){if(0!=e&&(t.first+=e,t.sel=new gs(y(t.sel.ranges,(function(t){return new ms(it(t.anchor.line+e,t.anchor.ch),it(t.head.line+e,t.head.ch))})),t.sel.primIndex),t.cm)){Ue(t.cm,t.first,t.first-e,e);for(var n=t.cm.display,i=n.viewFrom;i<n.viewTo;i++)Ge(t.cm,i,"gutter")}}function Ei(t,e,n,i){if(t.cm&&!t.cm.curOp)return Sn(t.cm,Ei)(t,e,n,i);if(e.to.line<t.first)Di(t,e.text.length-1-(e.to.line-e.from.line));else if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var r=e.text.length-1-(t.first-e.from.line);Di(t,r),e={from:it(t.first,0),to:it(e.to.line+r,e.to.ch),text:[v(e.text)],origin:e.origin}}r=t.lastLine(),e.to.line>r&&(e={from:e.from,to:it(r,X(t,r).text.length),text:[e.text[0]],origin:e.origin}),e.removed=Y(t,e.from,e.to),n||=Xn(t,e),t.cm?Wi(t.cm,e,i):ti(t,e,i),wi(t,n,Ao),t.cantEdit&&Si(t,it(t.firstLine(),0))&&(t.cantEdit=!1)}}function Wi(t,e,n){var i=t.doc,r=t.display,o=e.from,s=e.to,l=!1,a=o.line;t.options.lineWrapping||(a=Q(Dt(X(i,o.line))),i.iter(a,s.line+1,(function(t){if(t==r.maxLine)return l=!0}))),-1<i.sel.contains(e.from,e.to)&&W(t),ti(i,e,n,Fe(t)),t.options.lineWrapping||(i.iter(a,o.line+e.text.length,(function(t){var e=Rt(t);e>r.maxLineLength&&(r.maxLine=t,r.maxLineLength=e,r.maxLineChanged=!0,l=!1)})),l&&(t.curOp.updateMaxLine=!0)),xt(i,o.line),Tn(t,400),n=e.text.length-(s.line-o.line)-1,e.full?Ue(t):o.line!=s.line||1!=e.text.length||Qn(t.doc,e)?Ue(t,o.line,s.line+1,n):Ge(t,o.line,"text"),n=P(t,"changes"),((i=P(t,"change"))||n)&&(e={from:o,to:s,text:e.text,removed:e.removed,origin:e.origin},i&&Xt(t,"change",t,e),n&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(e)),t.display.selForContextMenu=null}function Pi(t,e,n,i,r){i||=n,0>rt(i,n)&&(n=(i=[i,n])[0],i=i[1]),"string"==typeof e&&(e=t.splitLines(e)),Oi(t,{from:n,to:i,text:e,origin:r})}function Hi(t,e,n,i){n<t.line?t.line+=i:e<t.line&&(t.line=e,t.ch=0)}function zi(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r],s=!0;if(o.ranges)for(o.copied||((o=t[r]=o.deepCopy()).copied=!0),s=0;s<o.ranges.length;s++)Hi(o.ranges[s].anchor,e,n,i),Hi(o.ranges[s].head,e,n,i);else{for(var l=0;l<o.changes.length;++l){var a=o.changes[l];if(n<a.from.line)a.from=it(a.from.line+i,a.from.ch),a.to=it(a.to.line+i,a.to.ch);else if(e<=a.to.line){s=!1;break}}s||(t.splice(0,r+1),r=0)}}}function Ri(t,e){var n=e.from.line,i=e.to.line;e=e.text.length-(i-n)-1,zi(t.done,n,i,e),zi(t.undone,n,i,e)}function Ii(t,e,n,i){var r=e,o=e;return"number"==typeof e?o=X(t,Math.max(t.first,Math.min(e,t.first+t.size-1))):r=Q(e),null==r?null:(i(o,r)&&t.cm&&Ge(t.cm,r,n),o)}function Fi(t){this.lines=t,this.parent=null;for(var e=0,n=0;n<t.length;++n)t[n].parent=this,e+=t[n].height;this.height=e}function Bi(t){this.children=t;for(var e=0,n=0,i=0;i<t.length;++i){var r=t[i];e+=r.chunkSize(),n+=r.height,r.parent=this}this.size=e,this.height=n,this.parent=null}function Vi(t,e,n,i){var r=new vs(t,n,i),o=t.cm;return o&&r.noHScroll&&(o.display.alignWidgets=!0),Ii(t,e,"widget",(function(e){var n=e.widgets||(e.widgets=[]);return null==r.insertAt?n.push(r):n.splice(Math.min(n.length,Math.max(0,r.insertAt)),0,r),r.line=e,o&&!Pt(t,e)&&(n=zt(e)<t.scrollTop,J(e,e.height+oe(r)),n&&cn(o,r.height),o.curOp.forceUpdate=!0),!0})),o&&Xt(o,"lineWidgetAdded",o,r,"number"==typeof e?e:Q(e)),r}function $i(t,e,n,i,o){if(i&&i.shared)return Ui(t,e,n,i,o);if(t.cm&&!t.cm.curOp)return Sn(t.cm,$i)(t,e,n,i,o);var s=new bs(t,o);if(o=rt(e,n),i&&d(i,s,!1),0<o||0==o&&!1!==s.clearWhenEmpty)return s;if(s.replacedWith&&(s.collapsed=!0,s.widgetNode=r("span",[s.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||s.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(s.widgetNode.insertLeft=!0)),s.collapsed){if(At(t,e.line,e,n,s)||e.line!=n.line&&At(t,n.line,e,n,s))throw Error("Inserting collapsed marker partially overlapping an existing one");ts=!0}s.addToHistory&&ai(t,{from:e,to:n,origin:"markText"},t.sel,NaN);var l,a=e.line,h=t.cm;if(t.iter(a,n.line+1,(function(i){h&&s.collapsed&&!h.options.lineWrapping&&Dt(i)==h.display.maxLine&&(l=!0),s.collapsed&&a!=e.line&&J(i,0);var r=new _t(s,a==e.line?e.ch:null,a==n.line?n.ch:null),o=t.cm&&t.cm.curOp;(o=o&&window.WeakSet&&(o.markedSpans||(o.markedSpans=new WeakSet)))&&i.markedSpans&&o.has(i.markedSpans)?i.markedSpans.push(r):(i.markedSpans=i.markedSpans?i.markedSpans.concat([r]):[r],o&&o.add(i.markedSpans)),r.marker.attachLine(i),++a})),s.collapsed&&t.iter(e.line,n.line+1,(function(e){Pt(t,e)&&J(e,0)})),s.clearOnEnter&&Fo(s,"beforeCursorEnter",(function(){return s.clear()})),s.readOnly&&(Qo=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),s.collapsed&&(s.id=++ys,s.atomic=!0),h){if(l&&(h.curOp.updateMaxLine=!0),s.collapsed)Ue(h,e.line,n.line+1);else if(s.className||s.startStyle||s.endStyle||s.css||s.attributes||s.title)for(i=e.line;i<=n.line;i++)Ge(h,i,"text");s.atomic&&_i(h.doc),Xt(h,"markerAdded",h,s)}return s}function Ui(t,e,n,i,r){(i=d(i)).shared=!1;var o=[$i(t,e,n,i,r)],s=o[0],l=i.widgetNode;return ei(t,(function(t){l&&(i.widgetNode=l.cloneNode(!0)),o.push($i(t,ht(t,e),ht(t,n),i,r));for(var a=0;a<t.linked.length;++a)if(t.linked[a].isParent)return;s=v(o)})),new ws(o,s)}function Gi(t){return t.findMarks(it(t.first,0),t.clipPos(it(t.lastLine())),(function(t){return t.parent}))}function ji(t){for(var e=function(e){var n=[(e=t[e]).primary.doc];ei(e.primary.doc,(function(t){return n.push(t)}));for(var i=0;i<e.markers.length;i++){var r=e.markers[i];-1==p(n,r.doc)&&(r.parent=null,e.markers.splice(i--,1))}},n=0;n<t.length;n++)e(n)}function Ki(t){var e=this;if(qi(e),!E(e,t)&&!se(e.display,t)){z(t),io&&(Cs=+new Date);var n=Ve(e,t,!0),i=t.dataTransfer.files;if(n&&!e.isReadOnly())if(i&&i.length&&window.FileReader&&window.File)for(var r=i.length,o=Array(r),s=0,l=function(){++s==r&&Sn(e,(function(){var t={from:n=ht(e.doc,n),to:n,text:e.doc.splitLines(o.filter((function(t){return null!=t})).join(e.doc.lineSeparator())),origin:"paste"};Oi(e.doc,t),yi(e.doc,jn(ht(e.doc,n),ht(e.doc,Kn(t))))}))()},a=function(t,n){if(e.options.allowDropFileTypes&&-1==p(e.options.allowDropFileTypes,t.type))l();else{var i=new FileReader;i.onerror=function(){return l()},i.onload=function(){var t=i.result;/[\x00-\x08\x0e-\x1f]{2}/.test(t)||(o[n]=t),l()},i.readAsText(t)}},h=0;h<i.length;h++)a(i[h],h);else if(e.state.draggingText&&-1<e.doc.sel.contains(n))e.state.draggingText(t),setTimeout((function(){return e.display.input.focus()}),20);else try{if(a=t.dataTransfer.getData("Text")){if(e.state.draggingText&&!e.state.draggingText.copy&&(h=e.listSelections()),wi(e.doc,jn(n,n)),h)for(i=0;i<h.length;++i)Pi(e.doc,"",h[i].anchor,h[i].head,"drag");e.replaceSelection(a,"around","paste"),e.display.input.focus()}}catch(t){}}}function qi(t){t.display.dragCursor&&(t.display.lineSpace.removeChild(t.display.dragCursor),t.display.dragCursor=null)}function Xi(t){if(document.getElementsByClassName){for(var e=document.getElementsByClassName("CodeMirror"),n=[],i=0;i<e.length;i++){var r=e[i].CodeMirror;r&&n.push(r)}n.length&&n[0].operation((function(){for(var e=0;e<n.length;e++)t(n[e])}))}}function Yi(){var t;Fo(window,"resize",(function(){null==t&&(t=setTimeout((function(){t=null,Xi(Zi)}),100))})),Fo(window,"blur",(function(){return Xi(on)}))}function Zi(t){var e=t.display;e.cachedCharWidth=e.cachedTextHeight=e.cachedPaddingH=null,e.scrollbarsClipped=!1,t.setSize()}function Ji(t){var e=t.split(/-(?!$)/);t=e[e.length-1];for(var n,i,r,o,s=0;s<e.length-1;s++){var l=e[s];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else{if(!/^s(hift)?$/i.test(l))throw Error("Unrecognized modifier name: "+l);r=!0}}return n&&(t="Alt-"+t),i&&(t="Ctrl-"+t),o&&(t="Cmd-"+t),r&&(t="Shift-"+t),t}function Qi(t){var e,n={};for(e in t)if(t.hasOwnProperty(e)){var i=t[e];if(!/^(name|fallthrough|(de|at)tach)$/.test(e)){if("..."!=i)for(var r=y(e.split(" "),Ji),o=0;o<r.length;o++){if(o==r.length-1)var s=r.join(" "),l=i;else s=r.slice(0,o+1).join(" "),l="...";var a=n[s];if(a){if(a!=l)throw Error("Inconsistent bindings for "+s)}else n[s]=l}delete t[e]}}for(var h in n)t[h]=n[h];return t}function tr(t,e,n,i){var r=(e=rr(e)).call?e.call(t,i):e[t];if(!1===r)return"nothing";if("..."===r)return"multi";if(null!=r&&n(r))return"handled";if(e.fallthrough){if("[object Array]"!=Object.prototype.toString.call(e.fallthrough))return tr(t,e.fallthrough,n,i);for(r=0;r<e.fallthrough.length;r++){var o=tr(t,e.fallthrough[r],n,i);if(o)return o}}}function er(t){return"Ctrl"==(t="string"==typeof t?t:Ss[t.keyCode])||"Alt"==t||"Shift"==t||"Mod"==t}function nr(t,e,n){var i=t;return e.altKey&&"Alt"!=i&&(t="Alt-"+t),(xo?e.metaKey:e.ctrlKey)&&"Ctrl"!=i&&(t="Ctrl-"+t),(xo?e.ctrlKey:e.metaKey)&&"Mod"!=i&&(t="Cmd-"+t),!n&&e.shiftKey&&"Shift"!=i&&(t="Shift-"+t),t}function ir(t,e){if(ho&&34==t.keyCode&&t.char)return!1;var n=Ss[t.keyCode];return null!=n&&!t.altGraphKey&&(3==t.keyCode&&t.code&&(n=t.code),nr(n,t,e))}function rr(t){return"string"==typeof t?Os[t]:t}function or(t,e){for(var n=t.doc.sel.ranges,i=[],r=0;r<n.length;r++){for(var o=e(n[r]);i.length&&0>=rt(o.from,v(i).to);){var s=i.pop();if(0>rt(s.from,o.from)){o.from=s.from;break}}i.push(o)}kn(t,(function(){for(var e=i.length-1;0<=e;e--)Pi(t.doc,"",i[e].from,i[e].to,"+delete");un(t)}))}function sr(t,e,n){return 0>(e=L(t.text,e+n,n))||e>t.text.length?null:e}function lr(t,e,n){return null==(t=sr(t,e.ch,n))?null:new it(e.line,t,0>n?"after":"before")}function ar(t,e,n,i,r){if(t&&("rtl"==e.doc.direction&&(r=-r),t=N(n,e.doc.direction))){var o=0>r==(1==(t=0>r?v(t):t[0]).level)?"after":"before";if(0<t.level||"rtl"==e.doc.direction){var s=pe(e,n),l=0>r?n.text.length-1:0,a=ge(e,s,l).top;l=M((function(t){return ge(e,s,t).top==a}),0>r==(1==t.level)?t.from:t.to-1,l),"before"==o&&(l=sr(n,l,1))}else l=0>r?t.to:t.from;return new it(i,l,o)}return new it(i,0>r?n.text.length:0,0>r?"before":"after")}function hr(t,e,n,i){var r=N(e,t.doc.direction);if(!r)return lr(e,n,i);n.ch>=e.text.length?(n.ch=e.text.length,n.sticky="before"):0>=n.ch&&(n.ch=0,n.sticky="after");var o=O(r,n.ch,n.sticky),s=r[o];if("ltr"==t.doc.direction&&0==s.level%2&&(0<i?s.to>n.ch:s.from<n.ch))return lr(e,n,i);var l,a=function(t,n){return sr(e,t instanceof it?t.ch:t,n)},h=function(n){return t.options.lineWrapping?(l=l||pe(t,e),Ae(t,e,l,n)):{begin:0,end:e.text.length}},c=h("before"==n.sticky?a(n,-1):n.ch);if("rtl"==t.doc.direction||1==s.level){var u=1==s.level==0>i,d=a(n,u?1:-1);if(null!=d&&(u?d<=s.to&&d<=c.end:d>=s.from&&d>=c.begin))return new it(n.line,d,u?"before":"after")}return(o=(s=function(t,e,i){for(var o=function(t,e){return e?new it(n.line,a(t,1),"before"):new it(n.line,t,"after")};0<=t&&t<r.length;t+=e){var s=r[t],l=0<e==(1!=s.level),h=l?i.begin:a(i.end,-1);if(s.from<=h&&h<s.to)return o(h,l);if(h=l?s.from:a(s.to,-1),i.begin<=h&&h<i.end)return o(h,l)}})(o+i,i,c))?o:null==(c=0<i?c.end:a(c.begin,-1))||0<i&&c==e.text.length||!(o=s(0<i?0:r.length-1,i,h(c)))?null:o}function cr(t,e){var n=X(t.doc,e),i=Dt(n);return i!=n&&(e=Q(i)),ar(!0,t,i,e,1)}function ur(t,e){var n=cr(t,e.line),i=X(t.doc,n.line);return(t=N(i,t.doc.direction))&&0!=t[0].level?n:(i=Math.max(n.ch,i.text.search(/\S/)),it(n.line,e.line==n.line&&e.ch<=i&&e.ch?0:i,n.sticky))}function dr(t,e,n){if("string"==typeof e&&!(e=Ns[e]))return!1;t.display.input.ensurePolled();var i=t.display.shift,r=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),n&&(t.display.shift=!1),r=e(t)!=No}finally{t.display.shift=i,t.state.suppressEdits=!1}return r}function fr(t,e,n,i){var r=t.state.keySeq;if(r){if(er(e))return"handled";if(/'$/.test(e)?t.state.keySeq=null:As.set(50,(function(){t.state.keySeq==r&&(t.state.keySeq=null,t.display.input.reset())})),pr(t,r+" "+e,n,i))return!0}return pr(t,e,n,i)}function pr(t,e,n,i){t:{for(var r=0;r<t.state.keyMaps.length;r++){var o=tr(e,t.state.keyMaps[r],i,t);if(o){i=o;break t}}i=t.options.extraKeys&&tr(e,t.options.extraKeys,i,t)||tr(e,t.options.keyMap,i,t)}return"multi"==i&&(t.state.keySeq=e),"handled"==i&&Xt(t,"keyHandled",t,e,n),"handled"!=i&&"multi"!=i||(z(n),tn(t)),!!i}function gr(t,e){var n=ir(e,!0);return!!n&&(e.shiftKey&&!t.state.keySeq?fr(t,"Shift-"+n,e,(function(e){return dr(t,e,!0)}))||fr(t,n,e,(function(e){if("string"==typeof e?/^go[A-Z]/.test(e):e.motion)return dr(t,e)})):fr(t,n,e,(function(e){return dr(t,e)})))}function mr(t,e,n){return fr(t,"'"+n+"'",e,(function(e){return dr(t,e,!0)}))}function vr(t){if(!(t.target&&t.target!=this.display.input.getField()||(this.curOp.focus=s(c(this.display.wrapper)),E(this,t)))){io&&11>ro&&27==t.keyCode&&(t.returnValue=!1);var e=t.keyCode;this.display.shift=16==e||t.shiftKey;var n=gr(this,t);ho&&(Ds=n?e:null,!n&&88==e&&!Uo&&(vo?t.metaKey:t.ctrlKey)&&this.replaceSelection("",null,"cut")),Qr&&!vo&&!n&&46==e&&t.shiftKey&&!t.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=e||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||yr(this)}}function yr(t){function e(t){18!=t.keyCode&&t.altKey||(Co(n,"CodeMirror-crosshair"),A(document,"keyup",e),A(document,"mouseover",e))}var n=t.display.lineDiv;l(n,"CodeMirror-crosshair"),Fo(document,"keyup",e),Fo(document,"mouseover",e)}function br(t){16==t.keyCode&&(this.doc.sel.shift=!1),E(this,t)}function wr(t){if(!(t.target&&t.target!=this.display.input.getField()||se(this.display,t)||E(this,t)||t.ctrlKey&&!t.altKey||vo&&t.metaKey)){var e=t.keyCode,n=t.charCode;ho&&e==Ds?(Ds=null,z(t)):ho&&(!t.which||10>t.which)&&gr(this,t)||"\b"==(e=String.fromCharCode(null==n?e:n))||mr(this,t,e)||this.display.input.onKeyPress(t)}}function xr(t,e){var n=+new Date;return Ps&&Ps.compare(n,t,e)?(Ws=Ps=null,"triple"):Ws&&Ws.compare(n,t,e)?(Ps=new Es(n,t,e),Ws=null,"double"):(Ws=new Es(n,t,e),Ps=null,"single")}function _r(t){var e=this.display;if(!(E(this,t)||e.activeTouch&&e.input.supportsTouch()))if(e.input.ensurePolled(),e.shift=t.shiftKey,se(e,t))oo||(e.scroller.draggable=!1,setTimeout((function(){return e.scroller.draggable=!0}),100));else if(!Or(this,t,"gutterClick",!0)){var n=Ve(this,t),i=B(t),r=n?xr(n,i):"single";h(this).defaultView.focus(),1==i&&this.state.selectingText&&this.state.selectingText(t),n&&Cr(this,i,n,r,t)||(1==i?n?kr(this,n,r,t):(t.target||t.srcElement)==e.scroller&&z(t):2==i?(n&&pi(this.doc,n),setTimeout((function(){return e.input.focus()}),20)):3==i&&(_o?this.display.input.onContextMenu(t):nn(this)))}}function Cr(t,e,n,i,r){var o="Click";return"double"==i?o="Double"+o:"triple"==i&&(o="Triple"+o),fr(t,nr((1==e?"Left":2==e?"Middle":"Right")+o,r),r,(function(e){if("string"==typeof e&&(e=Ns[e]),!e)return!1;var i=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),i=e(t,n)!=No}finally{t.state.suppressEdits=!1}return i}))}function kr(t,e,n,i){io?setTimeout(u(en,t),0):t.curOp.focus=s(c(t.display.wrapper));var r=t.getOption("configureMouse");null==(r=r?r(t,n,i):{}).unit&&(r.unit=(yo?i.shiftKey&&i.metaKey:i.altKey)?"rectangle":"single"==n?"char":"double"==n?"word":"line"),(null==r.extend||t.doc.extend)&&(r.extend=t.doc.extend||i.shiftKey),null==r.addNew&&(r.addNew=vo?i.metaKey:i.ctrlKey),null==r.moveOnDrag&&(r.moveOnDrag=!(vo?i.altKey:i.ctrlKey));var o,l=t.doc.sel;t.options.dragDrop&&Bo&&!t.isReadOnly()&&"single"==n&&-1<(o=l.contains(e))&&(0>rt((o=l.ranges[o]).from(),e)||0<e.xRel)&&(0<rt(o.to(),e)||0>e.xRel)?Sr(t,i,e,r):Mr(t,i,e,r)}function Sr(t,e,n,i){var r=t.display,o=!1,s=Sn(t,(function(e){oo&&(r.scroller.draggable=!1),t.state.draggingText=!1,t.state.delayingBlurEvent&&(t.hasFocus()?t.state.delayingBlurEvent=!1:nn(t)),A(r.wrapper.ownerDocument,"mouseup",s),A(r.wrapper.ownerDocument,"mousemove",l),A(r.scroller,"dragstart",a),A(r.scroller,"drop",s),o||(z(e),i.addNew||pi(t.doc,n,null,null,i.extend),oo&&!co||io&&9==ro?setTimeout((function(){r.wrapper.ownerDocument.body.focus({preventScroll:!0}),r.input.focus()}),20):r.input.focus())})),l=function(t){o=o||10<=Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)},a=function(){return o=!0};oo&&(r.scroller.draggable=!0),t.state.draggingText=s,s.copy=!i.moveOnDrag,Fo(r.wrapper.ownerDocument,"mouseup",s),Fo(r.wrapper.ownerDocument,"mousemove",l),Fo(r.scroller,"dragstart",a),Fo(r.scroller,"drop",s),t.state.delayingBlurEvent=!0,setTimeout((function(){return r.input.focus()}),20),r.scroller.dragDrop&&r.scroller.dragDrop()}function Lr(t,e,n){return"char"==n?new ms(e,e):"word"==n?t.findWordAt(e):"line"==n?new ms(it(e.line,0),ht(t.doc,it(e.line+1,0))):(t=n(t,e),new ms(t.from,t.to))}function Mr(t,e,n,i){function r(e){if(0!=rt(v,e))if(v=e,"rectangle"==i.unit){var r=[],o=t.options.tabSize,s=f(X(h,n.line).text,n.ch,o),l=f(X(h,e.line).text,e.ch,o),a=Math.min(s,l);s=Math.max(s,l),l=Math.min(n.line,e.line);for(var c=Math.min(t.lastLine(),Math.max(n.line,e.line));l<=c;l++){var d=X(h,l).text,y=g(d,a,o);a==s?r.push(new ms(it(l,y),it(l,y))):d.length>y&&r.push(new ms(it(l,y),it(l,g(d,s,o))))}r.length||r.push(new ms(n,n)),bi(h,Gn(t,u.ranges.slice(0,p).concat(r),p),{origin:"*mouse",scroll:!1}),t.scrollIntoView(e)}else r=m,a=Lr(t,e,i.unit),e=r.anchor,0<rt(a.anchor,e)?(o=a.head,e=at(r.from(),a.anchor)):(o=a.anchor,e=lt(r.to(),a.head)),(r=u.ranges.slice(0))[p]=Tr(t,new ms(ht(h,e),o)),bi(h,Gn(t,r,p),Do)}function o(e){var n=++b,l=Ve(t,e,!0,"rectangle"==i.unit);if(l)if(0!=rt(l,v)){t.curOp.focus=s(c(t.display.wrapper)),r(l);var u=an(a,h);(l.line>=u.to||l.line<u.from)&&setTimeout(Sn(t,(function(){b==n&&o(e)})),150)}else{var d=e.clientY<y.top?-20:e.clientY>y.bottom?20:0;d&&setTimeout(Sn(t,(function(){b==n&&(a.scroller.scrollTop+=d,o(e))})),50)}}function l(e){t.state.selectingText=!1,b=1/0,e&&(z(e),a.input.focus()),A(a.wrapper.ownerDocument,"mousemove",w),A(a.wrapper.ownerDocument,"mouseup",x),h.history.lastSelOrigin=null}io&&nn(t);var a=t.display,h=t.doc;z(e);var u=h.sel,d=u.ranges;if(i.addNew&&!i.extend)var p=h.sel.contains(n),m=-1<p?d[p]:new ms(n,n);else m=h.sel.primary(),p=h.sel.primIndex;"rectangle"==i.unit?(i.addNew||(m=new ms(n,n)),n=Ve(t,e,!0,!0),p=-1):(e=Lr(t,n,i.unit),m=i.extend?fi(m,e.anchor,e.head,i.extend):e),i.addNew?-1==p?(p=d.length,bi(h,Gn(t,d.concat([m]),p),{scroll:!1,origin:"*mouse"})):1<d.length&&d[p].empty()&&"char"==i.unit&&!i.extend?(bi(h,Gn(t,d.slice(0,p).concat(d.slice(p+1)),0),{scroll:!1,origin:"*mouse"}),u=h.sel):mi(h,p,m,Do):(p=0,bi(h,new gs([m],0),Do),u=h.sel);var v=n,y=a.wrapper.getBoundingClientRect(),b=0,w=Sn(t,(function(t){0!==t.buttons&&B(t)?o(t):l(t)})),x=Sn(t,l);t.state.selectingText=x,Fo(a.wrapper.ownerDocument,"mousemove",w),Fo(a.wrapper.ownerDocument,"mouseup",x)}function Tr(t,e){var n=e.anchor,i=e.head,r=X(t.doc,n.line);if(0==rt(n,i)&&n.sticky==i.sticky)return e;if(!(r=N(r)))return e;var o=O(r,n.ch,n.sticky),s=r[o];if(s.from!=n.ch&&s.to!=n.ch)return e;var l=o+(s.from==n.ch==(1!=s.level)?0:1);return 0==l||l==r.length?e:(i.line!=n.line?t=0<(i.line-n.line)*("ltr"==t.doc.direction?1:-1):(o=(t=O(r,i.ch,i.sticky))-o||(i.ch-n.ch)*(1==s.level?-1:1),t=t==l-1||t==l?0>o:0<o),r=(l=t==(1==(r=r[l+(t?-1:0)]).level))?r.from:r.to,l=l?"after":"before",n.ch==r&&n.sticky==l?e:new ms(new it(n.line,r,l),i))}function Or(t,e,n,i){if(e.touches)var r=e.touches[0].clientX,o=e.touches[0].clientY;else try{r=e.clientX,o=e.clientY}catch(t){return!1}if(r>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;i&&z(e);var s=(i=t.display).lineDiv.getBoundingClientRect();if(o>s.bottom||!P(t,n))return I(e);for(o-=s.top-i.viewOffset,s=0;s<t.display.gutterSpecs.length;++s){var l=i.gutters.childNodes[s];if(l&&l.getBoundingClientRect().right>=r)return D(t,n,t,r=tt(t.doc,o),t.display.gutterSpecs[s].className,e),I(e)}}function Nr(t,e){var n;(n=se(t.display,e))||(n=!!P(t,"gutterContextMenu")&&Or(t,e,"gutterContextMenu",!1)),n||E(t,e,"contextmenu")||_o||t.display.input.onContextMenu(e)}function Ar(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),be(t)}function Dr(t,e,n){!e!=!(n&&n!=Hs)&&(n=t.display.dragFunctions,(e=e?Fo:A)(t.display.scroller,"dragstart",n.start),e(t.display.scroller,"dragenter",n.enter),e(t.display.scroller,"dragover",n.over),e(t.display.scroller,"dragleave",n.leave),e(t.display.scroller,"drop",n.drop))}function Er(t){t.options.lineWrapping?(l(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth="",t.display.sizerWidth=null):(Co(t.display.wrapper,"CodeMirror-wrap"),It(t)),Be(t),Ue(t),be(t),setTimeout((function(){return bn(t)}),100)}function Wr(t,e){var n=this;if(!(this instanceof Wr))return new Wr(t,e);this.options=e=e?d(e):{},d(zs,e,!1);var i=e.value;"string"==typeof i?i=new _s(i,e.mode,null,e.lineSeparator,e.direction):e.mode&&(i.modeOption=e.mode),this.doc=i;var r=new Wr.inputStyles[e.inputStyle](this);for(var o in(t=this.display=new Bn(t,i,r,e)).wrapper.CodeMirror=this,Ar(this),e.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),xn(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Lo,keySeq:null,specialChars:null},e.autofocus&&!mo&&t.input.focus(),io&&11>ro&&setTimeout((function(){return n.display.input.reset(!0)}),20),Pr(this),ks||(Yi(),ks=!0),_n(this),this.curOp.forceUpdate=!0,ni(this,i),e.autofocus&&!mo||this.hasFocus()?setTimeout((function(){n.hasFocus()&&!n.state.focused&&rn(n)}),20):on(this),Rs)Rs.hasOwnProperty(o)&&Rs[o](this,e[o],Hs);for(zn(this),e.finishInit&&e.finishInit(this),i=0;i<Is.length;++i)Is[i](this);Cn(this),oo&&e.lineWrapping&&"optimizelegibility"==getComputedStyle(t.lineDiv).textRendering&&(t.lineDiv.style.textRendering="auto")}function Pr(t){function e(){o.activeTouch&&(s=setTimeout((function(){return o.activeTouch=null}),1e3),(l=o.activeTouch).end=+new Date)}function r(t,e){if(null==e.left)return!0;var n=e.left-t.left;return 400<n*n+(t=e.top-t.top)*t}var o=t.display;Fo(o.scroller,"mousedown",Sn(t,_r)),Fo(o.scroller,"dblclick",io&&11>ro?Sn(t,(function(e){if(!E(t,e)){var n=Ve(t,e);!n||Or(t,e,"gutterClick",!0)||se(t.display,e)||(z(e),e=t.findWordAt(n),pi(t.doc,e.anchor,e.head))}})):function(e){return E(t,e)||z(e)}),Fo(o.scroller,"contextmenu",(function(e){return Nr(t,e)})),Fo(o.input.getField(),"contextmenu",(function(e){o.scroller.contains(e.target)||Nr(t,e)}));var s,l={end:0};Fo(o.scroller,"touchstart",(function(e){var n;(n=!E(t,e))&&(n=!(n=1==e.touches.length&&(1>=(n=e.touches[0]).radiusX&&1>=n.radiusY))),n&&!Or(t,e,"gutterClick",!0)&&(o.input.ensurePolled(),clearTimeout(s),n=+new Date,o.activeTouch={start:n,moved:!1,prev:300>=n-l.end?l:null},1==e.touches.length&&(o.activeTouch.left=e.touches[0].pageX,o.activeTouch.top=e.touches[0].pageY))})),Fo(o.scroller,"touchmove",(function(){o.activeTouch&&(o.activeTouch.moved=!0)})),Fo(o.scroller,"touchend",(function(n){var i=o.activeTouch;if(i&&!se(o,n)&&null!=i.left&&!i.moved&&300>new Date-i.start){var s=t.coordsChar(o.activeTouch,"page");i=!i.prev||r(i,i.prev)?new ms(s,s):!i.prev.prev||r(i,i.prev.prev)?t.findWordAt(s):new ms(it(s.line,0),ht(t.doc,it(s.line+1,0))),t.setSelection(i.anchor,i.head),t.focus(),z(n)}e()})),Fo(o.scroller,"touchcancel",e),Fo(o.scroller,"scroll",(function(){o.scroller.clientHeight&&(gn(t,o.scroller.scrollTop),vn(t,o.scroller.scrollLeft,!0),D(t,"scroll",t))})),Fo(o.scroller,"mousewheel",(function(e){return Un(t,e)})),Fo(o.scroller,"DOMMouseScroll",(function(e){return Un(t,e)})),Fo(o.wrapper,"scroll",(function(){return o.wrapper.scrollTop=o.wrapper.scrollLeft=0})),o.dragFunctions={enter:function(e){E(t,e)||F(e)},over:function(e){if(!E(t,e)){var r=Ve(t,e);if(r){var o=document.createDocumentFragment();Ze(t,r,o),t.display.dragCursor||(t.display.dragCursor=i("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),n(t.display.dragCursor,o)}F(e)}},start:function(e){if(io&&(!t.state.draggingText||100>+new Date-Cs))F(e);else if(!E(t,e)&&!se(t.display,e)&&(e.dataTransfer.setData("Text",t.getSelection()),e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setDragImage&&!co)){var n=i("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",ho&&(n.width=n.height=1,t.display.wrapper.appendChild(n),n._top=n.offsetTop),e.dataTransfer.setDragImage(n,0,0),ho&&n.parentNode.removeChild(n)}},drop:Sn(t,Ki),leave:function(e){E(t,e)||qi(t)}};var a=o.input.getField();Fo(a,"keyup",(function(e){return br.call(t,e)})),Fo(a,"keydown",Sn(t,vr)),Fo(a,"keypress",Sn(t,wr)),Fo(a,"focus",(function(e){return rn(t,e)})),Fo(a,"blur",(function(e){return on(t,e)}))}function Hr(t,e,n,i){var r,o=t.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?r=ft(t,e).state:n="prev");var s=t.options.tabSize,l=X(o,e),a=f(l.text,null,s);l.stateAfter&&(l.stateAfter=null);var h=l.text.match(/^\s*/)[0];if(i||/\S/.test(l.text)){if("smart"==n&&((c=o.mode.indent(r,l.text.slice(h.length),l.text))==No||150<c)){if(!i)return;n="prev"}}else{var c=0;n="not"}if("prev"==n?c=e>o.first?f(X(o,e-1).text,null,s):0:"add"==n?c=a+t.options.indentUnit:"subtract"==n?c=a-t.options.indentUnit:"number"==typeof n&&(c=a+n),c=Math.max(0,c),n="",i=0,t.options.indentWithTabs)for(t=Math.floor(c/s);t;--t)i+=s,n+="\t";if(i<c&&(n+=m(c-i)),n!=h)return Pi(o,n,it(e,0),it(e,h.length),"+input"),l.stateAfter=null,!0;for(s=0;s<o.sel.ranges.length;s++)if((l=o.sel.ranges[s]).head.line==e&&l.head.ch<h.length){e=it(e,h.length),mi(o,s,new ms(e,e));break}}function zr(t,e,n,i,r){var o=t.doc;t.display.shift=!1,i||(i=o.sel);var s=+new Date-200,l="paste"==r||t.state.pasteIncoming>s,a=Vo(e),h=null;if(l&&1<i.ranges.length)if(Fs&&Fs.text.join("\n")==e){if(0==i.ranges.length%Fs.text.length){h=[];for(var c=0;c<Fs.text.length;c++)h.push(o.splitLines(Fs.text[c]))}}else a.length==i.ranges.length&&t.options.pasteLinesPerSelection&&(h=y(a,(function(t){return[t]})));c=t.curOp.updateInput;for(var u=i.ranges.length-1;0<=u;u--){var d=i.ranges[u],f=d.from(),p=d.to();d.empty()&&(n&&0<n?f=it(f.line,f.ch-n):t.state.overwrite&&!l?p=it(p.line,Math.min(X(o,p.line).text.length,p.ch+v(a).length)):l&&Fs&&Fs.lineWise&&Fs.text.join("\n")==a.join("\n")&&(f=p=it(f.line,0))),d={from:f,to:p,text:h?h[u%h.length]:a,origin:r||(l?"paste":t.state.cutIncoming>s?"cut":"+input")},Oi(t.doc,d),Xt(t,"inputRead",t,d)}e&&!l&&Ir(t,e),un(t),2>t.curOp.updateInput&&(t.curOp.updateInput=c),t.curOp.typing=!0,t.state.pasteIncoming=t.state.cutIncoming=-1}function Rr(t,e){var n=t.clipboardData&&t.clipboardData.getData("Text");if(n)return t.preventDefault(),e.isReadOnly()||e.options.disableInput||!e.hasFocus()||kn(e,(function(){return zr(e,n,0,null,"paste")})),!0}function Ir(t,e){if(t.options.electricChars&&t.options.smartIndent)for(var n=t.doc.sel,i=n.ranges.length-1;0<=i;i--){var r=n.ranges[i];if(!(100<r.head.ch||i&&n.ranges[i-1].head.line==r.head.line)){var o=t.getModeAt(r.head),s=!1;if(o.electricChars){for(var l=0;l<o.electricChars.length;l++)if(-1<e.indexOf(o.electricChars.charAt(l))){s=Hr(t,r.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(X(t.doc,r.head.line).text.slice(0,r.head.ch))&&(s=Hr(t,r.head.line,"smart"));s&&Xt(t,"electricInput",t,r.head.line)}}}function Fr(t){for(var e=[],n=[],i=0;i<t.doc.sel.ranges.length;i++){var r=t.doc.sel.ranges[i].head.line;r={anchor:it(r,0),head:it(r+1,0)},n.push(r),e.push(t.getRange(r.anchor,r.head))}return{text:e,ranges:n}}function Br(t,e,n,i){t.setAttribute("autocorrect",n?"on":"off"),t.setAttribute("autocapitalize",i?"on":"off"),t.setAttribute("spellcheck",!!e)}function Vr(){var t=i("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),e=i("div",[t],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return oo?t.style.width="1000px":t.setAttribute("wrap","off"),po&&(t.style.border="1px solid black"),e}function $r(t,e,n,i,r){function o(o){if("codepoint"==i){var s=a.text.charCodeAt(e.ch+(0<n?0:-1));s=isNaN(s)?null:new it(e.line,Math.max(0,Math.min(a.text.length,e.ch+n*((0<n?55296<=s&&56320>s:56320<=s&&57343>s)?2:1))),-n)}else s=r?hr(t.cm,a,e,n):lr(a,e,n);if(null==s){if((o=!o)&&((o=e.line+h)<t.first||o>=t.first+t.size?o=!1:(e=new it(o,e.ch,e.sticky),o=a=X(t,o))),!o)return!1;e=ar(r,t.cm,a,e.line,h)}else e=s;return!0}var s=e,l=n,a=X(t,e.line),h=r&&"rtl"==t.direction?-n:n;if("char"==i||"codepoint"==i)o();else if("column"==i)o(!0);else if("word"==i||"group"==i)for(var c=null,u="group"==i,d=t.cm&&t.cm.getHelper(e,"wordChars"),f=!0;!(0>n)||o(!f);f=!1){var p=a.text.charAt(e.ch)||"\n";if(p=C(p,d)?"w":u&&"\n"==p?"n":!u||/\s/.test(p)?null:"p",!u||f||p||(p="s"),c&&c!=p){0>n&&(n=1,o(),e.sticky="after");break}if(p&&(c=p),0<n&&!o(!f))break}return ot(s,l=Si(t,e,s,l,!0))&&(l.hitSide=!0),l}function Ur(t,e,n,i){var r=t.doc,o=e.left;if("page"==i){var s=Math.min(t.display.wrapper.clientHeight,h(t).defaultView.innerHeight||r(t).documentElement.clientHeight);s=Math.max(s-.5*He(t.display),3),s=(0<n?e.bottom:e.top)+n*s}else"line"==i&&(s=0<n?e.bottom+3:e.top-3);for(;(e=Oe(t,o,s)).outside;){if(0>n?0>=s:s>=r.height){e.hitSide=!0;break}s+=5*n}return e}function Gr(t,e){var n=fe(t,e.line);if(!n||n.hidden)return null;var i=X(t.doc,e.line);return n=de(n,i,e.line),t=N(i,t.doc.direction),i="left",t&&(i=O(t,e.ch)%2?"right":"left"),(e=me(n.map,e.ch,i)).offset="right"==e.collapse?e.end:e.start,e}function jr(t){for(;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}function Kr(t,e){return e&&(t.bad=!0),t}function qr(t,e,n,i,r){function o(t){return function(e){return e.id==t}}function s(){c&&(h+=u,d&&(h+=u),c=d=!1)}function l(t){t&&(s(),h+=t)}function a(e){if(1==e.nodeType){var n,h=e.getAttribute("cm-text");if(h)l(h);else if(h=e.getAttribute("cm-marker"))(e=t.findMarks(it(i,0),it(r+1,0),o(+h))).length&&(n=e[0].find(0))&&l(Y(t.doc,n.from,n.to).join(u));else if("false"!=e.getAttribute("contenteditable")&&(n=/^(pre|div|p|li|table|br)$/i.test(e.nodeName),/^br$/i.test(e.nodeName)||0!=e.textContent.length)){for(n&&s(),h=0;h<e.childNodes.length;h++)a(e.childNodes[h]);/^(pre|p)$/i.test(e.nodeName)&&(d=!0),n&&(c=!0)}}else 3==e.nodeType&&l(e.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(var h="",c=!1,u=t.doc.lineSeparator(),d=!1;a(e),e!=n;)e=e.nextSibling,d=!1;return h}function Xr(t,e,n){if(e==t.display.lineDiv){var i=t.display.lineDiv.childNodes[n];if(!i)return Kr(t.clipPos(it(t.display.viewTo-1)),!0);e=null,n=0}else for(i=e;;i=i.parentNode){if(!i||i==t.display.lineDiv)return null;if(i.parentNode&&i.parentNode==t.display.lineDiv)break}for(var r=0;r<t.display.view.length;r++){var o=t.display.view[r];if(o.node==i)return Yr(o,e,n)}}function Yr(t,e,n){function i(e,n,i){for(var r=-1;r<(c?c.length:0);r++)for(var o=0>r?h.map:c[r],s=0;s<o.length;s+=3){var l=o[s+2];if(l==e||l==n)return n=Q(0>r?t.line:t.rest[r]),r=o[s]+i,(0>i||l!=e)&&(r=o[s+(i?1:0)]),it(n,r)}}var r=t.text.firstChild,s=!1;if(!e||!o(r,e))return Kr(it(Q(t.line),0),!0);if(e==r&&(s=!0,e=r.childNodes[n],n=0,!e))return Kr(it(Q(n=t.rest?v(t.rest):t.line),n.text.length),s);var l=3==e.nodeType?e:null,a=e;for(l||1!=e.childNodes.length||3!=e.firstChild.nodeType||(l=e.firstChild,n&&(n=l.nodeValue.length));a.parentNode!=r;)a=a.parentNode;var h=t.measure,c=h.maps;if(e=i(l,a,n))return Kr(e,s);for(r=a.nextSibling,l=l?l.nodeValue.length-n:0;r;r=r.nextSibling){if(e=i(r,r.firstChild,0))return Kr(it(e.line,e.ch-l),s);l+=r.textContent.length}for(a=a.previousSibling;a;a=a.previousSibling){if(e=i(a,a.firstChild,-1))return Kr(it(e.line,e.ch+n),s);n+=a.textContent.length}}var Zr=navigator.userAgent,Jr=navigator.platform,Qr=/gecko\/\d/i.test(Zr),to=/MSIE \d/.test(Zr),eo=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Zr),no=/Edge\/(\d+)/.exec(Zr),io=to||eo||no,ro=io&&(to?document.documentMode||6:+(no||eo)[1]),oo=!no&&/WebKit\//.test(Zr),so=oo&&/Qt\/\d+\.\d+/.test(Zr),lo=!no&&/Chrome\/(\d+)/.exec(Zr),ao=lo&&+lo[1],ho=/Opera\//.test(Zr),co=/Apple Computer/.test(navigator.vendor),uo=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(Zr),fo=/PhantomJS/.test(Zr),po=co&&(/Mobile\/\w+/.test(Zr)||2<navigator.maxTouchPoints),go=/Android/.test(Zr),mo=po||go||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(Zr),vo=po||/Mac/.test(Jr),yo=/\bCrOS\b/.test(Zr),bo=/win/i.test(Jr),wo=ho&&Zr.match(/Version\/(\d*\.\d*)/);wo&&=Number(wo[1]),wo&&15<=wo&&(ho=!1,oo=!0);var xo=vo&&(so||ho&&(null==wo||12.11>wo)),_o=Qr||io&&9<=ro,Co=function(e,n){var i=e.className;if(n=t(n).exec(i)){var r=i.slice(n.index+n[0].length);e.className=i.slice(0,n.index)+(r?n[1]+r:"")}},ko=document.createRange?function(t,e,n,i){var r=document.createRange();return r.setEnd(i||t,n),r.setStart(t,e),r}:function(t,e,n){var i=document.body.createTextRange();try{i.moveToElementText(t.parentNode)}catch(t){return i}return i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",e),i},So=function(t){t.select()};po?So=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:io&&(So=function(t){try{t.select()}catch(t){}});var Lo=function(){this.f=this.id=null,this.time=0,this.handler=u(this.onTimeout,this)};Lo.prototype.onTimeout=function(t){t.id=0,t.time<=+new Date?t.f():setTimeout(t.handler,t.time-+new Date)},Lo.prototype.set=function(t,e){this.f=e,e=+new Date+t,(!this.id||e<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,t),this.time=e)};var Mo,To,Oo,No={toString:function(){return"CodeMirror.Pass"}},Ao={scroll:!1},Do={origin:"*mouse"},Eo={origin:"+move"},Wo=[""],Po=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Ho=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,zo=null,Ro=function(){function t(t,e,n){this.level=t,this.from=e,this.to=n}var e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,n=/[stwN]/,i=/[LRr]/,r=/[Lb1n]/,o=/[1n]/;return function(s,l){var a,h="ltr"==l?"L":"R";if(0==s.length||"ltr"==l&&!e.test(s))return!1;for(var c=s.length,u=[],d=0;d<c;++d){var f=u,p=f.push,g=s.charCodeAt(d);g=247>=g?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(g):1424<=g&&1524>=g?"R":1536<=g&&1785>=g?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(g-1536):1774<=g&&2220>=g?"r":8192<=g&&8203>=g?"w":8204==g?"b":"L",p.call(f,g)}for(d=0,f=h;d<c;++d)"m"==(p=u[d])?u[d]=f:f=p;for(d=0,f=h;d<c;++d)"1"==(p=u[d])&&"r"==f?u[d]="n":i.test(p)&&(f=p,"r"==p&&(u[d]="R"));for(d=1,f=u[0];d<c-1;++d)"+"==(p=u[d])&&"1"==f&&"1"==u[d+1]?u[d]="1":","!=p||f!=u[d+1]||"1"!=f&&"n"!=f||(u[d]=f),f=p;for(d=0;d<c;++d)if(","==(f=u[d]))u[d]="N";else if("%"==f){for(f=d+1;f<c&&"%"==u[f];++f);for(p=d&&"!"==u[d-1]||f<c&&"1"==u[f]?"1":"N";d<f;++d)u[d]=p;d=f-1}for(d=0,f=h;d<c;++d)p=u[d],"L"==f&&"1"==p?u[d]="L":i.test(p)&&(f=p);for(f=0;f<c;++f)if(n.test(u[f])){for(d=f+1;d<c&&n.test(u[d]);++d);for(p=(p="L"==(f?u[f-1]:h))==("L"==(d<c?u[d]:h))?p?"L":"R":h;f<d;++f)u[f]=p;f=d-1}for(h=[],d=0;d<c;)if(r.test(u[d])){for(f=d,++d;d<c&&r.test(u[d]);++d);h.push(new t(0,f,d))}else{var m=d;for(f=h.length,p="rtl"==l?1:0,++d;d<c&&"L"!=u[d];++d);for(g=m;g<d;)if(o.test(u[g])){for(m<g&&(h.splice(f,0,new t(1,m,g)),f+=p),m=g,++g;g<d&&o.test(u[g]);++g);h.splice(f,0,new t(2,m,g)),f+=p,m=g}else++g;m<d&&h.splice(f,0,new t(1,m,d))}return"ltr"==l&&(1==h[0].level&&(a=s.match(/^\s+/))&&(h[0].from=a[0].length,h.unshift(new t(0,0,a[0].length))),1==v(h).level&&(a=s.match(/\s+$/))&&(v(h).to-=a[0].length,h.push(new t(0,c-a[0].length,c)))),"rtl"==l?h.reverse():h}}(),Io=[],Fo=function(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent?t.attachEvent("on"+e,n):(t=t._handlers||(t._handlers={}))[e]=(t[e]||Io).concat(n)},Bo=function(){if(io&&9>ro)return!1;var t=i("div");return"draggable"in t||"dragDrop"in t}(),Vo=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,n=[],i=t.length;e<=i;){var r=t.indexOf("\n",e);-1==r&&(r=t.length);var o=t.slice(e,"\r"==t.charAt(r-1)?r-1:r),s=o.indexOf("\r");-1!=s?(n.push(o.slice(0,s)),e+=s+1):(n.push(o),e=r+1)}return n}:function(t){return t.split(/\r\n?|\n/)},$o=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(t){return!1}}:function(t){try{var e=t.ownerDocument.selection.createRange()}catch(t){}return!(!e||e.parentElement()!=t)&&0!=e.compareEndPoints("StartToEnd",e)},Uo="oncopy"in(Oo=i("div"))||(Oo.setAttribute("oncopy","return;"),"function"==typeof Oo.oncopy),Go=null,jo={},Ko={},qo={},Xo=function(t,e,n){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lineStart=this.lastColumnPos=this.lastColumnValue=0,this.lineOracle=n};Xo.prototype.eol=function(){return this.pos>=this.string.length},Xo.prototype.sol=function(){return this.pos==this.lineStart},Xo.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Xo.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Xo.prototype.eat=function(t){var e=this.string.charAt(this.pos);if("string"==typeof t?e==t:e&&(t.test?t.test(e):t(e)))return++this.pos,e},Xo.prototype.eatWhile=function(t){for(var e=this.pos;this.eat(t););return this.pos>e},Xo.prototype.eatSpace=function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},Xo.prototype.skipToEnd=function(){this.pos=this.string.length},Xo.prototype.skipTo=function(t){if(-1<(t=this.string.indexOf(t,this.pos)))return this.pos=t,!0},Xo.prototype.backUp=function(t){this.pos-=t},Xo.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=f(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?f(this.string,this.lineStart,this.tabSize):0)},Xo.prototype.indentation=function(){return f(this.string,null,this.tabSize)-(this.lineStart?f(this.string,this.lineStart,this.tabSize):0)},Xo.prototype.match=function(t,e,n){if("string"!=typeof t)return(t=this.string.slice(this.pos).match(t))&&0<t.index?null:(t&&!1!==e&&(this.pos+=t[0].length),t);var i=function(t){return n?t.toLowerCase():t};return i(this.string.substr(this.pos,t.length))==i(t)?(!1!==e&&(this.pos+=t.length),!0):void 0},Xo.prototype.current=function(){return this.string.slice(this.start,this.pos)},Xo.prototype.hideFirstChars=function(t,e){this.lineStart+=t;try{return e()}finally{this.lineStart-=t}},Xo.prototype.lookAhead=function(t){var e=this.lineOracle;return e&&e.lookAhead(t)},Xo.prototype.baseToken=function(){var t=this.lineOracle;return t&&t.baseToken(this.pos)};var Yo=function(t,e){this.state=t,this.lookAhead=e},Zo=function(t,e,n,i){this.state=e,this.doc=t,this.line=n,this.maxLookAhead=i||0,this.baseTokens=null,this.baseTokenPos=1};Zo.prototype.lookAhead=function(t){var e=this.doc.getLine(this.line+t);return null!=e&&t>this.maxLookAhead&&(this.maxLookAhead=t),e},Zo.prototype.baseToken=function(t){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=t;)this.baseTokenPos+=2;var e=this.baseTokens[this.baseTokenPos+1];return{type:e&&e.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-t}},Zo.prototype.nextLine=function(){this.line++,0<this.maxLookAhead&&this.maxLookAhead--},Zo.fromSaved=function(t,e,n){return e instanceof Yo?new Zo(t,j(t.mode,e.state),n,e.lookAhead):new Zo(t,j(t.mode,e),n)},Zo.prototype.save=function(t){return t=!1!==t?j(this.doc.mode,this.state):this.state,0<this.maxLookAhead?new Yo(t,this.maxLookAhead):t};var Jo=function(t,e,n){this.start=t.start,this.end=t.pos,this.string=t.current(),this.type=e||null,this.state=n},Qo=!1,ts=!1,es=function(t,e,n){this.text=t,Tt(this,e),this.height=n?n(this):1};es.prototype.lineNo=function(){return Q(this)},H(es);var ns,is={},rs={},os=null,ss=null,ls={left:0,right:0,top:0,bottom:0},as=function(t,e,n){this.cm=n;var r=this.vert=i("div",[i("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),o=this.horiz=i("div",[i("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=o.tabIndex=-1,t(r),t(o),Fo(r,"scroll",(function(){r.clientHeight&&e(r.scrollTop,"vertical")})),Fo(o,"scroll",(function(){o.clientWidth&&e(o.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,io&&8>ro&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};as.prototype.update=function(t){var e=t.scrollWidth>t.clientWidth+1,n=t.scrollHeight>t.clientHeight+1,i=t.nativeBarWidth;return n?(this.vert.style.display="block",this.vert.style.bottom=e?i+"px":"0",this.vert.firstChild.style.height=Math.max(0,t.scrollHeight-t.clientHeight+(t.viewHeight-(e?i:0)))+"px"):(this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0"),e?(this.horiz.style.display="block",this.horiz.style.right=n?i+"px":"0",this.horiz.style.left=t.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,t.scrollWidth-t.clientWidth+(t.viewWidth-t.barLeft-(n?i:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&0<t.clientHeight&&(0==i&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?i:0,bottom:e?i:0}},as.prototype.setScrollLeft=function(t){this.horiz.scrollLeft!=t&&(this.horiz.scrollLeft=t),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},as.prototype.setScrollTop=function(t){this.vert.scrollTop!=t&&(this.vert.scrollTop=t),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},as.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=vo&&!uo?"12px":"18px",this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new Lo,this.disableVert=new Lo},as.prototype.enableZeroWidthBar=function(t,e,n){function i(){var r=t.getBoundingClientRect();("vert"==n?document.elementFromPoint(r.right-1,(r.top+r.bottom)/2):document.elementFromPoint((r.right+r.left)/2,r.bottom-1))!=t?t.style.visibility="hidden":e.set(1e3,i)}t.style.visibility="",e.set(1e3,i)},as.prototype.clear=function(){var t=this.horiz.parentNode;t.removeChild(this.horiz),t.removeChild(this.vert)};var hs=function(){};hs.prototype.update=function(){return{bottom:0,right:0}},hs.prototype.setScrollLeft=function(){},hs.prototype.setScrollTop=function(){},hs.prototype.clear=function(){};var cs={native:as,null:hs},us=0,ds=function(t,e,n){var i=t.display;this.viewport=e,this.visible=an(i,t.doc,e),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=ce(t),this.force=n,this.dims=Re(t),this.events=[]};ds.prototype.signal=function(t,e){P(t,e)&&this.events.push(arguments)},ds.prototype.finish=function(){for(var t=0;t<this.events.length;t++)D.apply(null,this.events[t])};var fs=0,ps=null;io?ps=-.53:Qr?ps=15:lo?ps=-.7:co&&(ps=-1/3);var gs=function(t,e){this.ranges=t,this.primIndex=e};gs.prototype.primary=function(){return this.ranges[this.primIndex]},gs.prototype.equals=function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var e=0;e<this.ranges.length;e++){var n=this.ranges[e],i=t.ranges[e];if(!ot(n.anchor,i.anchor)||!ot(n.head,i.head))return!1}return!0},gs.prototype.deepCopy=function(){for(var t=[],e=0;e<this.ranges.length;e++)t[e]=new ms(st(this.ranges[e].anchor),st(this.ranges[e].head));return new gs(t,this.primIndex)},gs.prototype.somethingSelected=function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},gs.prototype.contains=function(t,e){e||=t;for(var n=0;n<this.ranges.length;n++){var i=this.ranges[n];if(0<=rt(e,i.from())&&0>=rt(t,i.to()))return n}return-1};var ms=function(t,e){this.anchor=t,this.head=e};ms.prototype.from=function(){return at(this.anchor,this.head)},ms.prototype.to=function(){return lt(this.anchor,this.head)},ms.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Fi.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var n=t,i=t+e;n<i;++n){var r=this.lines[n];this.height-=r.height;var o=r;o.parent=null,Mt(o),Xt(r,"delete")}this.lines.splice(t,e)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,e,n){for(this.height+=n,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t)),t=0;t<e.length;++t)e[t].parent=this},iterN:function(t,e,n){for(e=t+e;t<e;++t)if(n(this.lines[t]))return!0}},Bi.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var n=0;n<this.children.length;++n){var i=this.children[n],r=i.chunkSize();if(t<r){var o=Math.min(e,r-t),s=i.height;if(i.removeInner(t,o),this.height-=s-i.height,r==o&&(this.children.splice(n--,1),i.parent=null),0==(e-=o))break;t=0}else t-=r}25>this.size-e&&(1<this.children.length||!(this.children[0]instanceof Fi))&&(t=[],this.collapse(t),this.children=[new Fi(t)],this.children[0].parent=this)},collapse:function(t){for(var e=0;e<this.children.length;++e)this.children[e].collapse(t)},insertInner:function(t,e,n){this.size+=e.length,this.height+=n;for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(t<=o){if(r.insertInner(t,e,n),r.lines&&50<r.lines.length){for(e=t=r.lines.length%25+25;e<r.lines.length;)n=new Fi(r.lines.slice(e,e+=25)),r.height-=n.height,this.children.splice(++i,0,n),n.parent=this;r.lines=r.lines.slice(0,t),this.maybeSpill()}break}t-=o}},maybeSpill:function(){if(!(10>=this.children.length)){var t=this;do{var e=t.children.splice(t.children.length-5,5);if(e=new Bi(e),t.parent){t.size-=e.size,t.height-=e.height;var n=p(t.parent.children,t);t.parent.children.splice(n+1,0,e)}else(n=new Bi(t.children)).parent=t,t.children=[n,e],t=n;e.parent=t.parent}while(10<t.children.length);t.parent.maybeSpill()}},iterN:function(t,e,n){for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(t<o){if(o=Math.min(e,o-t),r.iterN(t,o,n))return!0;if(0==(e-=o))break;t=0}else t-=o}}};var vs=function(t,e,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.doc=t,this.node=e};vs.prototype.clear=function(){var t=this.doc.cm,e=this.line.widgets,n=this.line,i=Q(n);if(null!=i&&e){for(var r=0;r<e.length;++r)e[r]==this&&e.splice(r--,1);e.length||(n.widgets=null);var o=oe(this);J(n,Math.max(0,n.height-o)),t&&(kn(t,(function(){var e=-o;zt(n)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&cn(t,e),Ge(t,i,"widget")})),Xt(t,"lineWidgetCleared",t,this,i))}},vs.prototype.changed=function(){var t=this,e=this.height,n=this.doc.cm,i=this.line;this.height=null;var r=oe(this)-e;r&&(Pt(this.doc,i)||J(i,i.height+r),n&&kn(n,(function(){n.curOp.forceUpdate=!0,zt(i)<(n.curOp&&n.curOp.scrollTop||n.doc.scrollTop)&&cn(n,r),Xt(n,"lineWidgetChanged",n,t,Q(i))})))},H(vs);var ys=0,bs=function(t,e){this.lines=[],this.type=e,this.doc=t,this.id=++ys};bs.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,e=t&&!t.curOp;if(e&&_n(t),P(this,"clear")){var n=this.find();n&&Xt(this,"clear",n.from,n.to)}for(var i=n=null,r=0;r<this.lines.length;++r){var o=this.lines[r],s=Ct(o.markedSpans,this);t&&!this.collapsed?Ge(t,Q(o),"text"):t&&(null!=s.to&&(i=Q(o)),null!=s.from&&(n=Q(o)));for(var l=o,a=void 0,h=o.markedSpans,c=s,u=0;u<h.length;++u)h[u]!=c&&(a||=[]).push(h[u]);l.markedSpans=a,null==s.from&&this.collapsed&&!Pt(this.doc,o)&&t&&J(o,He(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(r=0;r<this.lines.length;++r)(s=Rt(o=Dt(this.lines[r])))>t.display.maxLineLength&&(t.display.maxLine=o,t.display.maxLineLength=s,t.display.maxLineChanged=!0);null!=n&&t&&this.collapsed&&Ue(t,n,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&_i(t.doc)),t&&Xt(t,"markerCleared",t,this,n,i),e&&Cn(t),this.parent&&this.parent.clear()}},bs.prototype.find=function(t,e){null==t&&"bookmark"==this.type&&(t=1);for(var n,i,r=0;r<this.lines.length;++r){var o=this.lines[r],s=Ct(o.markedSpans,this);if(null!=s.from&&(n=it(e?o:Q(o),s.from),-1==t))return n;if(null!=s.to&&(i=it(e?o:Q(o),s.to),1==t))return i}return n&&{from:n,to:i}},bs.prototype.changed=function(){var t=this,e=this.find(-1,!0),n=this,i=this.doc.cm;e&&i&&kn(i,(function(){var r=e.line,o=Q(e.line);(o=fe(i,o))&&(ve(o),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,Pt(n.doc,r)||null==n.height||(o=n.height,n.height=null,(o=oe(n)-o)&&J(r,r.height+o)),Xt(i,"markerChanged",i,t)}))},bs.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=p(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},bs.prototype.detachLine=function(t){this.lines.splice(p(this.lines,t),1),!this.lines.length&&this.doc.cm&&((t=this.doc.cm.curOp).maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)},H(bs);var ws=function(t,e){for(this.markers=t,this.primary=e,e=0;e<t.length;++e)t[e].parent=this};ws.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();Xt(this,"clear")}},ws.prototype.find=function(t,e){return this.primary.find(t,e)},H(ws);var xs=0,_s=function(t,e,n,i,r){if(!(this instanceof _s))return new _s(t,e,n,i,r);null==n&&(n=0),Bi.call(this,[new Fi([new es("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n,n=it(n,0),this.sel=jn(n),this.history=new oi(null),this.id=++xs,this.modeOption=e,this.lineSep=i,this.direction="rtl"==r?"rtl":"ltr",this.extend=!1,"string"==typeof t&&(t=this.splitLines(t)),ti(this,{from:n,to:n,text:t}),bi(this,jn(n),Ao)};_s.prototype=x(Bi.prototype,{constructor:_s,iter:function(t,e,n){n?this.iterN(t-this.first,e-t,n):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var n=0,i=0;i<e.length;++i)n+=e[i].height;this.insertInner(t-this.first,e,n)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=Z(this,this.first,this.first+this.size);return!1===t?e:e.join(t||this.lineSeparator())},setValue:Mn((function(t){var e=it(this.first,0),n=this.first+this.size-1;Oi(this,{from:e,to:it(n,X(this,n).text.length),text:this.splitLines(t),origin:"setValue",full:!0},!0),this.cm&&dn(this.cm,0,0),bi(this,jn(e),Ao)})),replaceRange:function(t,e,n,i){Pi(this,t,e=ht(this,e),n=n?ht(this,n):e,i)},getRange:function(t,e,n){return t=Y(this,ht(this,t),ht(this,e)),!1===n?t:""===n?t.join(""):t.join(n||this.lineSeparator())},getLine:function(t){return(t=this.getLineHandle(t))&&t.text},getLineHandle:function(t){if(et(this,t))return X(this,t)},getLineNumber:function(t){return Q(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=X(this,t)),Dt(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return ht(this,t)},getCursor:function(t){var e=this.sel.primary();return null==t||"head"==t?e.head:"anchor"==t?e.anchor:"end"==t||"to"==t||!1===t?e.to():e.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Mn((function(t,e,n){bi(this,jn(t=ht(this,"number"==typeof t?it(t,e||0):t),null),n)})),setSelection:Mn((function(t,e,n){bi(this,jn(ht(this,t),t=ht(this,e||t)),n)})),extendSelection:Mn((function(t,e,n){pi(this,ht(this,t),e&&ht(this,e),n)})),extendSelections:Mn((function(t,e){gi(this,ct(this,t),e)})),extendSelectionsBy:Mn((function(t,e){gi(this,ct(this,t=y(this.sel.ranges,t)),e)})),setSelections:Mn((function(t,e,n){if(t.length){for(var i=[],r=0;r<t.length;r++)i[r]=new ms(ht(this,t[r].anchor),ht(this,t[r].head||t[r].anchor));null==e&&(e=Math.min(t.length-1,this.sel.primIndex)),bi(this,Gn(this.cm,i,e),n)}})),addSelection:Mn((function(t,e,n){var i=this.sel.ranges.slice(0);i.push(new ms(ht(this,t),ht(this,e||t))),bi(this,Gn(this.cm,i,i.length-1),n)})),getSelection:function(t){for(var e,n=this.sel.ranges,i=0;i<n.length;i++){var r=Y(this,n[i].from(),n[i].to());e=e?e.concat(r):r}return!1===t?e:e.join(t||this.lineSeparator())},getSelections:function(t){for(var e=[],n=this.sel.ranges,i=0;i<n.length;i++){var r=Y(this,n[i].from(),n[i].to());!1!==t&&(r=r.join(t||this.lineSeparator())),e[i]=r}return e},replaceSelection:function(t,e,n){for(var i=[],r=0;r<this.sel.ranges.length;r++)i[r]=t;this.replaceSelections(i,e,n||"+input")},replaceSelections:Mn((function(t,e,n){for(var i=[],r=this.sel,o=0;o<r.ranges.length;o++){var s=r.ranges[o];i[o]={from:s.from(),to:s.to(),text:this.splitLines(t[o]),origin:n}}if(t=e&&"end"!=e){for(t=[],r=n=it(this.first,0),o=0;o<i.length;o++){var l=i[o];s=Yn(l.from,n,r);var a=Yn(Kn(l),n,r);n=l.to,r=a,"around"==e?(l=0>rt((l=this.sel.ranges[o]).head,l.anchor),t[o]=new ms(l?a:s,l?s:a)):t[o]=new ms(s,s)}t=new gs(t,this.sel.primIndex)}for(e=t,t=i.length-1;0<=t;t--)Oi(this,i[t]);e?yi(this,e):this.cm&&un(this.cm)})),undo:Mn((function(){Ai(this,"undo")})),redo:Mn((function(){Ai(this,"redo")})),undoSelection:Mn((function(){Ai(this,"undo",!0)})),redoSelection:Mn((function(){Ai(this,"redo",!0)})),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,e=0,n=0,i=0;i<t.done.length;i++)t.done[i].ranges||++e;for(i=0;i<t.undone.length;i++)t.undone[i].ranges||++n;return{undo:e,redo:n}},clearHistory:function(){var t=this;this.history=new oi(this.history),ei(this,(function(e){return e.history=t.history}),!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:di(this.history.done),undone:di(this.history.undone)}},setHistory:function(t){var e=this.history=new oi(this.history);e.done=di(t.done.slice(0),null,!0),e.undone=di(t.undone.slice(0),null,!0)},setGutterMarker:Mn((function(t,e,n){return Ii(this,t,"gutter",(function(t){var i=t.gutterMarkers||(t.gutterMarkers={});return i[e]=n,!n&&k(i)&&(t.gutterMarkers=null),!0}))})),clearGutter:Mn((function(t){var e=this;this.iter((function(n){n.gutterMarkers&&n.gutterMarkers[t]&&Ii(e,n,"gutter",(function(){return n.gutterMarkers[t]=null,k(n.gutterMarkers)&&(n.gutterMarkers=null),!0}))}))})),lineInfo:function(t){if("number"==typeof t){if(!et(this,t))return null;var e=t;if(!(t=X(this,t)))return null}else if(null==(e=Q(t)))return null;return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},addLineClass:Mn((function(e,n,i){return Ii(this,e,"gutter"==n?"gutter":"class",(function(e){var r="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass";if(e[r]){if(t(i).test(e[r]))return!1;e[r]+=" "+i}else e[r]=i;return!0}))})),removeLineClass:Mn((function(e,n,i){return Ii(this,e,"gutter"==n?"gutter":"class",(function(e){var r="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass",o=e[r];if(!o)return!1;if(null==i)e[r]=null;else{var s=o.match(t(i));if(!s)return!1;var l=s.index+s[0].length;e[r]=o.slice(0,s.index)+(s.index&&l!=o.length?" ":"")+o.slice(l)||null}return!0}))})),addLineWidget:Mn((function(t,e,n){return Vi(this,t,e,n)})),removeLineWidget:function(t){t.clear()},markText:function(t,e,n){return $i(this,ht(this,t),ht(this,e),n,n&&n.type||"range")},setBookmark:function(t,e){return e={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft,clearWhenEmpty:!1,shared:e&&e.shared,handleMouseEvents:e&&e.handleMouseEvents},$i(this,t=ht(this,t),t,e,"bookmark")},findMarksAt:function(t){var e=[],n=X(this,(t=ht(this,t)).line).markedSpans;if(n)for(var i=0;i<n.length;++i){var r=n[i];(null==r.from||r.from<=t.ch)&&(null==r.to||r.to>=t.ch)&&e.push(r.marker.parent||r.marker)}return e},findMarks:function(t,e,n){t=ht(this,t),e=ht(this,e);var i=[],r=t.line;return this.iter(t.line,e.line+1,(function(o){if(o=o.markedSpans)for(var s=0;s<o.length;s++){var l=o[s];null!=l.to&&r==t.line&&t.ch>=l.to||null==l.from&&r!=t.line||null!=l.from&&r==e.line&&l.from>=e.ch||n&&!n(l.marker)||i.push(l.marker.parent||l.marker)}++r})),i},getAllMarks:function(){var t=[];return this.iter((function(e){if(e=e.markedSpans)for(var n=0;n<e.length;++n)null!=e[n].from&&t.push(e[n].marker)})),t},posFromIndex:function(t){var e,n=this.first,i=this.lineSeparator().length;return this.iter((function(r){if((r=r.text.length+i)>t)return e=t,!0;t-=r,++n})),ht(this,it(n,e))},indexFromPos:function(t){var e=(t=ht(this,t)).ch;if(t.line<this.first||0>t.ch)return 0;var n=this.lineSeparator().length;return this.iter(this.first,t.line,(function(t){e+=t.text.length+n})),e},copy:function(t){var e=new _s(Z(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel=this.sel,e.extend=!1,t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||={};var e=this.first,n=this.first+this.size;for(null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<n&&(n=t.to),e=new _s(Z(this,e,n),t.mode||this.modeOption,e,this.lineSep,this.direction),t.sharedHist&&(e.history=this.history),(this.linked||(this.linked=[])).push({doc:e,sharedHist:t.sharedHist}),e.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],t=Gi(this),n=0;n<t.length;n++){var i=t[n],r=i.find(),o=e.clipPos(r.from);rt(o,r=e.clipPos(r.to))&&(o=$i(e,o,r,i.primary,i.primary.type),i.markers.push(o),o.parent=i)}return e},unlinkDoc:function(t){if(t instanceof Wr&&(t=t.doc),this.linked)for(var e=0;e<this.linked.length;++e)if(this.linked[e].doc==t){this.linked.splice(e,1),t.unlinkDoc(this),ji(Gi(this));break}if(t.history==this.history){var n=[t.id];ei(t,(function(t){return n.push(t.id)}),!0),t.history=new oi(null),t.history.done=di(this.history.done,n),t.history.undone=di(this.history.undone,n)}},iterLinkedDocs:function(t){ei(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(t){return this.lineSep?t.split(this.lineSep):Vo(t)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Mn((function(t){"rtl"!=t&&(t="ltr"),t!=this.direction&&(this.direction=t,this.iter((function(t){return t.order=null})),this.cm&&ri(this.cm))}))}),_s.prototype.eachLine=_s.prototype.iter;for(var Cs=0,ks=!1,Ss={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ls=0;10>Ls;Ls++)Ss[Ls+48]=Ss[Ls+96]=String(Ls);for(var Ms=65;90>=Ms;Ms++)Ss[Ms]=String.fromCharCode(Ms);for(var Ts=1;12>=Ts;Ts++)Ss[Ts+111]=Ss[Ts+63235]="F"+Ts;var Os={basic:{Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},pcDefault:{"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},emacsy:{"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},macDefault:{"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]}};Os.default=vo?Os.macDefault:Os.pcDefault;var Ns={selectAll:Mi,singleSelection:function(t){return t.setSelection(t.getCursor("anchor"),t.getCursor("head"),Ao)},killLine:function(t){return or(t,(function(e){if(e.empty()){var n=X(t.doc,e.head.line).text.length;return e.head.ch==n&&e.head.line<t.lastLine()?{from:e.head,to:it(e.head.line+1,0)}:{from:e.head,to:it(e.head.line,n)}}return{from:e.from(),to:e.to()}}))},deleteLine:function(t){return or(t,(function(e){return{from:it(e.from().line,0),to:ht(t.doc,it(e.to().line+1,0))}}))},delLineLeft:function(t){return or(t,(function(t){return{from:it(t.from().line,0),to:t.from()}}))},delWrappedLineLeft:function(t){return or(t,(function(e){var n=t.charCoords(e.head,"div").top+5;return{from:t.coordsChar({left:0,top:n},"div"),to:e.from()}}))},delWrappedLineRight:function(t){return or(t,(function(e){var n=t.charCoords(e.head,"div").top+5;return n=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div"),{from:e.from(),to:n}}))},undo:function(t){return t.undo()},redo:function(t){return t.redo()},undoSelection:function(t){return t.undoSelection()},redoSelection:function(t){return t.redoSelection()},goDocStart:function(t){return t.extendSelection(it(t.firstLine(),0))},goDocEnd:function(t){return t.extendSelection(it(t.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy((function(e){return cr(t,e.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy((function(e){return ur(t,e.head)}),{origin:"+move",bias:1})},goLineEnd:function(t){return t.extendSelectionsBy((function(e){e=e.head.line;for(var n,i=X(t.doc,e),r=i;n=Nt(r,!1);)r=n.find(1,!0).line;return r!=i&&(e=Q(r)),ar(!0,t,i,e,-1)}),{origin:"+move",bias:-1})},goLineRight:function(t){return t.extendSelectionsBy((function(e){return e=t.cursorCoords(e.head,"div").top+5,t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:e},"div")}),Eo)},goLineLeft:function(t){return t.extendSelectionsBy((function(e){return e=t.cursorCoords(e.head,"div").top+5,t.coordsChar({left:0,top:e},"div")}),Eo)},goLineLeftSmart:function(t){return t.extendSelectionsBy((function(e){var n=t.cursorCoords(e.head,"div").top+5;return(n=t.coordsChar({left:0,top:n},"div")).ch<t.getLine(n.line).search(/\S/)?ur(t,e.head):n}),Eo)},goLineUp:function(t){return t.moveV(-1,"line")},goLineDown:function(t){return t.moveV(1,"line")},goPageUp:function(t){return t.moveV(-1,"page")},goPageDown:function(t){return t.moveV(1,"page")},goCharLeft:function(t){return t.moveH(-1,"char")},goCharRight:function(t){return t.moveH(1,"char")},goColumnLeft:function(t){return t.moveH(-1,"column")},goColumnRight:function(t){return t.moveH(1,"column")},goWordLeft:function(t){return t.moveH(-1,"word")},goGroupRight:function(t){return t.moveH(1,"group")},goGroupLeft:function(t){return t.moveH(-1,"group")},goWordRight:function(t){return t.moveH(1,"word")},delCharBefore:function(t){return t.deleteH(-1,"codepoint")},delCharAfter:function(t){return t.deleteH(1,"char")},delWordBefore:function(t){return t.deleteH(-1,"word")},delWordAfter:function(t){return t.deleteH(1,"word")},delGroupBefore:function(t){return t.deleteH(-1,"group")},delGroupAfter:function(t){return t.deleteH(1,"group")},indentAuto:function(t){return t.indentSelection("smart")},indentMore:function(t){return t.indentSelection("add")},indentLess:function(t){return t.indentSelection("subtract")},insertTab:function(t){return t.replaceSelection("\t")},insertSoftTab:function(t){for(var e=[],n=t.listSelections(),i=t.options.tabSize,r=0;r<n.length;r++){var o=n[r].from();o=f(t.getLine(o.line),o.ch,i),e.push(m(i-o%i))}t.replaceSelections(e)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){return kn(t,(function(){for(var e=t.listSelections(),n=[],i=0;i<e.length;i++)if(e[i].empty()){var r=e[i].head,o=X(t.doc,r.line).text;if(o)if(r.ch==o.length&&(r=new it(r.line,r.ch-1)),0<r.ch)r=new it(r.line,r.ch+1),t.replaceRange(o.charAt(r.ch-1)+o.charAt(r.ch-2),it(r.line,r.ch-2),r,"+transpose");else if(r.line>t.doc.first){var s=X(t.doc,r.line-1).text;s&&(r=new it(r.line,1),t.replaceRange(o.charAt(0)+t.doc.lineSeparator()+s.charAt(s.length-1),it(r.line-1,s.length-1),r,"+transpose"))}n.push(new ms(r,r))}t.setSelections(n)}))},newlineAndIndent:function(t){return kn(t,(function(){for(var e=t.listSelections(),n=e.length-1;0<=n;n--)t.replaceRange(t.doc.lineSeparator(),e[n].anchor,e[n].head,"+input");for(e=t.listSelections(),n=0;n<e.length;n++)t.indentLine(e[n].from().line,null,!0);un(t)}))},openLine:function(t){return t.replaceSelection("\n","start")},toggleOverwrite:function(t){return t.toggleOverwrite()}},As=new Lo,Ds=null,Es=function(t,e,n){this.time=t,this.pos=e,this.button=n};Es.prototype.compare=function(t,e,n){return this.time+400>t&&0==rt(e,this.pos)&&n==this.button};var Ws,Ps,Hs={toString:function(){return"CodeMirror.Init"}},zs={},Rs={};Wr.defaults=zs,Wr.optionHandlers=Rs;var Is=[];Wr.defineInitHook=function(t){return Is.push(t)};var Fs=null,Bs=function(t){this.cm=t,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Lo,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Bs.prototype.init=function(t){function e(t){for(t=t.target;t;t=t.parentNode){if(t==l)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(t.className))break}return!1}function n(t){if(e(t)&&!E(o,t)){if(o.somethingSelected())Fs={lineWise:!1,text:o.getSelections()},"cut"==t.type&&o.replaceSelection("",null,"cut");else{if(!o.options.lineWiseCopyCut)return;var n=Fr(o);Fs={lineWise:!0,text:n.text},"cut"==t.type&&o.operation((function(){o.setSelections(n.ranges,0,Ao),o.replaceSelection("",null,"cut")}))}if(t.clipboardData){t.clipboardData.clearData();var i=Fs.text.join("\n");if(t.clipboardData.setData("Text",i),t.clipboardData.getData("Text")==i)return void t.preventDefault()}var a=Vr();Br(t=a.firstChild),o.display.lineSpace.insertBefore(a,o.display.lineSpace.firstChild),t.value=Fs.text.join("\n");var h=s(c(l));So(t),setTimeout((function(){o.display.lineSpace.removeChild(a),h.focus(),h==l&&r.showPrimarySelection()}),50)}}var i=this,r=this,o=r.cm,l=r.div=t.lineDiv;l.contentEditable=!0,Br(l,o.options.spellcheck,o.options.autocorrect,o.options.autocapitalize),Fo(l,"paste",(function(t){!e(t)||E(o,t)||Rr(t,o)||11>=ro&&setTimeout(Sn(o,(function(){return i.updateFromDOM()})),20)})),Fo(l,"compositionstart",(function(t){i.composing={data:t.data,done:!1}})),Fo(l,"compositionupdate",(function(t){i.composing||(i.composing={data:t.data,done:!1})})),Fo(l,"compositionend",(function(t){i.composing&&(t.data!=i.composing.data&&i.readFromDOMSoon(),i.composing.done=!0)})),Fo(l,"touchstart",(function(){return r.forceCompositionEnd()})),Fo(l,"input",(function(){i.composing||i.readFromDOMSoon()})),Fo(l,"copy",n),Fo(l,"cut",n)},Bs.prototype.screenReaderLabelChanged=function(t){t?this.div.setAttribute("aria-label",t):this.div.removeAttribute("aria-label")},Bs.prototype.prepareSelection=function(){var t=Ye(this.cm,!1);return t.focus=s(c(this.div))==this.div,t},Bs.prototype.showSelection=function(t,e){t&&this.cm.display.view.length&&((t.focus||e)&&this.showPrimarySelection(),this.showMultipleSelections(t))},Bs.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Bs.prototype.showPrimarySelection=function(){var t=this.getSelection(),e=this.cm,n=e.doc.sel.primary(),i=n.from();if(n=n.to(),e.display.viewTo==e.display.viewFrom||i.line>=e.display.viewTo||n.line<e.display.viewFrom)t.removeAllRanges();else{var r=Xr(e,t.anchorNode,t.anchorOffset),o=Xr(e,t.focusNode,t.focusOffset);if(!r||r.bad||!o||o.bad||0!=rt(at(r,o),i)||0!=rt(lt(r,o),n))if(r=e.display.view,i=i.line>=e.display.viewFrom&&Gr(e,i)||{node:r[0].measure.map[2],offset:0},(n=n.line<e.display.viewTo&&Gr(e,n))||(n={node:(n=(n=r[r.length-1].measure).maps?n.maps[n.maps.length-1]:n.map)[n.length-1],offset:n[n.length-2]-n[n.length-3]}),i&&n){r=t.rangeCount&&t.getRangeAt(0);try{var s=ko(i.node,i.offset,n.offset,n.node)}catch(t){}s&&(!Qr&&e.state.focused?(t.collapse(i.node,i.offset),s.collapsed||(t.removeAllRanges(),t.addRange(s))):(t.removeAllRanges(),t.addRange(s)),r&&null==t.anchorNode?t.addRange(r):Qr&&this.startGracePeriod()),this.rememberSelection()}else t.removeAllRanges()}},Bs.prototype.startGracePeriod=function(){var t=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){t.gracePeriod=!1,t.selectionChanged()&&t.cm.operation((function(){return t.cm.curOp.selectionChanged=!0}))}),20)},Bs.prototype.showMultipleSelections=function(t){n(this.cm.display.cursorDiv,t.cursors),n(this.cm.display.selectionDiv,t.selection)},Bs.prototype.rememberSelection=function(){var t=this.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastFocusNode=t.focusNode,this.lastFocusOffset=t.focusOffset},Bs.prototype.selectionInEditor=function(){var t=this.getSelection();return!!t.rangeCount&&(t=t.getRangeAt(0).commonAncestorContainer,o(this.div,t))},Bs.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&s(c(this.div))==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Bs.prototype.blur=function(){this.div.blur()},Bs.prototype.getField=function(){return this.div},Bs.prototype.supportsTouch=function(){return!0},Bs.prototype.receivedFocus=function(){function t(){n.cm.state.focused&&(n.pollSelection(),n.polling.set(n.cm.options.pollInterval,t))}var e=this,n=this;this.selectionInEditor()?setTimeout((function(){return e.pollSelection()}),20):kn(this.cm,(function(){return n.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,t)},Bs.prototype.selectionChanged=function(){var t=this.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastFocusNode||t.focusOffset!=this.lastFocusOffset},Bs.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var t=this.getSelection(),e=this.cm;if(go&&lo&&this.cm.display.gutterSpecs.length&&jr(t.anchorNode))this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();else if(!this.composing){this.rememberSelection();var n=Xr(e,t.anchorNode,t.anchorOffset),i=Xr(e,t.focusNode,t.focusOffset);n&&i&&kn(e,(function(){bi(e.doc,jn(n,i),Ao),(n.bad||i.bad)&&(e.curOp.selectionChanged=!0)}))}}},Bs.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var t,e=this.cm,n=e.display,i=e.doc.sel.primary(),r=i.from(),o=i.to();if(0==r.ch&&r.line>e.firstLine()&&(r=it(r.line-1,X(e.doc,r.line-1).length)),o.ch==X(e.doc,o.line).text.length&&o.line<e.lastLine()&&(o=it(o.line+1,0)),r.line<n.viewFrom||o.line>n.viewTo-1)return!1;r.line==n.viewFrom||0==(t=$e(e,r.line))?(i=Q(n.view[0].line),t=n.view[0].node):(i=Q(n.view[t].line),t=n.view[t-1].node.nextSibling);var s=$e(e,o.line);if(s==n.view.length-1?(o=n.viewTo-1,n=n.lineDiv.lastChild):(o=Q(n.view[s+1].line)-1,n=n.view[s+1].node.previousSibling),!t)return!1;for(n=e.doc.splitLines(qr(e,t,n,i,o)),t=Y(e.doc,it(i,0),it(o,X(e.doc,o).text.length));1<n.length&&1<t.length;)if(v(n)==v(t))n.pop(),t.pop(),o--;else{if(n[0]!=t[0])break;n.shift(),t.shift(),i++}var l=0;s=0;for(var a=n[0],h=t[0],c=Math.min(a.length,h.length);l<c&&a.charCodeAt(l)==h.charCodeAt(l);)++l;for(a=v(n),h=v(t),c=Math.min(a.length-(1==n.length?l:0),h.length-(1==t.length?l:0));s<c&&a.charCodeAt(a.length-s-1)==h.charCodeAt(h.length-s-1);)++s;if(1==n.length&&1==t.length&&i==r.line)for(;l&&l>r.ch&&a.charCodeAt(a.length-s-1)==h.charCodeAt(h.length-s-1);)l--,s++;return n[n.length-1]=a.slice(0,a.length-s).replace(/^\u200b+/,""),n[0]=n[0].slice(l).replace(/\u200b+$/,""),r=it(i,l),i=it(o,t.length?v(t).length-s:0),1<n.length||n[0]||rt(r,i)?(Pi(e.doc,n,r,i,"+input"),!0):void 0},Bs.prototype.ensurePolled=function(){this.forceCompositionEnd()},Bs.prototype.reset=function(){this.forceCompositionEnd()},Bs.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Bs.prototype.readFromDOMSoon=function(){var t=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout((function(){if(t.readDOMTimeout=null,t.composing){if(!t.composing.done)return;t.composing=null}t.updateFromDOM()}),80))},Bs.prototype.updateFromDOM=function(){var t=this;!this.cm.isReadOnly()&&this.pollContent()||kn(this.cm,(function(){return Ue(t.cm)}))},Bs.prototype.setUneditable=function(t){t.contentEditable="false"},Bs.prototype.onKeyPress=function(t){0==t.charCode||this.composing||(t.preventDefault(),this.cm.isReadOnly()||Sn(this.cm,zr)(this.cm,String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),0))},Bs.prototype.readOnlyChanged=function(t){this.div.contentEditable=String("nocursor"!=t)},Bs.prototype.onContextMenu=function(){},Bs.prototype.resetPosition=function(){},Bs.prototype.needsContentAttribute=!0;var Vs=function(t){this.cm=t,this.prevInput="",this.pollingFast=!1,this.polling=new Lo,this.hasSelection=!1,this.composing=null,this.resetting=!1};Vs.prototype.init=function(t){function e(t){if(!E(r,t)){if(r.somethingSelected())Fs={lineWise:!1,text:r.getSelections()};else{if(!r.options.lineWiseCopyCut)return;var e=Fr(r);Fs={lineWise:!0,text:e.text},"cut"==t.type?r.setSelections(e.ranges,null,Ao):(i.prevInput="",o.value=e.text.join("\n"),So(o))}"cut"==t.type&&(r.state.cutIncoming=+new Date)}}var n=this,i=this,r=this.cm;this.createField(t);var o=this.textarea;t.wrapper.insertBefore(this.wrapper,t.wrapper.firstChild),po&&(o.style.width="0px"),Fo(o,"input",(function(){io&&9<=ro&&n.hasSelection&&(n.hasSelection=null),i.poll()})),Fo(o,"paste",(function(t){E(r,t)||Rr(t,r)||(r.state.pasteIncoming=+new Date,i.fastPoll())})),Fo(o,"cut",e),Fo(o,"copy",e),Fo(t.scroller,"paste",(function(e){if(!se(t,e)&&!E(r,e))if(o.dispatchEvent){var n=new Event("paste");n.clipboardData=e.clipboardData,o.dispatchEvent(n)}else r.state.pasteIncoming=+new Date,i.focus()})),Fo(t.lineSpace,"selectstart",(function(e){se(t,e)||z(e)})),Fo(o,"compositionstart",(function(){var t=r.getCursor("from");i.composing&&i.composing.range.clear(),i.composing={start:t,range:r.markText(t,r.getCursor("to"),{className:"CodeMirror-composing"})}})),Fo(o,"compositionend",(function(){i.composing&&(i.poll(),i.composing.range.clear(),i.composing=null)}))},Vs.prototype.createField=function(t){this.wrapper=Vr(),this.textarea=this.wrapper.firstChild,t=this.cm.options,Br(this.textarea,t.spellcheck,t.autocorrect,t.autocapitalize)},Vs.prototype.screenReaderLabelChanged=function(t){t?this.textarea.setAttribute("aria-label",t):this.textarea.removeAttribute("aria-label")},Vs.prototype.prepareSelection=function(){var t=this.cm,e=t.display,n=t.doc,i=Ye(t);if(t.options.moveInputWithCursor){t=Le(t,n.sel.primary().head,"div"),n=e.wrapper.getBoundingClientRect();var r=e.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(e.wrapper.clientHeight-10,t.top+r.top-n.top)),i.teLeft=Math.max(0,Math.min(e.wrapper.clientWidth-10,t.left+r.left-n.left))}return i},Vs.prototype.showSelection=function(t){var e=this.cm.display;n(e.cursorDiv,t.cursors),n(e.selectionDiv,t.selection),null!=t.teTop&&(this.wrapper.style.top=t.teTop+"px",this.wrapper.style.left=t.teLeft+"px")},Vs.prototype.reset=function(t){if(!(this.contextMenuPending||this.composing&&t)){var e=this.cm;this.resetting=!0,e.somethingSelected()?(this.prevInput="",t=e.getSelection(),this.textarea.value=t,e.state.focused&&So(this.textarea),io&&9<=ro&&(this.hasSelection=t)):t||(this.prevInput=this.textarea.value="",io&&9<=ro&&(this.hasSelection=null)),this.resetting=!1}},Vs.prototype.getField=function(){return this.textarea},Vs.prototype.supportsTouch=function(){return!1},Vs.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!mo||s(c(this.textarea))!=this.textarea))try{this.textarea.focus()}catch(t){}},Vs.prototype.blur=function(){this.textarea.blur()},Vs.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Vs.prototype.receivedFocus=function(){this.slowPoll()},Vs.prototype.slowPoll=function(){var t=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,(function(){t.poll(),t.cm.state.focused&&t.slowPoll()}))},Vs.prototype.fastPoll=function(){function t(){n.poll()||e?(n.pollingFast=!1,n.slowPoll()):(e=!0,n.polling.set(60,t))}var e=!1,n=this;n.pollingFast=!0,n.polling.set(20,t)},Vs.prototype.poll=function(){var t=this,e=this.cm,n=this.textarea,i=this.prevInput;if(this.contextMenuPending||this.resetting||!e.state.focused||$o(n)&&!i&&!this.composing||e.isReadOnly()||e.options.disableInput||e.state.keySeq)return!1;var r=n.value;if(r==i&&!e.somethingSelected())return!1;if(io&&9<=ro&&this.hasSelection===r||vo&&/[\uf700-\uf7ff]/.test(r))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var o=r.charCodeAt(0);if(8203!=o||i||(i="​"),8666==o)return this.reset(),this.cm.execCommand("undo")}var s=0;for(o=Math.min(i.length,r.length);s<o&&i.charCodeAt(s)==r.charCodeAt(s);)++s;return kn(e,(function(){zr(e,r.slice(s),i.length-s,null,t.composing?"*compose":null),1e3<r.length||-1<r.indexOf("\n")?n.value=t.prevInput="":t.prevInput=r,t.composing&&(t.composing.range.clear(),t.composing.range=e.markText(t.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},Vs.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Vs.prototype.onKeyPress=function(){io&&9<=ro&&(this.hasSelection=null),this.fastPoll()},Vs.prototype.onContextMenu=function(t){function e(){if(null!=s.selectionStart){var t=r.somethingSelected(),e="​"+(t?s.value:"");s.value="⇚",s.value=e,i.prevInput=t?"":"​",s.selectionStart=1,s.selectionEnd=e.length,o.selForContextMenu=r.doc.sel}}function n(){if(i.contextMenuPending==n&&(i.contextMenuPending=!1,i.wrapper.style.cssText=c,s.style.cssText=h,io&&9>ro&&o.scrollbars.setScrollTop(o.scroller.scrollTop=a),null!=s.selectionStart)){(!io||io&&9>ro)&&e();var t=0,l=function(){o.selForContextMenu==r.doc.sel&&0==s.selectionStart&&0<s.selectionEnd&&"​"==i.prevInput?Sn(r,Mi)(r):10>t++?o.detectingSelectAll=setTimeout(l,500):(o.selForContextMenu=null,o.input.reset())};o.detectingSelectAll=setTimeout(l,200)}}var i=this,r=i.cm,o=r.display,s=i.textarea;i.contextMenuPending&&i.contextMenuPending();var l=Ve(r,t),a=o.scroller.scrollTop;if(l&&!ho){r.options.resetSelectionOnContextMenu&&-1==r.doc.sel.contains(l)&&Sn(r,bi)(r.doc,jn(l),Ao);var h=s.style.cssText,c=i.wrapper.style.cssText;if(l=i.wrapper.offsetParent.getBoundingClientRect(),i.wrapper.style.cssText="position: static",s.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(t.clientY-l.top-5)+"px; left: "+(t.clientX-l.left-5)+"px;\n      z-index: 1000; background: "+(io?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",oo)var u=s.ownerDocument.defaultView.scrollY;if(o.input.focus(),oo&&s.ownerDocument.defaultView.scrollTo(null,u),o.input.reset(),r.somethingSelected()||(s.value=i.prevInput=" "),i.contextMenuPending=n,o.selForContextMenu=r.doc.sel,clearTimeout(o.detectingSelectAll),io&&9<=ro&&e(),_o){F(t);var d=function(){A(window,"mouseup",d),setTimeout(n,20)};Fo(window,"mouseup",d)}else setTimeout(n,50)}},Vs.prototype.readOnlyChanged=function(t){t||this.reset(),this.textarea.disabled="nocursor"==t,this.textarea.readOnly=!!t},Vs.prototype.setUneditable=function(){},Vs.prototype.needsContentAttribute=!1,function(t){function e(e,i,r,o){t.defaults[e]=i,r&&(n[e]=o?function(t,e,n){n!=Hs&&r(t,e,n)}:r)}var n=t.optionHandlers;t.defineOption=e,t.Init=Hs,e("value","",(function(t,e){return t.setValue(e)}),!0),e("mode",null,(function(t,e){t.doc.modeOption=e,Zn(t)}),!0),e("indentUnit",2,Zn,!0),e("indentWithTabs",!1),e("smartIndent",!0),e("tabSize",4,(function(t){Jn(t),be(t),Ue(t)}),!0),e("lineSeparator",null,(function(t,e){if(t.doc.lineSep=e){var n=[],i=t.doc.first;t.doc.iter((function(t){for(var r=0;;){var o=t.text.indexOf(e,r);if(-1==o)break;r=o+e.length,n.push(it(i,o))}i++}));for(var r=n.length-1;0<=r;r--)Pi(t.doc,e,n[r],it(n[r].line,n[r].ch+e.length))}})),e("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,(function(t,e,n){t.state.specialChars=new RegExp(e.source+(e.test("\t")?"":"|\t"),"g"),n!=Hs&&t.refresh()})),e("specialCharPlaceholder",Vt,(function(t){return t.refresh()}),!0),e("electricChars",!0),e("inputStyle",mo?"contenteditable":"textarea",(function(){throw Error("inputStyle can not (yet) be changed in a running editor")}),!0),e("spellcheck",!1,(function(t,e){return t.getInputField().spellcheck=e}),!0),e("autocorrect",!1,(function(t,e){return t.getInputField().autocorrect=e}),!0),e("autocapitalize",!1,(function(t,e){return t.getInputField().autocapitalize=e}),!0),e("rtlMoveVisually",!bo),e("wholeLineUpdateBefore",!0),e("theme","default",(function(t){Ar(t),Fn(t)}),!0),e("keyMap","default",(function(t,e,n){e=rr(e),(n=n!=Hs&&rr(n))&&n.detach&&n.detach(t,e),e.attach&&e.attach(t,n||null)})),e("extraKeys",null),e("configureMouse",null),e("lineWrapping",!1,Er,!0),e("gutters",[],(function(t,e){t.display.gutterSpecs=Rn(e,t.options.lineNumbers),Fn(t)}),!0),e("fixedGutter",!0,(function(t,e){t.display.gutters.style.left=e?Ie(t.display)+"px":"0",t.refresh()}),!0),e("coverGutterNextToScrollbar",!1,(function(t){return bn(t)}),!0),e("scrollbarStyle","native",(function(t){xn(t),bn(t),t.display.scrollbars.setScrollTop(t.doc.scrollTop),t.display.scrollbars.setScrollLeft(t.doc.scrollLeft)}),!0),e("lineNumbers",!1,(function(t,e){t.display.gutterSpecs=Rn(t.options.gutters,e),Fn(t)}),!0),e("firstLineNumber",1,Fn,!0),e("lineNumberFormatter",(function(t){return t}),Fn,!0),e("showCursorWhenSelecting",!1,Xe,!0),e("resetSelectionOnContextMenu",!0),e("lineWiseCopyCut",!0),e("pasteLinesPerSelection",!0),e("selectionsMayTouch",!1),e("readOnly",!1,(function(t,e){"nocursor"==e&&(on(t),t.display.input.blur()),t.display.input.readOnlyChanged(e)})),e("screenReaderLabel",null,(function(t,e){t.display.input.screenReaderLabelChanged(""===e?null:e)})),e("disableInput",!1,(function(t,e){e||t.display.input.reset()}),!0),e("dragDrop",!0,Dr),e("allowDropFileTypes",null),e("cursorBlinkRate",530),e("cursorScrollMargin",0),e("cursorHeight",1,Xe,!0),e("singleCursorHeightPerLine",!0,Xe,!0),e("workTime",100),e("workDelay",100),e("flattenSpans",!0,Jn,!0),e("addModeClass",!1,Jn,!0),e("pollInterval",100),e("undoDepth",200,(function(t,e){return t.doc.history.undoDepth=e})),e("historyEventDelay",1250),e("viewportMargin",10,(function(t){return t.refresh()}),!0),e("maxHighlightLength",1e4,Jn,!0),e("moveInputWithCursor",!0,(function(t,e){e||t.display.input.resetPosition()})),e("tabindex",null,(function(t,e){return t.display.input.getField().tabIndex=e||""})),e("autofocus",null),e("direction","ltr",(function(t,e){return t.doc.setDirection(e)}),!0),e("phrases",null)}(Wr),function(t){var e=t.optionHandlers,n=t.helpers={};t.prototype={constructor:t,focus:function(){h(this).defaultView.focus(),this.display.input.focus()},setOption:function(t,n){var i=this.options,r=i[t];i[t]==n&&"mode"!=t||(i[t]=n,e.hasOwnProperty(t)&&Sn(this,e[t])(this,n,r),D(this,"optionChange",this,t))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](rr(t))},removeKeyMap:function(t){for(var e=this.state.keyMaps,n=0;n<e.length;++n)if(e[n]==t||e[n].name==t)return e.splice(n,1),!0},addOverlay:Ln((function(e,n){var i=e.token?e:t.getMode(this.options,e);if(i.startState)throw Error("Overlays may not be stateful.");b(this.state.overlays,{mode:i,modeSpec:e,opaque:n&&n.opaque,priority:n&&n.priority||0},(function(t){return t.priority})),this.state.modeGen++,Ue(this)})),removeOverlay:Ln((function(t){for(var e=this.state.overlays,n=0;n<e.length;++n){var i=e[n].modeSpec;if(i==t||"string"==typeof t&&i.name==t){e.splice(n,1),this.state.modeGen++,Ue(this);break}}})),indentLine:Ln((function(t,e,n){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),et(this.doc,t)&&Hr(this,t,e,n)})),indentSelection:Ln((function(t){for(var e=this.doc.sel.ranges,n=-1,i=0;i<e.length;i++){var r=e[i];if(r.empty())r.head.line>n&&(Hr(this,r.head.line,t,!0),n=r.head.line,i==this.doc.sel.primIndex&&un(this));else{var o=r.from();r=r.to();var s=Math.max(n,o.line);for(n=Math.min(this.lastLine(),r.line-(r.ch?0:1))+1,r=s;r<n;++r)Hr(this,r,t);r=this.doc.sel.ranges,0==o.ch&&e.length==r.length&&0<r[i].from().ch&&mi(this.doc,i,new ms(o,r[i].to()),Ao)}}})),getTokenAt:function(t,e){return vt(this,t,e)},getLineTokens:function(t,e){return vt(this,it(t),e,!0)},getTokenTypeAt:function(t){t=ht(this.doc,t);var e=dt(this,X(this.doc,t.line)),n=0,i=(e.length-1)/2;if(0==(t=t.ch))e=e[2];else for(;;){var r=n+i>>1;if((r?e[2*r-1]:0)>=t)i=r;else{if(!(e[2*r+1]<t)){e=e[2*r+2];break}n=r+1}}return 0>(n=e?e.indexOf("overlay "):-1)?e:0==n?null:e.slice(0,n-1)},getModeAt:function(e){var n=this.doc.mode;return n.innerMode?t.innerMode(n,this.getTokenAt(e).state).mode:n},getHelper:function(t,e){return this.getHelpers(t,e)[0]},getHelpers:function(t,e){var i=[];if(!n.hasOwnProperty(e))return i;var r=n[e];if("string"==typeof(t=this.getModeAt(t))[e])r[t[e]]&&i.push(r[t[e]]);else if(t[e])for(var o=0;o<t[e].length;o++){var s=r[t[e][o]];s&&i.push(s)}else t.helperType&&r[t.helperType]?i.push(r[t.helperType]):r[t.name]&&i.push(r[t.name]);for(e=0;e<r._global.length;e++)(o=r._global[e]).pred(t,this)&&-1==p(i,o.val)&&i.push(o.val);return i},getStateAfter:function(t,e){var n=this.doc;return ft(this,(t=Math.max(n.first,Math.min(null==t?n.first+n.size-1:t,n.first+n.size-1)))+1,e).state},cursorCoords:function(t,e){var n=this.doc.sel.primary();return Le(this,t=null==t?n.head:"object"==typeof t?ht(this.doc,t):t?n.from():n.to(),e||"page")},charCoords:function(t,e){return Se(this,ht(this.doc,t),e||"page")},coordsChar:function(t,e){return Oe(this,(t=ke(this,t,e||"page")).left,t.top)},lineAtHeight:function(t,e){return t=ke(this,{top:t,left:0},e||"page").top,tt(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e,n){var i=!1;if("number"==typeof t){var r=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>r&&(t=r,i=!0),t=X(this.doc,t)}return Ce(this,t,{top:0,left:0},e||"page",n||i).top+(i?this.doc.height-zt(t):0)},defaultTextHeight:function(){return He(this.display)},defaultCharWidth:function(){return ze(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(t,e,n,i,r){var o=this.display,s=(t=Le(this,ht(this.doc,t))).bottom,l=t.left;if(e.style.position="absolute",e.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(e),o.sizer.appendChild(e),"over"==i)s=t.top;else if("above"==i||"near"==i){var a=Math.max(o.wrapper.clientHeight,this.doc.height),h=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==i||t.bottom+e.offsetHeight>a)&&t.top>e.offsetHeight?s=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=a&&(s=t.bottom),l+e.offsetWidth>h&&(l=h-e.offsetWidth)}e.style.top=s+"px",e.style.left=e.style.right="","right"==r?(l=o.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==r?l=0:"middle"==r&&(l=(o.sizer.clientWidth-e.offsetWidth)/2),e.style.left=l+"px"),n&&(null!=(t=hn(this,{left:l,top:s,right:l+e.offsetWidth,bottom:s+e.offsetHeight})).scrollTop&&gn(this,t.scrollTop),null!=t.scrollLeft&&vn(this,t.scrollLeft))},triggerOnKeyDown:Ln(vr),triggerOnKeyPress:Ln(wr),triggerOnKeyUp:br,triggerOnMouseDown:Ln(_r),execCommand:function(t){if(Ns.hasOwnProperty(t))return Ns[t].call(null,this)},triggerElectric:Ln((function(t){Ir(this,t)})),findPosH:function(t,e,n,i){var r=1;0>e&&(r=-1,e=-e),t=ht(this.doc,t);for(var o=0;o<e&&!(t=$r(this.doc,t,r,n,i)).hitSide;++o);return t},moveH:Ln((function(t,e){var n=this;this.extendSelectionsBy((function(i){return n.display.shift||n.doc.extend||i.empty()?$r(n.doc,i.head,t,e,n.options.rtlMoveVisually):0>t?i.from():i.to()}),Eo)})),deleteH:Ln((function(t,e){var n=this.doc;this.doc.sel.somethingSelected()?n.replaceSelection("",null,"+delete"):or(this,(function(i){var r=$r(n,i.head,t,e,!1);return 0>t?{from:r,to:i.head}:{from:i.head,to:r}}))})),findPosV:function(t,e,n,i){var r=1;0>e&&(r=-1,e=-e);var o=ht(this.doc,t);for(t=0;t<e&&(o=Le(this,o,"div"),null==i?i=o.left:o.left=i,!(o=Ur(this,o,r,n)).hitSide);++t);return o},moveV:Ln((function(t,e){var n=this,i=this.doc,r=[],o=!this.display.shift&&!i.extend&&i.sel.somethingSelected();if(i.extendSelectionsBy((function(s){if(o)return 0>t?s.from():s.to();var l=Le(n,s.head,"div");null!=s.goalColumn&&(l.left=s.goalColumn),r.push(l.left);var a=Ur(n,l,t,e);return"page"==e&&s==i.sel.primary()&&cn(n,Se(n,a,"div").top-l.top),a}),Eo),r.length)for(var s=0;s<i.sel.ranges.length;s++)i.sel.ranges[s].goalColumn=r[s]})),findWordAt:function(t){var e=X(this.doc,t.line).text,n=t.ch,i=t.ch;if(e){var r=this.getHelper(t,"wordChars");"before"!=t.sticky&&i!=e.length||!n?++i:--n;var o=e.charAt(n);for(o=C(o,r)?function(t){return C(t,r)}:/\s/.test(o)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!C(t)};0<n&&o(e.charAt(n-1));)--n;for(;i<e.length&&o(e.charAt(i));)++i}return new ms(it(t.line,n),it(t.line,i))},toggleOverwrite:function(t){null!=t&&t==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?l(this.display.cursorDiv,"CodeMirror-overwrite"):Co(this.display.cursorDiv,"CodeMirror-overwrite"),D(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==s(c(this.display.wrapper))},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Ln((function(t,e){dn(this,t,e)})),getScrollInfo:function(){var t=this.display.scroller;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-he(this)-this.display.barHeight,width:t.scrollWidth-he(this)-this.display.barWidth,clientHeight:ue(this),clientWidth:ce(this)}},scrollIntoView:Ln((function(t,e){null==t?(t={from:this.doc.sel.primary().head,to:null},null==e&&(e=this.options.cursorScrollMargin)):"number"==typeof t?t={from:it(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),t.margin=e||0,null!=t.from.line?(fn(this),this.curOp.scrollToPos=t):pn(this,t.from,t.to,t.margin)})),setSize:Ln((function(t,e){var n=this,i=function(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t};null!=t&&(this.display.wrapper.style.width=i(t)),null!=e&&(this.display.wrapper.style.height=i(e)),this.options.lineWrapping&&ye(this);var r=this.display.viewFrom;this.doc.iter(r,this.display.viewTo,(function(t){if(t.widgets)for(var e=0;e<t.widgets.length;e++)if(t.widgets[e].noHScroll){Ge(n,r,"widget");break}++r})),this.curOp.forceUpdate=!0,D(this,"refresh",this)})),operation:function(t){return kn(this,t)},startOperation:function(){return _n(this)},endOperation:function(){return Cn(this)},refresh:Ln((function(){var t=this.display.cachedTextHeight;Ue(this),this.curOp.forceUpdate=!0,be(this),dn(this,this.doc.scrollLeft,this.doc.scrollTop),Wn(this.display),(null==t||.5<Math.abs(t-He(this.display))||this.options.lineWrapping)&&Be(this),D(this,"refresh",this)})),swapDoc:Ln((function(t){var e=this.doc;return e.cm=null,this.state.selectingText&&this.state.selectingText(),ni(this,t),be(this),this.display.input.reset(),dn(this,t.scrollLeft,t.scrollTop),this.curOp.forceScroll=!0,Xt(this,"swapDoc",this,e),e})),phrase:function(t){var e=this.options.phrases;return e&&Object.prototype.hasOwnProperty.call(e,t)?e[t]:t},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},H(t),t.registerHelper=function(e,i,r){n.hasOwnProperty(e)||(n[e]=t[e]={_global:[]}),n[e][i]=r},t.registerGlobalHelper=function(e,i,r,o){t.registerHelper(e,i,o),n[e]._global.push({pred:r,val:o})}}(Wr);var $s,Us="iter insert remove copy getEditor constructor".split(" ");for($s in _s.prototype)_s.prototype.hasOwnProperty($s)&&0>p(Us,$s)&&(Wr.prototype[$s]=function(t){return function(){return t.apply(this.doc,arguments)}}(_s.prototype[$s]));return H(_s),Wr.inputStyles={textarea:Vs,contenteditable:Bs},Wr.defineMode=function(t){Wr.defaults.mode||"null"==t||(Wr.defaults.mode=t),V.apply(this,arguments)},Wr.defineMIME=function(t,e){Ko[t]=e},Wr.defineMode("null",(function(){return{token:function(t){return t.skipToEnd()}}})),Wr.defineMIME("text/plain","null"),Wr.defineExtension=function(t,e){Wr.prototype[t]=e},Wr.defineDocExtension=function(t,e){_s.prototype[t]=e},Wr.fromTextArea=function(t,e){function n(){t.value=a.getValue()}if((e=e?d(e):{}).value=t.value,!e.tabindex&&t.tabIndex&&(e.tabindex=t.tabIndex),!e.placeholder&&t.placeholder&&(e.placeholder=t.placeholder),null==e.autofocus){var i=s(c(t));e.autofocus=i==t||null!=t.getAttribute("autofocus")&&i==document.body}if(t.form&&(Fo(t.form,"submit",n),!e.leaveSubmitMethodAlone)){var r=t.form,o=r.submit;try{var l=r.submit=function(){n(),r.submit=o,r.submit(),r.submit=l}}catch(t){}}e.finishInit=function(i){i.save=n,i.getTextArea=function(){return t},i.toTextArea=function(){i.toTextArea=isNaN,n(),t.parentNode.removeChild(i.getWrapperElement()),t.style.display="",t.form&&(A(t.form,"submit",n),e.leaveSubmitMethodAlone||"function"!=typeof t.form.submit||(t.form.submit=o))}},t.style.display="none";var a=Wr((function(e){return t.parentNode.insertBefore(e,t.nextSibling)}),e);return a},function(t){t.off=A,t.on=Fo,t.wheelEventPixels=$n,t.Doc=_s,t.splitLines=Vo,t.countColumn=f,t.findColumn=g,t.isWordChar=_,t.Pass=No,t.signal=D,t.Line=es,t.changeEnd=Kn,t.scrollbarModel=cs,t.Pos=it,t.cmpPos=rt,t.modes=jo,t.mimeModes=Ko,t.resolveMode=$,t.getMode=U,t.modeExtensions=qo,t.extendMode=G,t.copyState=j,t.startState=q,t.innerMode=K,t.commands=Ns,t.keyMap=Os,t.keyName=ir,t.isModifierKey=er,t.lookupKey=tr,t.normalizeKeyMap=Qi,t.StringStream=Xo,t.SharedTextMarker=ws,t.TextMarker=bs,t.LineWidget=vs,t.e_preventDefault=z,t.e_stopPropagation=R,t.e_stop=F,t.addClass=l,t.contains=o,t.rmClass=Co,t.keyNames=Ss}(Wr),Wr.version="5.65.16",Wr}()},762:(t,e,n)=>{n.d(e,{A:()=>r}),e=n(601),e=n.n(e);var i=n(314);(n=n.n(i)()(e())).push([t.id,"/* BASICS */\n\n.CodeMirror {\n  /* Set height, width, borders, and global font properties here */\n  font-family: monospace;\n  height: 300px;\n  color: black;\n  direction: ltr;\n}\n\n/* PADDING */\n\n.CodeMirror-lines {\n  padding: 4px 0; /* Vertical padding around content */\n}\n.CodeMirror pre.CodeMirror-line,\n.CodeMirror pre.CodeMirror-line-like {\n  padding: 0 4px; /* Horizontal padding of content */\n}\n\n.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n  background-color: white; /* The little square between H and V scrollbars */\n}\n\n/* GUTTER */\n\n.CodeMirror-gutters {\n  border-right: 1px solid #ddd;\n  background-color: #f7f7f7;\n  white-space: nowrap;\n}\n.CodeMirror-linenumbers {}\n.CodeMirror-linenumber {\n  padding: 0 3px 0 5px;\n  min-width: 20px;\n  text-align: right;\n  color: #999;\n  white-space: nowrap;\n}\n\n.CodeMirror-guttermarker { color: black; }\n.CodeMirror-guttermarker-subtle { color: #999; }\n\n/* CURSOR */\n\n.CodeMirror-cursor {\n  border-left: 1px solid black;\n  border-right: none;\n  width: 0;\n}\n/* Shown when moving in bi-directional text */\n.CodeMirror div.CodeMirror-secondarycursor {\n  border-left: 1px solid silver;\n}\n.cm-fat-cursor .CodeMirror-cursor {\n  width: auto;\n  border: 0 !important;\n  background: #7e7;\n}\n.cm-fat-cursor div.CodeMirror-cursors {\n  z-index: 1;\n}\n.cm-fat-cursor .CodeMirror-line::selection,\n.cm-fat-cursor .CodeMirror-line > span::selection, \n.cm-fat-cursor .CodeMirror-line > span > span::selection { background: transparent; }\n.cm-fat-cursor .CodeMirror-line::-moz-selection,\n.cm-fat-cursor .CodeMirror-line > span::-moz-selection,\n.cm-fat-cursor .CodeMirror-line > span > span::-moz-selection { background: transparent; }\n.cm-fat-cursor { caret-color: transparent; }\n@-moz-keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n@-webkit-keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n@keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n\n/* Can style cursor different in overwrite (non-insert) mode */\n.CodeMirror-overwrite .CodeMirror-cursor {}\n\n.cm-tab { display: inline-block; text-decoration: inherit; }\n\n.CodeMirror-rulers {\n  position: absolute;\n  left: 0; right: 0; top: -50px; bottom: 0;\n  overflow: hidden;\n}\n.CodeMirror-ruler {\n  border-left: 1px solid #ccc;\n  top: 0; bottom: 0;\n  position: absolute;\n}\n\n/* DEFAULT THEME */\n\n.cm-s-default .cm-header {color: blue;}\n.cm-s-default .cm-quote {color: #090;}\n.cm-negative {color: #d44;}\n.cm-positive {color: #292;}\n.cm-header, .cm-strong {font-weight: bold;}\n.cm-em {font-style: italic;}\n.cm-link {text-decoration: underline;}\n.cm-strikethrough {text-decoration: line-through;}\n\n.cm-s-default .cm-keyword {color: #708;}\n.cm-s-default .cm-atom {color: #219;}\n.cm-s-default .cm-number {color: #164;}\n.cm-s-default .cm-def {color: #00f;}\n.cm-s-default .cm-variable,\n.cm-s-default .cm-punctuation,\n.cm-s-default .cm-property,\n.cm-s-default .cm-operator {}\n.cm-s-default .cm-variable-2 {color: #05a;}\n.cm-s-default .cm-variable-3, .cm-s-default .cm-type {color: #085;}\n.cm-s-default .cm-comment {color: #a50;}\n.cm-s-default .cm-string {color: #a11;}\n.cm-s-default .cm-string-2 {color: #f50;}\n.cm-s-default .cm-meta {color: #555;}\n.cm-s-default .cm-qualifier {color: #555;}\n.cm-s-default .cm-builtin {color: #30a;}\n.cm-s-default .cm-bracket {color: #997;}\n.cm-s-default .cm-tag {color: #170;}\n.cm-s-default .cm-attribute {color: #00c;}\n.cm-s-default .cm-hr {color: #999;}\n.cm-s-default .cm-link {color: #00c;}\n\n.cm-s-default .cm-error {color: #f00;}\n.cm-invalidchar {color: #f00;}\n\n.CodeMirror-composing { border-bottom: 2px solid; }\n\n/* Default styles for common addons */\n\ndiv.CodeMirror span.CodeMirror-matchingbracket {color: #0b0;}\ndiv.CodeMirror span.CodeMirror-nonmatchingbracket {color: #a22;}\n.CodeMirror-matchingtag { background: rgba(255, 150, 0, .3); }\n.CodeMirror-activeline-background {background: #e8f2ff;}\n\n/* STOP */\n\n/* The rest of this file contains styles related to the mechanics of\n   the editor. You probably shouldn't touch them. */\n\n.CodeMirror {\n  position: relative;\n  overflow: hidden;\n  background: white;\n}\n\n.CodeMirror-scroll {\n  overflow: scroll !important; /* Things will break if this is overridden */\n  /* 50px is the magic margin used to hide the element's real scrollbars */\n  /* See overflow: hidden in .CodeMirror */\n  margin-bottom: -50px; margin-right: -50px;\n  padding-bottom: 50px;\n  height: 100%;\n  outline: none; /* Prevent dragging from highlighting the element */\n  position: relative;\n  z-index: 0;\n}\n.CodeMirror-sizer {\n  position: relative;\n  border-right: 50px solid transparent;\n}\n\n/* The fake, visible scrollbars. Used to force redraw during scrolling\n   before actual scrolling happens, thus preventing shaking and\n   flickering artifacts. */\n.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n  position: absolute;\n  z-index: 6;\n  display: none;\n  outline: none;\n}\n.CodeMirror-vscrollbar {\n  right: 0; top: 0;\n  overflow-x: hidden;\n  overflow-y: scroll;\n}\n.CodeMirror-hscrollbar {\n  bottom: 0; left: 0;\n  overflow-y: hidden;\n  overflow-x: scroll;\n}\n.CodeMirror-scrollbar-filler {\n  right: 0; bottom: 0;\n}\n.CodeMirror-gutter-filler {\n  left: 0; bottom: 0;\n}\n\n.CodeMirror-gutters {\n  position: absolute; left: 0; top: 0;\n  min-height: 100%;\n  z-index: 3;\n}\n.CodeMirror-gutter {\n  white-space: normal;\n  height: 100%;\n  display: inline-block;\n  vertical-align: top;\n  margin-bottom: -50px;\n}\n.CodeMirror-gutter-wrapper {\n  position: absolute;\n  z-index: 4;\n  background: none !important;\n  border: none !important;\n}\n.CodeMirror-gutter-background {\n  position: absolute;\n  top: 0; bottom: 0;\n  z-index: 4;\n}\n.CodeMirror-gutter-elt {\n  position: absolute;\n  cursor: default;\n  z-index: 4;\n}\n.CodeMirror-gutter-wrapper ::selection { background-color: transparent }\n.CodeMirror-gutter-wrapper ::-moz-selection { background-color: transparent }\n\n.CodeMirror-lines {\n  cursor: text;\n  min-height: 1px; /* prevents collapsing before first draw */\n}\n.CodeMirror pre.CodeMirror-line,\n.CodeMirror pre.CodeMirror-line-like {\n  /* Reset some styles that the rest of the page might have set */\n  -moz-border-radius: 0; -webkit-border-radius: 0; border-radius: 0;\n  border-width: 0;\n  background: transparent;\n  font-family: inherit;\n  font-size: inherit;\n  margin: 0;\n  white-space: pre;\n  word-wrap: normal;\n  line-height: inherit;\n  color: inherit;\n  z-index: 2;\n  position: relative;\n  overflow: visible;\n  -webkit-tap-highlight-color: transparent;\n  -webkit-font-variant-ligatures: contextual;\n  font-variant-ligatures: contextual;\n}\n.CodeMirror-wrap pre.CodeMirror-line,\n.CodeMirror-wrap pre.CodeMirror-line-like {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  word-break: normal;\n}\n\n.CodeMirror-linebackground {\n  position: absolute;\n  left: 0; right: 0; top: 0; bottom: 0;\n  z-index: 0;\n}\n\n.CodeMirror-linewidget {\n  position: relative;\n  z-index: 2;\n  padding: 0.1px; /* Force widget margins to stay inside of the container */\n}\n\n.CodeMirror-widget {}\n\n.CodeMirror-rtl pre { direction: rtl; }\n\n.CodeMirror-code {\n  outline: none;\n}\n\n/* Force content-box sizing for the elements where we expect it */\n.CodeMirror-scroll,\n.CodeMirror-sizer,\n.CodeMirror-gutter,\n.CodeMirror-gutters,\n.CodeMirror-linenumber {\n  -moz-box-sizing: content-box;\n  box-sizing: content-box;\n}\n\n.CodeMirror-measure {\n  position: absolute;\n  width: 100%;\n  height: 0;\n  overflow: hidden;\n  visibility: hidden;\n}\n\n.CodeMirror-cursor {\n  position: absolute;\n  pointer-events: none;\n}\n.CodeMirror-measure pre { position: static; }\n\ndiv.CodeMirror-cursors {\n  visibility: hidden;\n  position: relative;\n  z-index: 3;\n}\ndiv.CodeMirror-dragcursors {\n  visibility: visible;\n}\n\n.CodeMirror-focused div.CodeMirror-cursors {\n  visibility: visible;\n}\n\n.CodeMirror-selected { background: #d9d9d9; }\n.CodeMirror-focused .CodeMirror-selected { background: #d7d4f0; }\n.CodeMirror-crosshair { cursor: crosshair; }\n.CodeMirror-line::selection, .CodeMirror-line > span::selection, .CodeMirror-line > span > span::selection { background: #d7d4f0; }\n.CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection { background: #d7d4f0; }\n\n.cm-searching {\n  background-color: #ffa;\n  background-color: rgba(255, 255, 0, .4);\n}\n\n/* Used to force a border model for a node */\n.cm-force-border { padding-right: .1px; }\n\n@media print {\n  /* Hide the cursor when printing */\n  .CodeMirror div.CodeMirror-cursors {\n    visibility: hidden;\n  }\n}\n\n/* See issue #2901 */\n.cm-tab-wrap-hack:after { content: ''; }\n\n/* Help users use markselection to safely style text background */\nspan.CodeMirror-selectedtext { background: none; }\n",""]);const r=n},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(0<e[5].length?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,r,o){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(i)for(var l=0;l<this.length;l++){var a=this[l][0];null!=a&&(s[a]=!0)}for(l=0;l<t.length;l++)a=[].concat(t[l]),i&&s[a[0]]||(void 0!==o&&(void 0!==a[5]&&(a[1]="@layer".concat(0<a[5].length?" ".concat(a[5]):""," {").concat(a[1],"}")),a[5]=o),n&&(a[2]&&(a[1]="@media ".concat(a[2]," {").concat(a[1],"}")),a[2]=n),r&&(a[4]?(a[1]="@supports (".concat(a[4],") {").concat(a[1],"}"),a[4]=r):a[4]="".concat(r)),e.push(a))},e}},601:t=>{t.exports=function(t){return t[1]}},875:(t,e,n)=>{n.r(e),n.d(e,{default:()=>a}),t=n(72),t=n.n(t),e=n(825),e=n.n(e);var i=n(659);i=n.n(i);var r=n(56);r=n.n(r);var o=n(540);o=n.n(o);var s=n(113);s=n.n(s),n=n(762);var l={};l.styleTagTransform=s(),l.setAttributes=r(),l.insert=i().bind(null,"head"),l.domAPI=e(),l.insertStyleElement=o(),t()(n.A,l);const a=n.A&&n.A.locals?n.A.locals:void 0},72:t=>{function e(t){for(var e=-1,n=0;n<r.length;n++)if(r[n].identifier===t){e=n;break}return e}function n(t,n){for(var o={},s=[],l=0;l<t.length;l++){var a=t[l],h=n.base?a[0]+n.base:a[0],c=o[h]||0,u="".concat(h," ").concat(c);o[h]=c+1,h=e(u),a={css:a[1],media:a[2],sourceMap:a[3],supports:a[4],layer:a[5]},-1!==h?(r[h].references++,r[h].updater(a)):(a=i(a,n),n.byIndex=l,r.splice(l,0,{identifier:u,updater:a,references:1})),s.push(u)}return s}function i(t,e){var n=e.domAPI(e);return n.update(t),function(e){e?(e.css!==t.css||e.media!==t.media||e.sourceMap!==t.sourceMap||e.supports!==t.supports||e.layer!==t.layer)&&n.update(t=e):n.remove()}}var r=[];t.exports=function(t,i){var o=n(t=t||[],i=i||{});return function(t){t=t||[];for(var s=0;s<o.length;s++){var l=e(o[s]);r[l].references--}for(t=n(t,i),s=0;s<o.length;s++)l=e(o[s]),0===r[l].references&&(r[l].updater(),r.splice(l,1));o=t}}},659:t=>{var e={};t.exports=function(t,n){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}if(!(t=e[t]))throw Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");t.appendChild(n)}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},56:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(i+="@layer".concat(0<n.layer.length?" ".concat(n.layer):""," {")),i+=n.css,r&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}"),(n=n.sourceMap)&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),t.styleTagTransform(i,e,t.options)},remove:function(){null!==e.parentNode&&e.parentNode.removeChild(e)}}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},143:(t,e,n)=>{function i(){return r()("/******/ (() => { // webpackBootstrap\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ 793:\n/***/ ((module) => {\n\nconst changeExp = new RegExp(/(^(?![><\\-])*\\d+(?:,\\d+)?)([acd])(\\d+(?:,\\d+)?)/);\n\nfunction DiffParser(diff) {\n\tconst changes = [];\n\tlet change_id = 0;\n\t// parse diff\n\tconst diff_lines = diff.split(/\\n/);\n\tfor (var i = 0; i < diff_lines.length; ++i) {\n\t\tif (diff_lines[i].length == 0) continue;\n\t\tconst change = {};\n\t\tconst test = changeExp.exec(diff_lines[i]);\n\t\tif (test == null) continue;\n\t\t// lines are zero-based\n\t\tconst fr = test[1].split(',');\n\t\tchange['lhs-line-from'] = fr[0] - 1;\n\t\tif (fr.length == 1) change['lhs-line-to'] = fr[0] - 1;\n\t\telse change['lhs-line-to'] = fr[1] - 1;\n\t\tconst to = test[3].split(',');\n\t\tchange['rhs-line-from'] = to[0] - 1;\n\t\tif (to.length == 1) change['rhs-line-to'] = to[0] - 1;\n\t\telse change['rhs-line-to'] = to[1] - 1;\n\t\tchange['op'] = test[2];\n\t\tchanges[change_id++] = change;\n\t}\n\treturn changes;\n};\n\nmodule.exports = DiffParser;\n\n\n/***/ }),\n\n/***/ 369:\n/***/ ((module) => {\n\nconst SMS_TIMEOUT_SECONDS = 1.0;\n\nfunction diff(lhs, rhs, options = {}) {\n\tconst {\n\t\tignorews = false,\n\t\tignoreaccents = false,\n\t\tignorecase = false,\n\t\tsplit = 'lines'\n\t} = options;\n\n\tthis.codeify = new CodeifyText(lhs, rhs, {\n\t\tignorews,\n\t\tignoreaccents,\n\t\tignorecase,\n\t\tsplit\n\t});\n\tconst lhs_ctx = {\n\t\tcodes: this.codeify.getCodes('lhs'),\n\t\tmodified: {}\n\t};\n\tconst rhs_ctx = {\n\t\tcodes: this.codeify.getCodes('rhs'),\n\t\tmodified: {}\n\t};\n\tconst vector_d = [];\n\tconst vector_u = [];\n\tthis._lcs(lhs_ctx, 0, lhs_ctx.codes.length, rhs_ctx, 0, rhs_ctx.codes.length, vector_u, vector_d);\n\tthis._optimize(lhs_ctx);\n\tthis._optimize(rhs_ctx);\n\tthis.items = this._create_diffs(lhs_ctx, rhs_ctx);\n};\n\ndiff.prototype.changes = function() {\n\treturn this.items;\n};\n\ndiff.prototype.getLines = function(side) {\n\treturn this.codeify.getLines(side);\n};\n\ndiff.prototype.normal_form = function() {\n\tlet nf = '';\n\tfor (let index = 0; index < this.items.length; ++index) {\n\t\tconst item = this.items[index];\n\t\tlet lhs_str = '';\n\t\tlet rhs_str = '';\n\t\tlet change = 'c';\n\t\tif (item.lhs_deleted_count === 0 && item.rhs_inserted_count > 0) change = 'a';\n\t\telse if (item.lhs_deleted_count > 0 && item.rhs_inserted_count === 0) change = 'd';\n\n\t\tif (item.lhs_deleted_count === 1) lhs_str = item.lhs_start + 1;\n\t\telse if (item.lhs_deleted_count === 0) lhs_str = item.lhs_start;\n\t\telse lhs_str = (item.lhs_start + 1) + ',' + (item.lhs_start + item.lhs_deleted_count);\n\n\t\tif (item.rhs_inserted_count === 1) rhs_str = item.rhs_start + 1;\n\t\telse if (item.rhs_inserted_count === 0) rhs_str = item.rhs_start;\n\t\telse rhs_str = (item.rhs_start + 1) + ',' + (item.rhs_start + item.rhs_inserted_count);\n\t\tnf += lhs_str + change + rhs_str + '\\n';\n\n\t\tconst lhs_lines = this.getLines('lhs');\n\t\tconst rhs_lines = this.getLines('rhs');\n\t\tif (rhs_lines && lhs_lines) {\n\t\t\tlet i;\n\t\t\t// if rhs/lhs lines have been retained, output contextual diff\n\t\t\tfor (i = item.lhs_start; i < item.lhs_start + item.lhs_deleted_count; ++i) {\n\t\t\t\tnf += '< ' + lhs_lines[i] + '\\n';\n\t\t\t}\n\t\t\tif (item.rhs_inserted_count && item.lhs_deleted_count) nf += '---\\n';\n\t\t\tfor (i = item.rhs_start; i < item.rhs_start + item.rhs_inserted_count; ++i) {\n\t\t\t\tnf += '> ' + rhs_lines[i] + '\\n';\n\t\t\t}\n\t\t}\n\t}\n\treturn nf;\n};\n\ndiff.prototype._lcs = function(lhs_ctx, lhs_lower, lhs_upper, rhs_ctx, rhs_lower, rhs_upper, vector_u, vector_d) {\n\twhile ( (lhs_lower < lhs_upper) && (rhs_lower < rhs_upper) && (lhs_ctx.codes[lhs_lower] === rhs_ctx.codes[rhs_lower]) ) {\n\t\t++lhs_lower;\n\t\t++rhs_lower;\n\t}\n\twhile ( (lhs_lower < lhs_upper) && (rhs_lower < rhs_upper) && (lhs_ctx.codes[lhs_upper - 1] === rhs_ctx.codes[rhs_upper - 1]) ) {\n\t\t--lhs_upper;\n\t\t--rhs_upper;\n\t}\n\tif (lhs_lower === lhs_upper) {\n\t\twhile (rhs_lower < rhs_upper) {\n\t\t\trhs_ctx.modified[ rhs_lower++ ] = true;\n\t\t}\n\t}\n\telse if (rhs_lower === rhs_upper) {\n\t\twhile (lhs_lower < lhs_upper) {\n\t\t\tlhs_ctx.modified[ lhs_lower++ ] = true;\n\t\t}\n\t}\n\telse {\n\t\tconst sms = this._sms(lhs_ctx, lhs_lower, lhs_upper, rhs_ctx, rhs_lower, rhs_upper, vector_u, vector_d);\n\t\tthis._lcs(lhs_ctx, lhs_lower, sms.x, rhs_ctx, rhs_lower, sms.y, vector_u, vector_d);\n\t\tthis._lcs(lhs_ctx, sms.x, lhs_upper, rhs_ctx, sms.y, rhs_upper, vector_u, vector_d);\n\t}\n};\n\ndiff.prototype._sms = function(lhs_ctx, lhs_lower, lhs_upper, rhs_ctx, rhs_lower, rhs_upper, vector_u, vector_d) {\n\tconst timeout = Date.now() + SMS_TIMEOUT_SECONDS * 1000;\n\tconst max = lhs_ctx.codes.length + rhs_ctx.codes.length + 1;\n\tconst kdown = lhs_lower - rhs_lower;\n\tconst kup = lhs_upper - rhs_upper;\n\tconst delta = (lhs_upper - lhs_lower) - (rhs_upper - rhs_lower);\n\tconst odd = (delta & 1) != 0;\n\tconst offset_down = max - kdown;\n\tconst offset_up = max - kup;\n\tconst maxd = ((lhs_upper - lhs_lower + rhs_upper - rhs_lower) / 2) + 1;\n\tvector_d[ offset_down + kdown + 1 ] = lhs_lower;\n\tvector_u[ offset_up + kup - 1 ] = lhs_upper;\n\tconst ret = { x:0, y:0 }\n\tlet x;\n\tlet y;\n\tfor (let d = 0; d <= maxd; ++d) {\n\t\tif (SMS_TIMEOUT_SECONDS && Date.now() > timeout) {\n\t\t\t// bail if taking too long\n\t\t\treturn { x: lhs_lower, y: rhs_upper };\n\t\t}\n\t\tfor (let k = kdown - d; k <= kdown + d; k += 2) {\n\t\t\tif (k === kdown - d) {\n\t\t\t\tx = vector_d[ offset_down + k + 1 ];//down\n\t\t\t}\n\t\t\telse {\n\t\t\t\tx = vector_d[ offset_down + k - 1 ] + 1;//right\n\t\t\t\tif ((k < (kdown + d)) && (vector_d[ offset_down + k + 1 ] >= x)) {\n\t\t\t\t\tx = vector_d[ offset_down + k + 1 ];//down\n\t\t\t\t}\n\t\t\t}\n\t\t\ty = x - k;\n\t\t\t// find the end of the furthest reaching forward D-path in diagonal k.\n\t\t\twhile ((x < lhs_upper) && (y < rhs_upper) && (lhs_ctx.codes[x] === rhs_ctx.codes[y])) {\n\t\t\t\tx++; y++;\n\t\t\t}\n\t\t\tvector_d[ offset_down + k ] = x;\n\t\t\t// overlap ?\n\t\t\tif (odd && (kup - d < k) && (k < kup + d)) {\n\t\t\t\tif (vector_u[offset_up + k] <= vector_d[offset_down + k]) {\n\t\t\t\t\tret.x = vector_d[offset_down + k];\n\t\t\t\t\tret.y = vector_d[offset_down + k] - k;\n\t\t\t\t\treturn (ret);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// Extend the reverse path.\n\t\tfor (let k = kup - d; k <= kup + d; k += 2) {\n\t\t\t// find the only or better starting point\n\t\t\tif (k === kup + d) {\n\t\t\t\tx = vector_u[offset_up + k - 1]; // up\n\t\t\t} else {\n\t\t\t\tx = vector_u[offset_up + k + 1] - 1; // left\n\t\t\t\tif ((k > kup - d) && (vector_u[offset_up + k - 1] < x))\n\t\t\t\t\tx = vector_u[offset_up + k - 1]; // up\n\t\t\t}\n\t\t\ty = x - k;\n\t\t\twhile ((x > lhs_lower) && (y > rhs_lower) && (lhs_ctx.codes[x - 1] === rhs_ctx.codes[y - 1])) {\n\t\t\t\t// diagonal\n\t\t\t\tx--;\n\t\t\t\ty--;\n\t\t\t}\n\t\t\tvector_u[offset_up + k] = x;\n\t\t\t// overlap ?\n\t\t\tif (!odd && (kdown - d <= k) && (k <= kdown + d)) {\n\t\t\t\tif (vector_u[offset_up + k] <= vector_d[offset_down + k]) {\n\t\t\t\t\tret.x = vector_d[offset_down + k];\n\t\t\t\t\tret.y = vector_d[offset_down + k] - k;\n\t\t\t\t\treturn (ret);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tthrow \"the algorithm should never come here.\";\n};\n\ndiff.prototype._optimize = function(ctx) {\n\tlet start = 0;\n\tlet end = 0;\n\twhile (start < ctx.codes.length) {\n\t\twhile ((start < ctx.codes.length) && (ctx.modified[start] === undefined || ctx.modified[start] === false)) {\n\t\t\tstart++;\n\t\t}\n\t\tend = start;\n\t\twhile ((end < ctx.codes.length) && (ctx.modified[end] === true)) {\n\t\t\tend++;\n\t\t}\n\t\tif ((end < ctx.codes.length) && (ctx.codes[start] === ctx.codes[end])) {\n\t\t\tctx.modified[start] = false;\n\t\t\tctx.modified[end] = true;\n\t\t}\n\t\telse {\n\t\t\tstart = end;\n\t\t}\n\t}\n};\n\ndiff.prototype._create_diffs = function(lhs_ctx, rhs_ctx) {\n\tconst items = [];\n\tlet lhs_start = 0;\n\tlet rhs_start = 0;\n\tlet lhs_line = 0;\n\tlet rhs_line = 0;\n\n\twhile (lhs_line < lhs_ctx.codes.length || rhs_line < rhs_ctx.codes.length) {\n\t\tif ((lhs_line < lhs_ctx.codes.length) && (!lhs_ctx.modified[lhs_line])\n\t\t\t&& (rhs_line < rhs_ctx.codes.length) && (!rhs_ctx.modified[rhs_line])) {\n\t\t\t// equal lines\n\t\t\tlhs_line++;\n\t\t\trhs_line++;\n\t\t}\n\t\telse {\n\t\t\t// maybe deleted and/or inserted lines\n\t\t\tlhs_start = lhs_line;\n\t\t\trhs_start = rhs_line;\n\n\t\t\twhile (lhs_line < lhs_ctx.codes.length && (rhs_line >= rhs_ctx.codes.length || lhs_ctx.modified[lhs_line]))\n\t\t\t\tlhs_line++;\n\n\t\t\twhile (rhs_line < rhs_ctx.codes.length && (lhs_line >= lhs_ctx.codes.length || rhs_ctx.modified[rhs_line]))\n\t\t\t\trhs_line++;\n\n\t\t\tif ((lhs_start < lhs_line) || (rhs_start < rhs_line)) {\n\t\t\t\t// store a new difference-item\n\t\t\t\titems.push({\n\t\t\t\t\tlhs_start: lhs_start,\n\t\t\t\t\trhs_start: rhs_start,\n\t\t\t\t\tlhs_deleted_count: lhs_line - lhs_start,\n\t\t\t\t\trhs_inserted_count: rhs_line - rhs_start\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\treturn items;\n};\n\nfunction CodeifyText(lhs, rhs, options) {\n    this._max_code = 0;\n    this._diff_codes = {};\n\tthis.ctxs = {};\n\tthis.options = options;\n\tthis.options.split = this.options.split || 'lines';\n\tconst exp = /\\p{Letter}\\p{Mark}*|\\p{Number}\\p{Mark}*|\\p{Punctuation}\\p{Mark}*|\\p{Symbol}\\p{Mark}*|\\p{White_Space}/gu;\n\n\tif (typeof lhs === 'string') {\n\t\tif (this.options.split === 'chars') {\n\t\t\t// split characters and include their diacritical marks\n\t\t\tthis.lhs = lhs.match(exp) || [];\n\t\t\t// this.lhs = [...lhs];\n\t\t} else if (this.options.split === 'words') {\n\t\t\tthis.lhs = lhs.split(/\\s/);\n\t\t} else if (this.options.split === 'lines') {\n\t\t\tthis.lhs = lhs.split('\\n');\n\t\t}\n\t} else {\n\t\tthis.lhs = lhs;\n\t}\n\tif (typeof rhs === 'string') {\n\t\tif (this.options.split === 'chars') {\n\t\t\t// split characters and include their diacritical marks\n\t\t\tthis.rhs = rhs.match(exp) || [];\n\t\t\t// this.rhs = [...rhs];\n\t\t} else if (this.options.split === 'words') {\n\t\t\tthis.rhs = rhs.split(/\\s/);\n\t\t} else if (this.options.split === 'lines') {\n\t\t\tthis.rhs = rhs.split('\\n');\n\t\t}\n\t} else {\n\t\tthis.rhs = rhs;\n\t}\n};\n\nCodeifyText.prototype.getCodes = function(side) {\n\tif (!this.ctxs.hasOwnProperty(side)) {\n\t\tvar ctx = this._diff_ctx(this[side]);\n\t\tthis.ctxs[side] = ctx;\n\t\tctx.codes.length = Object.keys(ctx.codes).length;\n\t}\n\treturn this.ctxs[side].codes;\n}\n\nCodeifyText.prototype.getLines = function(side) {\n\treturn this.ctxs[side].lines;\n}\n\nCodeifyText.prototype._diff_ctx = function(lines) {\n\tvar ctx = {i: 0, codes: {}, lines: lines};\n\tthis._codeify(lines, ctx);\n\treturn ctx;\n}\n\nCodeifyText.prototype._codeify = function(lines, ctx) {\n\tfor (let i = 0; i < lines.length; ++i) {\n\t\tlet line = lines[i];\n\t\tif (this.options.ignorews) {\n\t\t\tline = line.replace(/\\s+/g, '');\n\t\t}\n\t\tif (this.options.ignorecase) {\n\t\t\tline = line.toLowerCase();\n\t\t}\n\t\tif (this.options.ignoreaccents) {\n\t\t\tline = line.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n\t\t}\n\t\tconst aCode = this._diff_codes[line];\n\t\tif (aCode !== undefined) {\n\t\t\tctx.codes[i] = aCode;\n\t\t} else {\n\t\t\t++this._max_code;\n\t\t\tthis._diff_codes[line] = this._max_code;\n\t\t\tctx.codes[i] = this._max_code;\n\t\t}\n\t}\n}\n\nmodule.exports = diff;\n\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\nconst diff = __webpack_require__(369);\nconst DiffParser = __webpack_require__(793);\n\nonmessage = function (ev) {\n\tif (!ev.data) {\n\t\treturn;\n\t}\n\tconst { lhs, rhs, options } = ev.data;\n\tconst compare = new diff(lhs, rhs, options);\n\tconst changes = DiffParser(compare.normal_form());\n\tpostMessage(changes);\n};\n\n/******/ })()\n;","Worker",void 0,void 0)}n.r(e),n.d(e,{default:()=>i}),t=n(512);var r=n.n(t)},512:t=>{t.exports=function(t,e,n,i){var r=self||window;try{try{try{var o=new r.Blob([t])}catch(e){(o=new(r.BlobBuilder||r.WebKitBlobBuilder||r.MozBlobBuilder||r.MSBlobBuilder)).append(t),o=o.getBlob()}var s=r.URL||r.webkitURL,l=s.createObjectURL(o),a=new r[e](l,n);return s.revokeObjectURL(l),a}catch(i){return new r[e]("data:application/javascript,".concat(encodeURIComponent(t)),n)}}catch(t){if(!i)throw Error("Inline worker is not supported");return new r[e](i,n)}}},819:(t,e,n)=>{function i(t,e){r.defineExtension("centerOnCursor",(function(){const t=this.cursorCoords(null,"local");this.scrollTo(null,(t.top+t.bottom)/2-this.getScrollerElement().clientHeight/2)})),this.init(t,e)}const r=n(237);n(653),n(533),n(875);const o=n(636),s=n(622),l=console.time,a=console.timeEnd;i.prototype.init=function(t,e={}){this.setOptions(e),this.el=t,this.lhs_cmsettings={...this.settings.cmsettings,...this.settings.lhs_cmsettings,lineWrapping:this.settings.wrap_lines,lineNumbers:this.settings.line_numbers,gutters:this.settings.line_numbers&&["merge","CodeMirror-linenumbers"]||[]},this.rhs_cmsettings={...this.settings.cmsettings,...this.settings.rhs_cmsettings,lineWrapping:this.settings.wrap_lines,lineNumbers:this.settings.line_numbers,gutters:this.settings.line_numbers&&["merge","CodeMirror-linenumbers"]||[]},this._vdoc=new s({_debug:this.settings._debug}),this._linkedScrollTimeout={}},i.prototype.unbind=function(){if(!this._unbound){for(this.trace("api#unbind"),null!=this._changedTimeout&&clearTimeout(this._changedTimeout),this.editor&&(this.editor.lhs&&this.editor.lhs.toTextArea(),this.editor.rhs&&this.editor.rhs.toTextArea());this.el.lastChild;)this.el.removeChild(this.el.lastChild);this._origEl&&(this.el.className=this._origEl.className),this._unbound=!0}},i.prototype.readOnly=function(t){return"lhs"===t?this.lhs_cmsettings.readOnly:"rhs"===t?this.rhs_cmsettings.readOnly:this.lhs_cmsettings.readOnly||this.rhs_cmsettings.readOnly},i.prototype.lhs=function(t){this.trace("api#lhs",t&&t.length),this.changes=[],this._current_diff=-1,this.editor.lhs.setValue(t)},i.prototype.rhs=function(t){this.trace("api#rhs",t&&t.length),this.changes=[],this._current_diff=-1,this.editor.rhs.setValue(t)},i.prototype.update=function(){this.trace("api#update"),this.el.dispatchEvent(new Event("changed"))},i.prototype.unmarkup=function(){this.trace("api#unmarkup"),this._clear(),this.el.dispatchEvent(new Event("updated"))},i.prototype.scrollToDiff=function(t){this.trace("api#scrollToDiff",t),this.changes.length&&("next"===t?this._current_diff=this._current_diff===this.changes.length-1||void 0===this._current_diff?0:Math.min(++this._current_diff,this.changes.length-1):"prev"===t&&(this._current_diff=0==this._current_diff||void 0===this._current_diff?this.changes.length-1:Math.max(--this._current_diff,0)),this.trace("change","current-diff",this._current_diff),this._scroll_to_change(this.changes[this._current_diff]),this.setChanges(this.changes))},i.prototype.mergeCurrentChange=function(t){this.trace("api#mergeCurrentChange",t),this.changes.length&&("lhs"!=t||this.lhs_cmsettings.readOnly?"rhs"!=t||this.rhs_cmsettings.readOnly||this._merge_change(this.changes[this._current_diff],"lhs","rhs"):this._merge_change(this.changes[this._current_diff],"rhs","lhs"))},i.prototype.scrollTo=function(t,e){this.trace("api#scrollTo",t,e),(t=this.editor[t]).setCursor(e),t.centerOnCursor(),this._renderChanges(),this.el.dispatchEvent(new Event("updated"))},i.prototype.setOptions=function(t){const e=this.settings?this.settings.rhs_margin:"right";if(this.settings={...this.settings,...t},this.trace("api#setOptions",t),this.editor){if(t.hasOwnProperty("sidebar")){var n=document.querySelectorAll(`#${this.id} .mergely-margin`),i=!!t.sidebar;for(const t of n)t.style.visibility=i?"visible":"hidden"}n=this.editor.lhs,i=this.editor.rhs,t.hasOwnProperty("wrap_lines")&&(n.setOption("lineWrapping",this.settings.wrap_lines),i.setOption("lineWrapping",this.settings.wrap_lines)),t.hasOwnProperty("line_numbers")&&(n.setOption("lineNumbers",this.settings.line_numbers),i.setOption("lineNumbers",this.settings.line_numbers)),t.hasOwnProperty("rhs_margin")&&t.rhs_margin!==e&&(t=document.querySelectorAll(`#${this.id} .mergely-editor > div`))[4].parentNode.insertBefore(t[4],t[3]),this._changing()}},i.prototype.get=function(t){return this.trace("api#get",t),void 0===(t=this.editor[t].getValue())?"":t},i.prototype.cm=function(t){return this.trace("api#cm","side"),this.editor[t]},i.prototype.search=function(t,e,n){this.trace("api#search",t,e,n);const i=this.editor[t];if(!i.getSearchCursor)throw Error("install CodeMirror search addon");n="prev"===n?"findPrevious":"findNext";const r={line:0,ch:0};0!==i.getSelection().length&&this.prev_query[t]===e||(this.cursor[this.id]=i.getSearchCursor(e,r,!1),this.prev_query[t]=e);let o=this.cursor[this.id];o[n]()?i.setSelection(o.from(),o.to()):(o=this.cursor[this.id]=i.getSearchCursor(e,r,!1),this.prev_query[t]=e,o[n]()&&i.setSelection(o.from(),o.to()))},i.prototype.resize=function(){this.trace("api#resize");const t=this.el.offsetHeight-2;var e=this._queryElement(`#${this.id}-lhs-margin`);e.style.height=`${t}px`,e.height=`${t}`,(e=this._queryElement(`#${this.id}-lhs-rhs-canvas`)).style.height=`${t}px`,e.height=`${t}`,(e=this._queryElement(`#${this.id}-rhs-margin`)).style.height=`${t}px`,e.height=`${t}`,this.el.dispatchEvent(new Event("resized")),this.em_height=null,this._changing(),this._set_top_offset("lhs")},i.prototype.bind=function(t){function e(t,e,n){if(n.target.className.includes("merge-button"))n.preventDefault();else{n=!1;for(let o=0;o<this.changes.length;++o){var i=this.changes[o],r=i[`${t}-line-to`];if(e>=i[`${t}-line-from`]&&e<=r){if(n=!0,0<=this._current_diff){for(r=(i=this.changes[this._current_diff])["lhs-line-from"];r<=i["lhs-line-to"];++r)this.editor.lhs.removeLineClass(r,"gutter");for(r=i["rhs-line-from"];r<=i["rhs-line-to"];++r)this.editor.rhs.removeLineClass(r,"gutter")}this._current_diff=o;break}}this.scrollTo(t,e),n&&this._changing()}}this.trace("api#bind",t);var n=o.getMergelyContainer({clazz:t.className}),i=window.getComputedStyle(t);if(!(n.style.height||i.height&&"0px"!==i.height))throw Error(`The element "${t.id}" requires an explicit height`);this._origEl={className:t.className},this.id=`${t.id}`,this.lhsId=`${t.id}-lhs`,this.rhsId=`${t.id}-rhs`,this.chfns={lhs:[],rhs:[]},this.prev_query=[],this.cursor=[],this._skipscroll={},this.change_exp=new RegExp(/(\d+(?:,\d+)?)([acd])(\d+(?:,\d+)?)/),this.merge_lhs_button=o.htmlToElement('<div class="merge-button" title="Merge left">&#x25C0;</div>'),this.merge_rhs_button=o.htmlToElement('<div class="merge-button" title="Merge right">&#x25B6;</div>'),i=o.getMarginTemplate({id:this.lhsId});const s=o.getMarginTemplate({id:this.rhsId}),h=o.getEditorTemplate({id:this.lhsId}),c=o.getEditorTemplate({id:this.rhsId}),u=o.getCenterCanvasTemplate({id:this.id});let d;n.append(i),n.append(h),n.append(u),"left"==this.settings.rhs_margin&&n.append(s),n.append(c),"left"!=this.settings.rhs_margin&&n.append(s),this.settings.sidebar||(i.style.visibility="hidden",s.style.visibility="hidden"),t.append(n),t=document.getElementById(`${this.id}-lhs`),n=document.getElementById(`${this.id}-rhs`),t||console.error("lhs textarea not defined - Mergely not initialized properly"),n||console.error("rhs textarea not defined - Mergely not initialized properly"),this._current_diff=-1,this.editor={},this.editor.lhs=r.fromTextArea(t,this.lhs_cmsettings),this.editor.rhs=r.fromTextArea(n,this.rhs_cmsettings),this.settings.lhs&&("string"===(t=typeof this.settings.lhs)?this.lhs(this.settings.lhs):"function"===t&&this.settings.lhs((t=>{this.lhs(t)}))),this.settings.rhs&&("string"===(t=typeof this.settings.rhs)?this.rhs(this.settings.rhs):"function"===t&&this.settings.rhs((t=>{this.rhs(t)}))),this.editor.lhs.on("beforeChange",((t,e)=>{(1<e.text.length||e.from.line-e.to.line&&"+delete"===e.origin)&&this._clear()})),this.editor.rhs.on("beforeChange",((t,e)=>{this.trace("event#rhs-beforeChange",e),(1<e.text.length||e.from.line-e.to.line&&"+delete"===e.origin)&&this._clear()})),this.editor.lhs.on("change",((t,e)=>{this.trace("event#lhs-change"),this._changing(),this.trace("event#lhs-change [emitted]")})),this.editor.lhs.on("scroll",(()=>{this._skipscroll.lhs?this.trace("event#lhs-scroll (skipped)"):(this.trace("event#lhs-scroll"),setTimeout((()=>{this._scrolling({side:"lhs"})}),1))})),this.editor.rhs.on("change",((t,e)=>{this.trace("event#rhs-change",e),this._changing()})),this.editor.rhs.on("scroll",(()=>{this._skipscroll.rhs?this.trace("event#rhs-scroll (skipped)"):(this.trace("event#rhs-scroll"),setTimeout((()=>{this._scrolling({side:"rhs"})}),1))}));const f=()=>{this.settings._debug&&(l("event#resize"),this.trace("event#resize [start]")),this.resize(),this.settings._debug&&a("event#resize")};this._handleResize=()=>{d&&clearTimeout(d),d=setTimeout(f,this.settings.resize_timeout)},window.addEventListener("resize",(()=>{this._handleResize()})),f(),this.editor.lhs.on("gutterClick",((t,n,i,r)=>{this.trace("event#gutterClick","lhs",n,r),e.call(this,"lhs",n,r)})),this.editor.rhs.on("gutterClick",((t,n,i,r)=>{this.trace("event#gutterClick","rhs",n,r),e.call(this,"rhs",n,r)})),this.editor.lhs.focus()},i.prototype._clear=function(){this.settings._debug&&l("draw#_clear"),this.changes=[],this._clearMarkup(),this._clearCanvases(),this.settings._debug&&a("draw#_clear")},i.prototype._clearMarkup=function(){this.settings._debug&&l("draw#_clearMarkup"),this._vdoc.clear(),this._vdoc=new s({_debug:this.settings._debug}),this.settings._debug&&a("draw#_clearMarkup")},i.prototype._clearCanvases=function(){this.settings._debug&&l("draw#_clearCanvases");const t=this._draw_info();var e=t.lhs_margin.getContext("2d");e.beginPath(),e.fillStyle=this.settings.bgcolor,e.strokeStyle="#888",e.fillRect(0,0,6.5,t.visible_page_height),e.strokeRect(0,0,6.5,t.visible_page_height),(e=t.rhs_margin.getContext("2d")).beginPath(),e.fillStyle=this.settings.bgcolor,e.strokeStyle="#888",e.fillRect(0,0,6.5,t.visible_page_height),e.strokeRect(0,0,6.5,t.visible_page_height),(e=t.dcanvas.getContext("2d")).beginPath(),e.fillStyle="rgba(0,0,0,0)",e.clearRect(0,0,this.draw_mid_width,t.visible_page_height),this.settings._debug&&a("draw#_clearCanvases")},i.prototype._scroll_to_change=function(t){if(t){var{lhs:e,rhs:n}=this.editor,i=Math.max(t["rhs-line-from"],0);e.setCursor(Math.max(t["lhs-line-from"],0),0),n.setCursor(i,0),0<=t["lhs-line-to"]?this.scrollTo("lhs",t["lhs-line-to"]):0<=t["rhs-line-to"]&&this.scrollTo("rhs",t["rhs-line-to"]),e.focus()}},i.prototype._scrolling=function({side:t}){if(this.settings._debug&&l(`scroll#_scrolling ${t}`),this.changes){var e=this.editor[t].getScrollerElement(),{top:n}=e.getBoundingClientRect();if(null!==e.offsetParent){if(null==this.midway){var i=e.clientHeight-(e.offsetHeight-e.offsetParent.offsetHeight);this.midway=(i/2+n).toFixed(2)}n=this.editor[t].coordsChar({left:0,top:this.midway}),i=e.scrollTop,e=e.scrollLeft;var r="lhs"===t?"rhs":"lhs",o=0,s=null,h=!1;for(var c of this.changes)n.line>=c[t+"-line-from"]&&(s=c,n.line>=s[t+"-line-to"]&&(c.hasOwnProperty(t+"-y-start")&&c.hasOwnProperty(t+"-y-end")&&c.hasOwnProperty(r+"-y-start")&&c.hasOwnProperty(r+"-y-end")?o+=c[t+"-y-end"]-c[t+"-y-start"]-(c[r+"-y-end"]-c[r+"-y-start"]):h=!0));c=this.editor[r].getViewport();var u=!0;s&&(this.trace("scroll#_scrolling","last change before midline",s),n.line>=c.from&&n<=c.to&&(u=!1)),u||h?(this.trace("scroll#_scrolling","other side",r,"pos:",i-o),this._skipscroll[r]=!0,this.trace("scroll#set oside skip set:",r,this._skipscroll),this._linkedScrollTimeout[r]&&(clearTimeout(this._linkedScrollTimeout[r]),this.trace("scroll#clearing timeout:",this._skipscroll)),this._linkedScrollTimeout[r]=setTimeout((()=>{this._skipscroll[r]=!1,this.trace("scroll#set oside skip unset:",r,this._skipscroll)}),100),this.editor[r].scrollTo(e,i-o)):this.trace("scroll#_scrolling","not scrolling other side"),this._renderChanges(),this.settings._debug&&a(`scroll#_scrolling ${t}`)}}else this.settings._debug&&a(`scroll#_scrolling ${t}`)},i.prototype._changing=function(){if(this.settings.autoupdate){this.settings._debug&&(l("change#_changing"),this.trace("change#_changing [start]"));var t=()=>{this._changedTimeout=null,this.el.dispatchEvent(new Event("changed"))};0<this.settings.change_timeout?(this.trace("change#setting timeout",this.settings.change_timeout),null!=this._changedTimeout&&clearTimeout(this._changedTimeout),this._changedTimeout=setTimeout(t,this.settings.change_timeout)):t(),this.settings._debug&&a("change#_changing")}else this.trace("change#_changing autoupdate is disabled")},i.prototype.setChanges=function(t){this.trace("change#setChanges"),this._clear(),this.changes=t,this._renderChanges()},i.prototype._renderChanges=function(){this.settings._debug&&(l("draw#_renderChanges"),this.trace("draw#_renderChanges [start]",this.changes.length,"changes")),this._clearCanvases(),this._calculateOffsets(this.changes),this._markupLineChanges(this.changes),this._renderDiff(this.changes),this.settings._debug&&a("draw#_renderChanges"),this.el.dispatchEvent(new Event("updated"))},i.prototype._getViewportSide=function(t){var e=this.editor[t];const n=e.getWrapperElement().getBoundingClientRect();return{from:t=e.lineAtHeight(n.top,"window"),to:e=e.lineAtHeight(n.bottom,"window")}},i.prototype._isChangeInView=function(t,e,n){return 0>n[`${t}-line-from`]||0>n[`${t}-line-to`]||(n[`${t}-line-from`]>=e.from&&n[`${t}-line-from`]<=e.to||n[`${t}-line-to`]>=e.from&&n[`${t}-line-to`]<=e.to||e.from>=n[`${t}-line-from`]&&e.to<=n[`${t}-line-to`])},i.prototype._set_top_offset=function(t){const e=this.editor[t].getScrollInfo().top;this.editor[t].scrollTo(null,0);var n=this._queryElement(".CodeMirror-measure");return!!n.offsetParent&&(n=n.offsetParent.offsetTop+4,this.editor[t].scrollTo(null,e),this.draw_top_offset=.5-n,!0)},i.prototype._calculateOffsets=function(t){this.settings._debug&&l("draw#_calculateOffsets");const{lhs:e,rhs:n}=this.editor;this.draw_lhs_min=.5,this.draw_mid_width=this._queryElement(`#${this.id}-lhs-rhs-canvas`).offsetWidth,this.draw_rhs_max=this.draw_mid_width-.5,this.draw_rhs_width=this.draw_lhs_width=5,this.em_height=e.defaultTextHeight();const i=e.getOption("lineWrapping")||n.getOption("lineWrapping"),r=i?null:e.charCoords({line:0},"local"),o=i?null:n.charCoords({line:0},"local");this._getViewportSide("lhs"),this._getViewportSide("rhs");for(const s of t){t=0<=s["lhs-line-from"]?s["lhs-line-from"]:0;const l=0<=s["lhs-line-to"]?s["lhs-line-to"]:0,a=0<=s["rhs-line-from"]?s["rhs-line-from"]:0,h=0<=s["rhs-line-to"]?s["rhs-line-to"]:0;i?"c"===s.op?(s["lhs-y-start"]=e.heightAtLine(t,"local"),s["lhs-y-end"]=e.heightAtLine(l+1,"local"),s["rhs-y-start"]=n.heightAtLine(a,"local"),s["rhs-y-end"]=n.heightAtLine(h+1,"local")):"a"===s.op?(s["lhs-y-start"]=-1===s["lhs-line-from"]?e.heightAtLine(t,"local"):e.heightAtLine(t+1,"local"),s["lhs-y-end"]=s["lhs-y-start"],s["rhs-y-start"]=n.heightAtLine(a,"local"),s["rhs-y-end"]=n.heightAtLine(h+1,"local")):(s["lhs-y-start"]=e.heightAtLine(t,"local"),s["lhs-y-end"]=e.heightAtLine(l+1,"local"),s["rhs-y-start"]=-1===s["rhs-line-from"]?n.heightAtLine(a,"local"):n.heightAtLine(a+1,"local"),s["rhs-y-end"]=s["rhs-y-start"]):"c"===s.op?(s["lhs-y-start"]=r.top+t*this.em_height,s["lhs-y-end"]=r.bottom+l*this.em_height,s["rhs-y-start"]=o.top+a*this.em_height,s["rhs-y-end"]=o.bottom+h*this.em_height):"a"===s.op?(s["lhs-y-start"]=-1===s["lhs-line-from"]?r.top+t*this.em_height:r.bottom+t*this.em_height,s["lhs-y-end"]=s["lhs-y-start"],s["rhs-y-start"]=o.top+a*this.em_height,s["rhs-y-end"]=o.bottom+h*this.em_height):(s["lhs-y-start"]=r.top+t*this.em_height,s["lhs-y-end"]=r.bottom+l*this.em_height,s["rhs-y-start"]=-1===s["rhs-line-from"]?o.top+a*this.em_height:o.bottom+a*this.em_height,s["rhs-y-end"]=s["rhs-y-start"]),s["lhs-y-start"]+=.5,s["lhs-y-end"]+=.5,s["rhs-y-start"]+=.5,s["rhs-y-end"]+=.5}this.settings._debug&&a("draw#_calculateOffsets")},i.prototype._markupLineChanges=function(t){this.settings._debug&&l("draw#_markupLineChanges");const{lhs:e,rhs:n}=this.editor,i=this._current_diff,r=this._getViewportSide("lhs"),o=this._getViewportSide("rhs"),{_vdoc:s}=this;for(let l=0;l<t.length;++l){const a=t[l],c=i===l,u=!1!==this.settings.lcs,d=this._isChangeInView("lhs",r,a),f=this._isChangeInView("rhs",o,a);if(d){var h=this.settings.line_numbers&&!n.getOption("readOnly");s.addRender("lhs",a,l,{isCurrent:c,lineDiff:u,getMergeHandler:(t,e,n)=>()=>this._merge_change(t,e,n),mergeButton:h?this.merge_rhs_button.cloneNode(!0):null})}f&&(h=this.settings.line_numbers&&!e.getOption("readOnly"),s.addRender("rhs",a,l,{isCurrent:c,lineDiff:u,getMergeHandler:(t,e,n)=>()=>this._merge_change(t,e,n),mergeButton:h?this.merge_lhs_button.cloneNode(!0):null})),u&&(d||f)&&"c"===a.op&&s.addInlineDiff(a,l,{ignoreaccents:this.settings.ignoreaccents,ignorews:this.settings.ignorews,ignorecase:this.settings.ignorecase,getText:(t,i)=>"lhs"===t?e.getLine(i)||"":n.getLine(i)||""})}e.operation((()=>{s.update("lhs",e,r)})),n.operation((()=>{s.update("rhs",n,o)})),this.settings._debug&&a("draw#_markupLineChanges")},i.prototype._merge_change=function(t,e,n){if(t){var{lhs:i,rhs:o}=this.editor,s={lhs:i,rhs:o},l=t[`${e}-line-from`],a=t[`${e}-line-to`],h=t[`${n}-line-from`],c=t[`${n}-line-to`];e=s[e].getDoc(),s=s[n].getDoc();var u=0<=l?e.getLine(l).length+1:0,d=0<=a?e.getLine(a).length+1:0,f=0<=c?s.getLine(c).length+1:0,p=0<=h?s.getLine(h).length+1:0;"c"===t.op?(t=e.getRange(r.Pos(l,0),r.Pos(a,d)),s.replaceRange(t,r.Pos(h,0),r.Pos(c,f))):"lhs"===n&&"d"===t.op||"rhs"===n&&"a"===t.op?(0<l?(t=e.getRange(r.Pos(l,u),r.Pos(a,d)),h+=1):t=e.getRange(r.Pos(0,0),r.Pos(a+1,0)),s.replaceRange(t,r.Pos(h-1,0),r.Pos(c+1,0))):("rhs"===n&&"d"===t.op||"lhs"===n&&"a"===t.op)&&(0<l?(u=e.getLine(l-1).length+1,t=e.getRange(r.Pos(l-1,u),r.Pos(a,d))):t=e.getRange(r.Pos(0,0),r.Pos(a+1,0)),0>h&&(h=0),s.replaceRange(t,r.Pos(h,p)))}},i.prototype._draw_info=function(){const t=this.editor.lhs.getScrollerElement(),e=this.editor.rhs.getScrollerElement(),n=t.offsetHeight,i=document.getElementById(`${this.id}-lhs-rhs-canvas`);if(null==i)throw Error(`Failed to find: ${this.id}-lhs-rhs-canvas`);const r=document.getElementById(`${this.id}-lhs-margin`),o=document.getElementById(`${this.id}-rhs-margin`);return{visible_page_height:n,lhs_scroller:t,rhs_scroller:e,lhs_lines:this.editor.lhs.lineCount(),rhs_lines:this.editor.rhs.lineCount(),dcanvas:i,lhs_margin:r,rhs_margin:o,lhs_xyoffset:{top:r.offsetParent.offsetTop,left:r.offsetParent.offsetLeft},rhs_xyoffset:{top:o.offsetParent.offsetTop,left:o.offsetParent.offsetLeft}}},i.prototype._renderDiff=function(t){this.settings._debug&&l("draw#_renderDiff");const e=this._draw_info(),n=e.lhs_margin,i=e.rhs_margin,r=e.dcanvas.getContext("2d"),o=n.getContext("2d"),s=i.getContext("2d");this.trace("draw#_renderDiff","visible page height",e.visible_page_height),this.trace("draw#_renderDiff","scroller-top lhs",e.lhs_scroller.scrollTop),this.trace("draw#_renderDiff","scroller-top rhs",e.rhs_scroller.scrollTop),e.lhs_margin.removeEventListener("click",this._handleLhsMarginClick),e.rhs_margin.removeEventListener("click",this._handleRhsMarginClick);const h=this._getViewportSide("lhs"),c=this._getViewportSide("rhs"),u=e.lhs_scroller.scrollTop,d=e.rhs_scroller.scrollTop,f=e.lhs_margin.offsetHeight/e.lhs_scroller.scrollHeight,p=e.rhs_margin.offsetHeight/e.rhs_scroller.scrollHeight;for(let e=0;e<t.length;++e){var g=t[e],m=g["lhs-y-start"]-u,v=g["lhs-y-end"]-u,y=g["rhs-y-start"]-d;const n=g["rhs-y-end"]-d;if(Number.isNaN(m)){this.trace("draw#_renderDiff unexpected NaN",g["lhs-y-start"],g["lhs-y-end"]);continue}this.trace("draw#_renderDiff","draw1","marker",m,v,y,n);var b=g["lhs-y-start"]*f,w=Math.max(g["lhs-y-end"]*f,5);if(o.beginPath(),o.fillStyle="#a3a3a3",o.strokeStyle="#000",o.lineWidth=.5,o.fillRect(1.5,b,4.5,Math.max(w-b,5)),o.strokeRect(1.5,b,4.5,Math.max(w-b,5)),o.stroke(),b=g["rhs-y-start"]*f,w=Math.max(g["rhs-y-end"]*f,5),s.beginPath(),s.fillStyle="#a3a3a3",s.strokeStyle="#000",s.lineWidth=.5,s.fillRect(1.5,b,4.5,Math.max(w-b,5)),s.strokeRect(1.5,b,4.5,Math.max(w-b,5)),s.stroke(),!this._isChangeInView("lhs",h,g)&&!this._isChangeInView("rhs",c,g))continue;g=this._current_diff===e?this.settings._colors.current.border:this.settings._colors[g.op].border,r.beginPath(),r.strokeStyle=g,r.lineWidth=1,g=this.draw_lhs_width,b=v-m-1,w=this.draw_lhs_min;let i=m;r.moveTo(w,i),0>=b?r.lineTo(w+g,i):(r.arcTo(w+g,i,w+g,i+3,3),r.arcTo(w+g,i+b,w+g-3,i+b,3)),r.lineTo(w,i+b),r.stroke(),g=this.draw_rhs_width,b=n-y-1,w=this.draw_rhs_max,i=y,r.moveTo(w,i),0>=b?r.lineTo(w-g,i):(r.arcTo(w-g,i,w-g,i+3,3),r.arcTo(w-g,i+b,w-3,i+b,3)),r.lineTo(w,i+b),r.stroke(),g=this.draw_lhs_min+this.draw_lhs_width,m+=(v+1-m)/2,v=this.draw_rhs_max-this.draw_rhs_width,y+=(n+1-y)/2,r.moveTo(g,m),m==y?r.lineTo(v,y):r.bezierCurveTo(g+12,m-3,v-12,y-3,v,y),r.stroke()}o.fillStyle=this.settings.vpcolor,s.fillStyle=this.settings.vpcolor;const x=Math.max(e.lhs_scroller.clientHeight*f,5);t=d*p;const _=Math.max(e.rhs_scroller.clientHeight*p,5);o.fillRect(1.5,u*f,4.5,x),s.fillRect(1.5,t,4.5,_),this._handleLhsMarginClick=function(t){e.lhs_scroller.scrollTo({top:Math.max(0,(t.pageY-e.lhs_xyoffset.top-x/2)/n.height*e.lhs_scroller.scrollHeight)})},this._handleRhsMarginClick=function(t){e.rhs_scroller.scrollTo({top:Math.max(0,(t.pageY-e.rhs_xyoffset.top-_/2)/i.height*e.rhs_scroller.scrollHeight)})},e.lhs_margin.addEventListener("click",this._handleLhsMarginClick),e.rhs_margin.addEventListener("click",this._handleRhsMarginClick),this.settings._debug&&a("draw#_renderDiff")},i.prototype._queryElement=function(t){const e=`_element:${t}`;return t=this[e]||document.querySelector(t),this[e]||(this[e]=t),this[e]},i.prototype.trace=function(...t){this.settings._debug&&console.log(...t)},t.exports=i},369:t=>{function e(t,e,i={}){const{ignorews:r=!1,ignoreaccents:o=!1,ignorecase:s=!1,split:l="lines"}=i;this.codeify=new n(t,e,{ignorews:r,ignoreaccents:o,ignorecase:s,split:l}),t={codes:this.codeify.getCodes("lhs"),modified:{}},e={codes:this.codeify.getCodes("rhs"),modified:{}},this._lcs(t,0,t.codes.length,e,0,e.codes.length,[],[]),this._optimize(t),this._optimize(e),this.items=this._create_diffs(t,e)}function n(t,e,n){this._max_code=0,this._diff_codes={},this.ctxs={},this.options=n,this.options.split=this.options.split||"lines",n=/\p{Letter}\p{Mark}*|\p{Number}\p{Mark}*|\p{Punctuation}\p{Mark}*|\p{Symbol}\p{Mark}*|\p{White_Space}/gu,"string"==typeof t?"chars"===this.options.split?this.lhs=t.match(n)||[]:"words"===this.options.split?this.lhs=t.split(/\s/):"lines"===this.options.split&&(this.lhs=t.split("\n")):this.lhs=t,"string"==typeof e?"chars"===this.options.split?this.rhs=e.match(n)||[]:"words"===this.options.split?this.rhs=e.split(/\s/):"lines"===this.options.split&&(this.rhs=e.split("\n")):this.rhs=e}e.prototype.changes=function(){return this.items},e.prototype.getLines=function(t){return this.codeify.getLines(t)},e.prototype.normal_form=function(){let t="";for(let n=0;n<this.items.length;++n){const i=this.items[n];var e="c";0===i.lhs_deleted_count&&0<i.rhs_inserted_count?e="a":0<i.lhs_deleted_count&&0===i.rhs_inserted_count&&(e="d"),t+=(1===i.lhs_deleted_count?i.lhs_start+1:0===i.lhs_deleted_count?i.lhs_start:i.lhs_start+1+","+(i.lhs_start+i.lhs_deleted_count))+e+(1===i.rhs_inserted_count?i.rhs_start+1:0===i.rhs_inserted_count?i.rhs_start:i.rhs_start+1+","+(i.rhs_start+i.rhs_inserted_count))+"\n",e=this.getLines("lhs");const r=this.getLines("rhs");if(r&&e){let n;for(n=i.lhs_start;n<i.lhs_start+i.lhs_deleted_count;++n)t+="< "+e[n]+"\n";for(i.rhs_inserted_count&&i.lhs_deleted_count&&(t+="---\n"),n=i.rhs_start;n<i.rhs_start+i.rhs_inserted_count;++n)t+="> "+r[n]+"\n"}}return t},e.prototype._lcs=function(t,e,n,i,r,o,s,l){for(;e<n&&r<o&&t.codes[e]===i.codes[r];)++e,++r;for(;e<n&&r<o&&t.codes[n-1]===i.codes[o-1];)--n,--o;if(e===n)for(;r<o;)i.modified[r++]=!0;else if(r===o)for(;e<n;)t.modified[e++]=!0;else{const a=this._sms(t,e,n,i,r,o,s,l);this._lcs(t,e,a.x,i,r,a.y,s,l),this._lcs(t,a.x,n,i,a.y,o,s,l)}},e.prototype._sms=function(t,e,n,i,r,o,s,l){const a=Date.now()+1e3;var h=t.codes.length+i.codes.length+1;const c=e-r,u=n-o,d=!!(n-e-(o-r)&1),f=h-c;h-=u;const p=(n-e+o-r)/2+1;l[f+c+1]=e,s[h+u-1]=n;const g={x:0,y:0};let m,v;for(let b=0;b<=p;++b){if(Date.now()>a)return{x:e,y:o};for(var y=c-b;y<=c+b;y+=2){for(y===c-b?m=l[f+y+1]:(m=l[f+y-1]+1,y<c+b&&l[f+y+1]>=m&&(m=l[f+y+1])),v=m-y;m<n&&v<o&&t.codes[m]===i.codes[v];)m++,v++;if(l[f+y]=m,d&&u-b<y&&y<u+b&&s[h+y]<=l[f+y])return g.x=l[f+y],g.y=l[f+y]-y,g}for(y=u-b;y<=u+b;y+=2){for(y===u+b?m=s[h+y-1]:(m=s[h+y+1]-1,y>u-b&&s[h+y-1]<m&&(m=s[h+y-1])),v=m-y;m>e&&v>r&&t.codes[m-1]===i.codes[v-1];)m--,v--;if(s[h+y]=m,!d&&c-b<=y&&y<=c+b&&s[h+y]<=l[f+y])return g.x=l[f+y],g.y=l[f+y]-y,g}}throw"the algorithm should never come here."},e.prototype._optimize=function(t){let e,n=0;for(;n<t.codes.length;){for(;n<t.codes.length&&(void 0===t.modified[n]||!1===t.modified[n]);)n++;for(e=n;e<t.codes.length&&!0===t.modified[e];)e++;e<t.codes.length&&t.codes[n]===t.codes[e]?(t.modified[n]=!1,t.modified[e]=!0):n=e}},e.prototype._create_diffs=function(t,e){const n=[];let i,r,o=0,s=0;for(;o<t.codes.length||s<e.codes.length;)if(o<t.codes.length&&!t.modified[o]&&s<e.codes.length&&!e.modified[s])o++,s++;else{for(i=o,r=s;o<t.codes.length&&(s>=e.codes.length||t.modified[o]);)o++;for(;s<e.codes.length&&(o>=t.codes.length||e.modified[s]);)s++;(i<o||r<s)&&n.push({lhs_start:i,rhs_start:r,lhs_deleted_count:o-i,rhs_inserted_count:s-r})}return n},n.prototype.getCodes=function(t){if(!this.ctxs.hasOwnProperty(t)){var e=this._diff_ctx(this[t]);this.ctxs[t]=e,e.codes.length=Object.keys(e.codes).length}return this.ctxs[t].codes},n.prototype.getLines=function(t){return this.ctxs[t].lines},n.prototype._diff_ctx=function(t){var e={i:0,codes:{},lines:t};return this._codeify(t,e),e},n.prototype._codeify=function(t,e){for(let n=0;n<t.length;++n){let i=t[n];this.options.ignorews&&(i=i.replace(/\s+/g,"")),this.options.ignorecase&&(i=i.toLowerCase()),this.options.ignoreaccents&&(i=i.normalize("NFD").replace(/[\u0300-\u036f]/g,""));const r=this._diff_codes[i];void 0!==r?e.codes[n]=r:(++this._max_code,this._diff_codes[i]=this._max_code,e.codes[n]=this._max_code)}},t.exports=e},636:t=>{function e(t){var e=document.createElement("template");return t=t.trim(),e.innerHTML=t,e.content.firstChild}t.exports={htmlToElement:e,getColors:function(t){var n=`\n<div style="display:none" class="${["mergely-editor",...t.classList].join(" ")}">\n\t<div class="mergely current start"></div>\n\t<div class="mergely start end rhs a CodeMirror-linebackground"></div>\n\t<div class="mergely start end lhs d CodeMirror-linebackground"></div>\n\t<div class="mergely start end lhs c CodeMirror-linebackground"></div>\n\t<div class="mergely ch rhs a"></div>\n\t<div class="mergely ch rhs ina"></div>\n\t<div class="mergely ch lhs d"></div>\n\t<div class="mergely ch lhs ind"></div>\n</div>\n`;n=e(n),t.appendChild(n),t=window.getComputedStyle(n.children[0]);const i=window.getComputedStyle(n.children[1]),r=window.getComputedStyle(n.children[2]),o=window.getComputedStyle(n.children[3]),s=window.getComputedStyle(n.children[4]),l=window.getComputedStyle(n.children[5]),a=window.getComputedStyle(n.children[6]),h=window.getComputedStyle(n.children[7]);return t={current:{border:t.borderTopColor},a:{border:i.borderTopColor,bg:i.backgroundColor,fg:i.color,ch:s.color,in:l.color},d:{border:r.borderTopColor,bg:r.backgroundColor,fg:r.color,ch:a.color,in:h.color},c:{border:o.borderTopColor,bg:o.backgroundColor,fg:o.color}},n.remove(),t},getMergelyContainer:function({clazz:t=""}){return e(`<div class="${["mergely-editor",t].join(" ")}" style="display:flex;height:100%;position:relative;overflow:hidden;"></div>`)},getMarginTemplate:function({id:t}){return e(`<div class="mergely-margin">\n\t<canvas id="${t}-margin" width="8px"></canvas>\n</div>`)},getEditorTemplate:function({id:t}){return e(`<textarea id="${t}" class="mergely-column"></textarea>`)},getCenterCanvasTemplate:function({id:t}){return e(`<div class="mergely-canvas">\n\t<canvas id="${t}-lhs-rhs-canvas" width="28px"></canvas>\n</div>`)}}},675:(t,e,n)=>{const i=n(819),{default:r}=n(143),o=n(369),s=n(636),l=console.log,a={autoupdate:!0,rhs_margin:"right",wrap_lines:!1,line_numbers:!0,lcs:!0,sidebar:!0,viewport:!1,ignorews:!1,ignorecase:!1,ignoreaccents:!1,resize_timeout:500,change_timeout:50,bgcolor:"#eee",vpcolor:"rgba(0, 0, 200, 0.5)",license:"lgpl",cmsettings:{styleSelectedText:!0,mode:null},lhs_cmsettings:{},rhs_cmsettings:{},lhs:null,rhs:null,_debug:!1};class h{constructor(t,e){let n=t;if("string"==typeof t){if(n=document.querySelector(t),!n)throw Error(`Failed to find: ${t}`)}else if("object"!=typeof t)throw Error("The 'selector' element must be a string or DOM element");const o=window.getComputedStyle(n);if(!(n.style.height||o.height&&"0px"!==o.height))throw Error(`The element "${t}" requires an explicit height`);this.el=n,this._initOptions={...e},this._setOptions(e);const s=new i(n,this._viewOptions);this._diffView=s,t="cm get lhs mergeCurrentChange resize rhs scrollTo scrollToDiff search unmarkup update".split(" ");for(const e of t)this[e]=s[e].bind(s);this._listeners=[],this._addEventListener=n.addEventListener.bind(n),this._removeEventListener=n.removeEventListener.bind(n),this.on("changed",(()=>{const t=this._options;t._debug&&l("event#changed got event"),this._stopWorker();const e=new r;this._diffWorker=e,e.onerror=t=>{console.error("Unexpected error with web worker",t)},e.onmessage=e=>{t._debug&&l("event#changed worker finished"),this._changes=e.data,s.setChanges(this._changes)},e.postMessage({lhs:this.get("lhs"),rhs:this.get("rhs"),options:{ignoreaccents:t.ignoreaccents,ignorews:t.ignorews,ignorecase:t.ignorecase}})})),s.bind(this.el)}_setOptions(t){this._options&&this._options._debug&&l("api#options");const e=s.getColors(this.el);this._options={...a,...this._options||this._initOptions,...t},this._viewOptions={...this._options,_colors:e}}_stopWorker(){this._diffWorker&&(this._options._debug&&l("event#changed terminating worker"),this._diffWorker.terminate(),this._diffWorker=null)}unbind(){this._stopWorker();for(const[t,e]of this._listeners)this._removeEventListener(t,e);this._diffWorker&&this._diffWorker.terminate(),this._diffView.unbind(),delete this._diffView}mergelyUnregister(){}on(t,e){this._listeners.push([t,e]),this._addEventListener(t,e)}once(t,e){this._listeners.push([t,e]),this._addEventListener(t,e,{once:!0})}clear(t){this._options._debug&&l("api#clear",t),"lhs"===t?this._diffView.readOnly("lhs")||this._diffView.lhs(""):"rhs"===t&&(this._diffView.readOnly("rhs")||this._diffView.rhs(""))}diff(){this._options._debug&&l("api#diff");const t=this.get("lhs"),e=this.get("rhs");return new o(t,e,{ignoreaccents:this._options.ignoreaccents,ignorews:this._options.ignorews,ignorecase:this._options.ignorecase}).normal_form()}merge(t){this._options._debug&&l("api#merge",t);const e=this.get("lhs"),n=this.get("rhs");"lhs"!==t||this._diffView.readOnly("lhs")?this._diffView.readOnly("rhs")||this._diffView.rhs(e):this._diffView.lhs(n)}options(t){if(!t)return this._options;this._setOptions(t),this._diffView.setOptions(t)}summary(){this._options._debug&&l("api#summary");const t=this.get("lhs"),e=this.get("rhs");return{numChanges:this._changes.length,lhsLength:t.length,rhsLength:e.length,c:this._changes.filter((function(t){return"c"===t.op})).length,a:this._changes.filter((function(t){return"a"===t.op})).length,d:this._changes.filter((function(t){return"d"===t.op})).length}}swap(){if(this._options._debug&&l("api#swap"),this._diffView.readOnly())l("api#swap readOnly");else{var t=this.get("lhs"),e=this.get("rhs");this._diffView.lhs(e),this._diffView.rhs(t)}}}window.Mergely=h,t.exports=h},622:(t,e,n)=>{function i(t,e){const n="lhs"===t?"rhs":"lhs";return{lf:e[`${t}-line-from`],lt:e[`${t}-line-to`],olf:e[`${n}-line-from`],olt:e[`${n}-line-to`]}}const r=n(369),o=console.log,s=new RegExp(/\p{Letter}\p{Mark}*|\p{Number}\p{Mark}*|\p{Punctuation}\p{Mark}*|\p{Symbol}\p{Mark}*|\p{White_Space}/gu);class l{constructor(t){this.id=t,this.background=new Set,this.gutter=new Set,this.editor=this.marker=null,this.markup=[],this._clearMarkup=[],this.rendered=!1}addLineClass(t,e){this[t].add(e)}addMergeButton(t,e,n){this.marker=[t,e,n]}markText(t,e,n){this.markup.push([t,e,n])}update(t){this.rendered?console.log("already rendered",this.id):(this.editor=t,t.operation((()=>{if(this.background.size){var e=Array.from(this.background).join(" ");t.addLineClass(this.id,"background",e)}if(this.gutter.size&&(e=Array.from(this.gutter).join(" "),t.addLineClass(this.id,"gutter",e)),this.marker){const[e,n,i]=this.marker;n.addEventListener("click",i),t.setGutterMarker(this.id,e,n)}if(this.markup.length){e=t.getValue();var n,i={};let r=0;for(s.lastIndex=0;null!==(n=s.exec(e));)i[r++]=n.index;e=i;for(const r of this.markup){const[o,s,l]=r;n={line:this.id},i={line:this.id},0<=o&&(n.ch=e[o]),0<=s&&(i.ch=e[s]),this._clearMarkup.push(t.markText(n,i,{className:l}))}}})),this.rendered=!0)}clear(){const{editor:t}=this;this.rendered&&t.operation((()=>{if(this.background&&t.removeLineClass(this.id,"background"),this.gutter&&t.removeLineClass(this.id,"gutter"),this.marker){const[e,n,i]=this.marker;t.setGutterMarker(this.id,e,null),n.removeEventListener("click",i),n.remove()}if(this._clearMarkup.length){for(const t of this._clearMarkup)t.clear();this._clearMarkup=[],this.markup=[]}}))}}t.exports=class{constructor(t){this.options=t,this._lines={lhs:{},rhs:{}},this._rendered={lhs:{},rhs:{}}}addRender(t,e,n,r){this.options._debug&&o("vdoc#addRender",t,n,e);const{isCurrent:s,lineDiff:l,mergeButton:a,getMergeHandler:h}=r;if(this._rendered[t][n])this.options._debug&&o("vdoc#addRender (already rendered)",t,n,e);else{r="lhs"===t?"rhs":"lhs";var c=["mergely",t,`cid-${n}`],{lf:u,lt:d,olf:f}=i(t,e);if(s){u!==d&&this._getLine(t,u).addLineClass("background","current"),this._getLine(t,d).addLineClass("background","current");for(var p=u;p<=d;++p)this._getLine(t,p).addLineClass("gutter","mergely current")}if(p={lhs:{d:"d",a:"d",c:"c"},rhs:{d:"a",a:"a",c:"c"}}[t][e.op],0>u)c.push("start"),c.push("no-end"),c.push(p),this._getLine(t,0).addLineClass("background",c.join(" "));else if("lhs"===t&&e["lhs-y-start"]===e["lhs-y-end"])c.push("no-start"),c.push("end"),c.push(p),this._getLine(t,u).addLineClass("background",c.join(" "));else if("rhs"===t&&e["rhs-y-start"]===e["rhs-y-end"])c.push("no-start"),c.push("end"),c.push(p),this._getLine(t,u).addLineClass("background",c.join(" "));else{this._getLine(t,u).addLineClass("background","start"),this._getLine(t,d).addLineClass("background","end");for(let i=u,r=f;-1!==u&&-1!==d&&i<=d;++i,++r)this._getLine(t,i).addLineClass("background",p),this._getLine(t,i).addLineClass("background",c.join(" ")),l&&("lhs"===t&&"d"===e.op?this._getLine(t,i).markText(0,void 0,`mergely ch d lhs cid-${n}`):"rhs"===t&&"a"===e.op&&this._getLine(t,i).markText(0,void 0,`mergely ch a rhs cid-${n}`));a&&(a.className=`merge-button merge-${r}-button`,e=h(e,t,r),this._getLine(t,u).addMergeButton("merge",a,e))}this._setRenderedChange(t,n)}}addInlineDiff(t,e,{getText:n,ignorews:s,ignoreaccents:l,ignorecase:a}){this.options._debug&&o("vdoc#addInlineDiff",e,t);const{lf:h,lt:c,olf:u,olt:d}=i("lhs",t);for(let i=h,o=u;0<=i&&i<=c||0<=o&&o<=d;++i,++o)if(i<=c&&o<=d){t=n("lhs",i);var f=n("rhs",o);if(!this._getLine("lhs",i).markup.length&&!this._getLine("rhs",o).markup.length){t=new r(t,f,{ignoreaccents:l,ignorews:s,ignorecase:a,split:"chars"});for(const n of t.changes()){const{lhs_start:r,lhs_deleted_count:s,rhs_start:l,rhs_inserted_count:a}=n;t=r+s,f=l+a,this._getLine("lhs",i).markText(r,t,`mergely ch ind lhs cid-${e}`),this._getLine("rhs",o).markText(l,f,`mergely ch ina rhs cid-${e}`)}}}else o>d?this._getLine("lhs",i).markText(0,void 0,`mergely ch ind lhs cid-${e}`):i>c&&this._getLine("rhs",o).markText(0,void 0,`mergely ch ina rhs cid-${e}`)}_setRenderedChange(t,e){return this.options._debug&&o("vdoc#_setRenderedChange",t,e),this._rendered[t][e]=!0}_getLine(t,e){let n=this._lines[t][e];return n||(n=new l(e),this._lines[t][e]=n)}update(t,e,n){this.options._debug&&o("vdoc#update",t,e,n);const i=Object.keys(this._lines[t]);for(let o=0;o<i.length;++o){var r=i[o];r<n.from||r>n.to||((r=this._getLine(t,r)).rendered||r.update(e))}}clear(){this.options._debug&&o("vdoc#clear");for(const t in this._lines.lhs)this._lines.lhs[t].clear();for(const t in this._lines.rhs)this._lines.rhs[t].clear()}}}},n={};return t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},t.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},t.nc=void 0,t(675)})()));