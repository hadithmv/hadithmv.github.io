<!doctype html>
<html translate="no">
  <head>
    <!-- CHANGE !!! -->
    <link
      rel="canonical"
      href="https://hadithmv.github.io/page/diffCompare.html"
    />
    <title>Hadithmv - Diff Compare</title>
    <meta
      name="description"
      content="The Maldivian Platform for Translations of the Sunnah | ŞŞªŞ‚Ş°Ş‚Ş¦ŞŒŞªŞŞ¬ ŞŒŞ¦ŞƒŞªŞ–Ş¦Ş‰Ş§ Ş‰Ş¦Ş‚Ş°ŞŞ¦"
    />
    <meta
      name="keywords"
      content="hadithmv,hadith mv, hadeeth mv,dhivehi,hadith,Ş™Ş¦Ş‹Ş©Ş˜Ş°Ş‡Ş¬Ş‰Ş°ŞˆŞ©,Ş™Ş¦Ş‹Ş©Ş˜Ş° Ş‡Ş¬Ş‰Ş°ŞˆŞ©"
    />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta itemprop="name" content="Hadithmv" />
    <meta itemprop="description" content="Ş™Ş¦Ş‹Ş©Ş˜Ş°Ş‡Ş¬Ş‰Ş°ŞˆŞ©" />
    <meta
      itemprop="image"
      content="https://hadithmv.github.io/img/logo/NewLogo7/hadithmv-logo-7.0-whiteBack-512px.png"
    />
    <meta property="og:title" content="Hadithmv" />
    <meta property="og:type" content="website" />
    <meta
      property="og:image"
      content="https://hadithmv.github.io/img/logo/NewLogo7/hadithmv-logo-7.0-whiteBack-512px.png"
    />
    <link rel="icon" href="../img/logo/logo.svg" type="image/svg+xml" />
    <meta name="theme-color" content="#29434e" />
    <link href="../css/ALL-COMB.min.css" rel="stylesheet" type="text/css" />
    <!-- CHANGE !!! -->
    <script src="../js/navbar.min.js"></script>
  </head>

  <body>
    <div id="navbar-container"></div>
    <!-- -->
    <!--<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/mergely/5.3.2/mergely.css"
/>-->
    <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/mergely/5.3.2/mergely.js"></script>-->

    <!-- remove:
 .mergely-splash
 .mergely-splash p
 .mergely-icon
 .mergely-splash span.mergely-icon

 minify w csso-->
    <link rel="stylesheet" href="mergely.css" />

    <script src="mergely.js"></script>
    <!-- remove:
 if (NOTICES.indexOf(this.settings.license) < 0) {
		container.addEventListener('updated', () => {
			const noticeTypes = {
				'lgpl': 'GNU LGPL v3.0',
				'gpl': 'GNU GPL v3.0',
				'mpl': 'MPL 1.1'
			};
			let notice = noticeTypes[this.settings.license];
			if (!notice) {
				notice = noticeTypes.lgpl;
			}
			const editor = this._queryElement(`#${this.id}`);
			const splash = dom.getSplash({
				notice,
				left: (editor.offsetWidth - 300) / 2,
				top: (editor.offsetHeight - 58) / 3
			});
			editor.addEventListener('click', () => {
				splash.style.visibility = 'hidden';
				splash.style.opacity = '0';
				splash.style.transition = `visibility 0s 100ms, opacity 100ms linear`;
				setTimeout(() => splash.remove(), 110);
			}, { once: true });
			el.append(splash);
		}, { once: true });
	}



    
    function getSplash({ notice, left, top }) {
          return htmlToElement(`\
<div class="mergely-splash" style="left: ${left}px; top: ${top}px">
	<p>
		<span class="mergely-icon"></span>
		This software is a Combined Work using Mergely and is covered by the
		${notice} license. For the full license, see
		<a target="_blank" href="http://www.mergely.com">http://www.mergely.com/license</a>.
	</p>
</div>`);
        }





        
          getSplash,
-->

    <style>
      .buttons-container {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-top: 10px;
        /* */
        /*direction: rtl;*/
        margin-right: 20px;
        margin-left: 20px;
        margin-bottom: 8px;
      }

      .function-button {
        padding: 5px 10px;
        cursor: pointer;
        /* */
        min-width: 15px;
        /* */
        font-size: 18px;
      }

      /* only for MOBILE size */
      @media (max-width: 599px) {
        .buttons-container {
          gap: 5px;
          margin-right: 5px;
          margin-left: 5px;
          margin-bottom: 5px;
        }

        .function-button {
          font-size: 14px;
        }
      }

      /* MERGELY STUFF */

      /* removes strikethrough on lefthand side */
      .mergely-editor .mergely.ch.ind.lhs {
        text-decoration: none;
      }
    </style>
    <div class="buttons-container">
      <button
        id="clearContents"
        class="function-button"
        title="Clear the contents"
      >
        Clear âŒ
      </button>

      <button
        id="nextDiff"
        class="function-button"
        title="Jump to the next changed block of text"
      >
        Nxt Diff â–¼
      </button>
      <button
        id="prevDiff"
        class="function-button"
        title="Jump to the previous changed block of text"
      >
        â–² Prv Diff
      </button>

      <button
        id="mergeLeftToRight"
        class="function-button"
        title="Merges the current changed block from left side to right side. Note that you have to have clicked a button to jump to a change first"
      >
        Merge Chng L2R â–º
      </button>
      <button
        id="mergeRightToLeft"
        class="function-button"
        title="Merges the current changed block from right side to left side. Note that you have to have clicked a button to jump to a change first"
      >
        â—„ Merge Chng R2L
      </button>

      <button
        id="copyLHS"
        class="function-button"
        title="Copies the contents of the left-hand side"
      >
        ğŸ“‹ Copy L Side â—„
      </button>
      <button
        id="copyRHS"
        class="function-button"
        title="Copies the contents of the right-hand side"
      >
        â–º Copy R Side ğŸ“‹
      </button>

      <button
        id="toggleRTLtoLTR"
        class="function-button"
        title="Toggles wordwrap on and off"
      >
        LTR â†”ï¸ RTL
      </button>
      <button
        id="toggleWordWrap"
        class="function-button"
        title="Toggles wordwrap on and off"
      >
        Wordwrap â†²
      </button>
      <button
        id="swapSides"
        class="function-button"
        title="Swaps the right hand side contents with the left hand side contents"
      >
        Swap Sides ğŸ”„
      </button>
      <button
        id="diffSummary"
        class="function-button"
        title="Shows a statistical summary of the differences"
      >
        Diff Summary ğŸ“Š
      </button>
      <div
        id="summaryPopup"
        style="display: none; padding-left: 10px; padding-right: 10px"
      >
        Added lines: <span id="addedLines"></span> | Changed lines:
        <span id="changedLines"></span> | Deleted lines:
        <span id="deletedLines"></span> | Left side length:
        <span id="lhsLength"></span> | Right side length:
        <span id="rhsLength"></span> | Total # of changes:
        <span id="totalChanges"></span>
      </div>

      <button
        id="helpExplain"
        class="function-button"
        title="Explains what this page does"
      >
        â“
      </button>
      <div
        id="helpPopup"
        style="display: none; padding-left: 10px; padding-right: 10px"
      >
        View differences between two texts, side by side. You can also merge the
        changes you want, to where you want them. Differences in the text are
        colored so you can clearly see what has changed. Left side should be
        used for original/old text, and right side should be used for
        new/updated text. Red text shows what was removed, blue text shows what
        was added. There are various buttons provided on thss page, which do
        different functions. In the middle of the two texts is a gap where lines
        show which blocks of texts have changed even if they are in different
        places. There are purple margins to the sides of each text, where if the
        text is long enough, these margins can be used to jump to the relevant
        place in the text.
      </div>

      <!--
      ADD FONT RESIZER - LATER !!! -->
    </div>

    <style>
      #compare {
        height: 88vh;
        /* inherit */
      }

      .CodeMirror {
        /* Set height, width, borders, and global font properties here */
        font-family: inherit;
        /* monospace */
      }

      .CodeMirror pre.CodeMirror-line {
        line-height: 1.5;
      }
    </style>

    <div id="compare"></div>
    <script>
      /*const doc = new Mergely("#compare");
        doc.once("updated", () => {
          doc.lhs("the quick red fox\njumped over the hairy dog");
          doc.rhs("the quick brown fox\njumped over the lazy dog");*
          // Scroll to first change on next update
          doc.once("updated", () => {
            doc.scrollToDiff("next");
          });
        });*/

      // https://www.mergely.com/doc

      const doc = new Mergely("#compare", {
        lhs: "Ø¹ÙÙ†Ù’ Ø¹ÙØ¨Ù’Ø¯Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù Ø¨Ù’Ù†Ù Ø¹ÙÙ…ÙØ±Ù Ø±ÙØ¶ÙÙŠÙ Ø§Ù„Ù„Ù‘ÙÙ‡Ù Ø¹ÙÙ†Ù’Ù‡ÙØŒ\nÙ‚ÙØ§Ù„Ù Ø±ÙØ³ÙÙˆÙ„Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù ï·º:\n\nŞ¢Ş¦Ş„Ş°Ş‹Şª ï·² Ş„Ş¨Ş‚Ş° Ş¢ŞªŞ‰Ş¦ŞƒŞª Ø±ÙØ¶ÙÙŠÙ Ø§Ù„Ù„Ù‘ÙÙ‡Ù Ø¹ÙÙ†Ù’Ù‡Ù ŞŞ¬ Ş‡Ş¦ŞƒŞ¨Ş€ŞªŞ‚Ş° ŞƒŞ¨ŞˆŞ§ŞˆŞ¬ŞŞ¬Ş‚Ş°ŞˆŞ¬Ş‡Ş¬ŞˆŞ¬.\nŞƒŞ¦ŞŞ«ŞŞª ï·² ï·º Ş™Ş¦Ş‹Ş©Ş˜Ş°Ş†ŞªŞƒŞ¬Ş‡Ş°ŞˆŞ¨Ş‡Ş¬ŞˆŞ¬:",
        rhs: "Ø¹ÙÙ†Ù’ Ø§Ø¨Ù’Ù†Ù Ø¹ÙÙ…ÙØ±Ù Ø±ÙØ¶ÙÙŠÙ Ø§Ù„Ù„Ù‘ÙÙ‡Ù Ø¹ÙÙ†Ù’Ù‡ÙÙ…ÙØ§ Ù‚ÙØ§Ù„ÙØŒ\nØ³ÙÙ…ÙØ¹Ù’ØªÙ Ø§Ù„Ù†Ù‘ÙØ¨ÙÙŠÙ‘Ù ï·º ÙŠÙÙ‚ÙÙˆÙ„Ù:\n\nŞ‡Ş¨Ş„Ş°Ş‚Şª Ş¢ŞªŞ‰Ş¦ŞƒŞª Ø±ÙØ¶ÙÙŠÙ Ø§Ù„Ù„Ù‘ÙÙ‡Ù Ø¹ÙÙ†Ù’Ù‡ÙÙ…ÙØ§ ŞˆŞ¨Ş‹Ş§Ş…ŞªŞˆŞ¨Ş†Ş¦Ş‰Ş¦ŞŞ° ŞƒŞ¨ŞˆŞ§ŞˆŞ¬ŞŞ¬Ş‚Ş°ŞˆŞ¬Ş‡Ş¬ŞˆŞ¬.\nŞ‚Ş¦Ş„Ş¨Ş‡Ş°Ş”Ş§ ï·º Ş™Ş¦Ş‹Ş©Ş˜Ş°Ş†ŞªŞƒŞ¦Ş‡Ş°ŞˆŞ¦Ş‚Ş¨Ş†Ş®ŞŞ° ŞŒŞ¨Ş‰Ş¦Ş‚Ş° Ş‡Ş¦Ş‘ŞªŞ‡Ş¬Ş€Ş©Ş‰Ş¬ŞˆŞ¬:",

        wrap_lines: true,

        cmsettings: {
          // https://codemirror.net/docs/ref/#view.Direction
          // Flips overall layout and selects base paragraph direction
          /* tried changed this from rtl to ltr, using css instead to do its job, so i can use a toggle button, but other problems came up */
          direction: "rtl",

          // https://codemirror.net/5/doc/manual.html
          // Determines whether horizontal cursor movement through right-to-left
          rtlMoveVisually: true,

          //readOnly: true,
          /* lets select go over change highlights https://github.com/wickedest/Mergely/issues/104 */
          //styleSelectedText: true,
          //autofocus: false,
        },

        //
      });
    </script>

    <!-- custom functions -->
    <script>
      //
      document.getElementById("clearContents").addEventListener("click", () => {
        doc.clear("lhs");
        doc.clear("rhs");
      });
      //

      document.getElementById("nextDiff").addEventListener("click", () => {
        doc.scrollToDiff("next");
      });
      //

      document.getElementById("prevDiff").addEventListener("click", () => {
        doc.scrollToDiff("prev");
      });
      //

      document
        .getElementById("mergeLeftToRight")
        .addEventListener("click", () => {
          doc.mergeCurrentChange("lhs");
        });
      //

      document
        .getElementById("mergeRightToLeft")
        .addEventListener("click", () => {
          doc.mergeCurrentChange("rhs");
        });
      //

      /*
        based on this js:
        function setDirectionClass(cm) {
              (cm.doc.direction == "rtl" ? addClass : rmClass)(
                cm.display.lineDiv,
                "CodeMirror-rtl"
              );
            }
              it seems a class is used to set rtl to codemirror
              toggling that class should toggle rtl
        */
      let isRTL = true; // Initial state for text direction
      document
        .getElementById("toggleRTLtoLTR")
        .addEventListener("click", () => {
          isRTL = !isRTL; // Toggle the RTL state

          // Get all elements with class 'CodeMirror-code'
          document.querySelectorAll(".CodeMirror-code").forEach((element) => {
            if (isRTL) {
              element.classList.add("CodeMirror-rtl");
            } else {
              element.classList.remove("CodeMirror-rtl");
            }
          });
        });
      //

      let wrapLines = true; // Initial state
      document
        .getElementById("toggleWordWrap")
        .addEventListener("click", () => {
          wrapLines = !wrapLines; // Toggle the state
          doc.options({ wrap_lines: wrapLines }); // Set the option
        });
      //

      document.getElementById("swapSides").addEventListener("click", () => {
        doc.swap();
      });
      //

      /* now i want another two buttons
  a button each to copy the contents of each side
  */

      // Function to copy text to clipboard
      async function copyToClipboard(text) {
        try {
          await navigator.clipboard.writeText(text);
          //console.log("Content copied to clipboard");
        } catch (err) {
          //console.error("Failed to copy: ", err);
        }
      }

      // Copy Left Side functionality
      document.getElementById("copyLHS").addEventListener("click", () => {
        const leftContent = doc.get("lhs");
        copyToClipboard(leftContent);
      });

      // Copy Right Side functionality
      document.getElementById("copyRHS").addEventListener("click", () => {
        const rightContent = doc.get("rhs");
        copyToClipboard(rightContent);
      });
      //

      /*
        this is the documentation:
  summary()
  Gets a summary of the editors. Returns an object with summarized properties:
  Name    Description
  a    The number of added lines.
  c    The number of changed lines.
  d    The number of deleted lines.
  lhsLength    The number of characters in the lhs text.
  rhsLength    The number of characters in the rhs text.
  numChanges    The total number of changed lines.
  Example
  console.log(doc.summary());
  // { a: 0, c: 1, d: 0, lhsLength: 44, rhsLength: 45, numChanges: 1 }
  when i click this button, i want a div to show right after the button, showing the summary in that div
  i prefer html code that is display none, then made to show once the button is clicked
  ...
  
  after that popup has been opened, i want the numbers to update if i change the content
  
  code would use something like 
  
   doc.on("updated", () =>
   */

      // Function to update the summary data
      function updateSummary() {
        const summary = doc.summary();

        document.getElementById("addedLines").textContent = summary.a;
        document.getElementById("changedLines").textContent = summary.c;
        document.getElementById("deletedLines").textContent = summary.d;
        document.getElementById("lhsLength").textContent = summary.lhsLength;
        document.getElementById("rhsLength").textContent = summary.rhsLength;
        document.getElementById("totalChanges").textContent =
          summary.numChanges;
      }

      // Event listener for the button click
      document.getElementById("diffSummary").addEventListener("click", () => {
        const popup = document.getElementById("summaryPopup");

        if (popup.style.display === "none") {
          updateSummary();
          popup.style.display = "block";
        } else {
          popup.style.display = "none";
        }
      });

      // Listen for updates to the doc object
      doc.on("updated", () => {
        if (document.getElementById("summaryPopup").style.display === "block") {
          updateSummary();
        }
      });
      //

      //doc.on("updated", () => console.log("updated!"));
      //doc.on("updated", () => console.log(doc.summary()));

      // Event listener for the button click
      document.getElementById("helpExplain").addEventListener("click", () => {
        const popup = document.getElementById("helpPopup");

        if (popup.style.display === "none") {
          popup.style.display = "block";
        } else {
          popup.style.display = "none";
        }
      });
      //

      //
    </script>

    <!-- -->
  </body>
</html>
