<!DOCTYPE html>
<html lang="dv" class="notranslate" translate="no">
  <head>
    <meta name="google" content="notranslate" />
    <!-- CHANGE !!! -->
    <title>ޙަދީޘްއެމްވީ ގުރްއާން ތަރުޖަމާ - ترجمة حديث أم وي</title>
    <meta
      name="description"
      content="The Dhivehi Platform for the Sunnah | ދިވެހިންގެ ސުންނަތުގެ މަންސަ"
    />
    <meta
      name="keywords"
      content="hadithmv, hadith mv, hadeeth mv, dhivehi, hadith, hadhees, dhivehi islamic books, tharujama, ފޮތް, ތަރުޖަމާ, ޤުރްއާން, ޤުރުއާން, ގުރްއާން,ގުރުއާން, އިސްލާމް, ދީނީ, ދިވެހި ,ޙަދީޘްއެމްވީ ,ޙަދީޘް އެމްވީ ,dhivehi language, dhivehi quran, dhivehi tafsir, dhivehi thafsir, dhivehi thafseer, dhivehi tafseer, ދިވެހި ތަފްސީރު، ދިވެހި ތަފުސީރު, ބަސް,"
    />
    <!-- note above is different for quran -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta itemprop="name" content="Hadithmv" />
    <meta itemprop="description" content="ޙަދީޘްއެމްވީ" />
    <meta
      itemprop="image"
      content="https://hadithmv.github.io/img/logo/NewLogo7/hadithmv-logo-7.0-whiteBack-512px.png"
    />
    <meta property="og:title" content="Hadithmv" />
    <meta property="og:type" content="website" />
    <meta
      property="og:image"
      content="https://hadithmv.github.io/img/logo/NewLogo7/hadithmv-logo-7.0-whiteBack-512px.png"
    />
    <link rel="icon" href="../img/logo/logo.svg" type="image/svg+xml" />
    <meta name="theme-color" content="#29434e" />
    <!-- external resources-->
    <style>
      html {
        visibility: hidden;
        opacity: 0;
      }
    </style>
    <link
      rel="stylesheet"
      href="../css/base-styles.css"
      media="print"
      onload="this.media='all'"
    />
    <link
      rel="stylesheet"
      href="../css/navbar.css"
      media="print"
      onload="this.media='all'"
    />
    <link
      rel="stylesheet"
      href="../css/DT-COMB.min.css"
      media="print"
      onload="this.media='all'"
    />
    <link
      rel="stylesheet"
      href="../css/DT-inline.css"
      media="print"
      onload="this.media='all'"
    />
    <script src="../js/navbar.js"></script>
    <script src="../js/DT-COMB.min.js"></script>
    <script src="../js/DT-inline.js"></script>
    <!-- END external resources-->
    <!-- added-->
    <link
      rel="stylesheet"
      href="../css/quran-navigation-list.css"
      media="print"
      onload="this.media='all'"
    />
    <script src="../js/quran-navigation-objectMaps.js"></script>
    <script src="../js/quran-navigation-list.js"></script>
    <!-- end added -->
    <style>
      /* Hide the column visibility button, needed on quran pages since they handle colvis with another different button below, and using this button here will mess up the loading */
      #tableID_wrapper .dt-buttons .buttons-colvis {
        display: none !important;
      }
    </style>
  </head>
  <body>
    <div id="navbar-container"></div>
    <div class="dtWrapper">
      <!-- Navigation container for Surah, Ayah, and Juz selection -->
      <div id="quran-navigation-widget"></div>
      <!-- Navigation container for Surah, Ayah, and Juz selection - END-->
      <table id="tableID" class="cards" width="100%"></table>
      <div class="hmvSection">
        <div class="centerAlignedText">
          <!-- TRANSLATION SELECTOR -->
          <!-- added max height zero to hide its presence -->
          <div class="translation-selector-widget" style="max-height: 0"></div>
          <!-- END OF TRANSLATION SELECTOR -->

          <!-- <button id="toggleAyahNumbers" class="customButtons">
            &nbsp; އާޔަތް ނަމްބަރު ފޮރުވާ &nbsp;
          </button>
          <button id="toggleQuranBrackets" class="customButtons">
            &nbsp; އާޔަތް ބްރެކެޓް ފޮރުވާ &nbsp;
          </button> -->
        </div>
      </div>
    </div>

    <script>
      // MAIN Q JS -  for core initialization and state management:

      // defaultAdditionalJson = currentFileName;
      // defaultAdditionalJson = "quranHadithmv";

      defaultColumns = [0]; // Default value for which columns to load as additional columns

      // Initialize the DataTable with configuration
      table = new DataTable("#tableID", {
        ...DTconfig,

        ajax: {
          url: `${baseJsonUrl}quranData_juz-surah-ayahNo-basmalah-ayahImlai.json`,
          // dataSrc: "",
          dataSrc: function (json) {
            // Store the initial data when main JSON is loaded
            originalData = json.map((row) =>
              Array.isArray(row) ? [...row] : Object.values(row)
            );
            return json;
          },
        },
        columns: getAllColumnDefinitions(),
        initComplete: function () {
          // Hide all additional columns initially
          additionalJsons.forEach((json) => {
            const columnIndices = getColumnIndices(json.name);
            columnIndices.forEach((colIndex) => {
              table.column(colIndex).visible(false);
            });
          });

          // Load default translation with specified columns
          defaultColumns.forEach((colIndex) => {
            toggleTranslation(defaultAdditionalJson, colIndex);
          });

          // Initialize navigation and update counts
          initializeNavigationBoxes();
          table.rows().every(function (rowIdx, tableLoop, rowLoop) {
            var data = this.data();
            var surah = parseInt(data[1]);
            var ayah = parseInt(data[2]);
            ayahCounts[surah] = Math.max(ayahCounts[surah] || 0, ayah);
          });

          // Set initial values
          updateAllQValues(table.row(0).data());
        },
        columnDefs: [
          {
            searchPanes: { show: true },
            targets: [0, 1, 2],
          },
          ...columnDefsconfig,
        ],
      }); // table = new DataTable("#tableID", {
      //} // function initializeTable() { END

      //
      //
      //

      // https://datatables.net/reference/api/button().add()
      /*table.button().add(0, {
        action: function (e, dt, button, config) {
          dt.ajax.reload();
        },
        text: "Reload table",
      });*/

      // !!! added button for translation dropdown

      table.button().add("1-8", {
        text: "⭐ ތަރުޖަމާތައް",
        className: "qTharujamaButton",
        action: function (e, dt, button, config) {
          const dropdown = document.getElementById("translationDropdown");
          if (dropdown) {
            dropdown.classList.toggle("active");
            // console.log(
            //   "Active class toggled:",
            //   dropdown.classList.contains("active")
            // );
            // Prevent any default actions that might interfere
            e.preventDefault();
            e.stopPropagation();
            // without these doesnt work it seems
          } else {
            console.error("Translation dropdown element not found");
          }
          // closes the collection, detach works too
          $(".dt-button-collection").hide();
        },

        // https://datatables.net/reference/feature/buttons.buttons.split
        // split: ['pdf', 'excel']
        split: [
          {
            text: "އާޔަތް ނަމްބަރު ދ/ފ",
            action: function () {
              toggleAyahNumbers();
            },
          },
          {
            text: "އާޔަތް ބްރެކެޓް ދ/ފ",
            action: function () {
              toggleQuranBrackets();
            },
          },
        ],
        //
      });

      //
      //
      //

      // Initialize the translation selector after the table is set up
      initializeTranslationSelector(); // Call the function to set up the translation selector UI

      // Add event handlers for table navigation
      table.on("page.dt", function () {
        // Update values based on first visible row on new page
        const firstVisibleRow = table.row({ page: "current" }).data();
        if (firstVisibleRow) {
          updateAllQValues(firstVisibleRow);
        }
      });

      // Handle clicks on table rows
      $("#tableID tbody").on("click", "tr", function () {
        const rowData = table.row(this).data();
        if (rowData) {
          updateAllQValues(rowData);
        }
      });

      // Update navigation when using next/previous buttons
      $(".dataTables_paginate").on("click", "a", function () {
        setTimeout(() => {
          const firstVisibleRow = table.row({ page: "current" }).data();
          if (firstVisibleRow) {
            updateAllQValues(firstVisibleRow);
          }
        }, 100);
      });
    </script>

    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-HL24Q9NN24"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-HL24Q9NN24");
    </script>
    <!-- End Google Analytics -->
  </body>
</html>

<!--
-->
